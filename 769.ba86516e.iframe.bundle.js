/*! For license information please see 769.ba86516e.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkweb3uikit=self.webpackChunkweb3uikit||[]).push([[769],{"./node_modules/.pnpm/@ethersproject+abi@5.6.4/node_modules/@ethersproject/abi/lib.esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{RQ:()=>AbiCoder,_R:()=>ParamType});var lib_esm=__webpack_require__("./node_modules/.pnpm/@ethersproject+properties@5.6.0/node_modules/@ethersproject/properties/lib.esm/index.js"),logger_lib_esm=__webpack_require__("./node_modules/.pnpm/@ethersproject+logger@5.6.0/node_modules/@ethersproject/logger/lib.esm/index.js");__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const logger=new logger_lib_esm.Yd("abi/5.6.4"),_constructorGuard={};let ModifiersBytes={calldata:!0,memory:!0,storage:!0},ModifiersNest={calldata:!0,memory:!0};function checkModifier(type,name){if("bytes"===type||"string"===type){if(ModifiersBytes[name])return!0}else if("address"===type){if("payable"===name)return!0}else if((type.indexOf("[")>=0||"tuple"===type)&&ModifiersNest[name])return!0;return(ModifiersBytes[name]||"payable"===name)&&logger.throwArgumentError("invalid modifier","name",name),!1}function populate(object,params){for(let key in params)(0,lib_esm.zG)(object,key,params[key])}const FormatTypes=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),paramTypeArray=new RegExp(/^(.*)\[([0-9]*)\]$/);class ParamType{constructor(constructorGuard,params){constructorGuard!==_constructorGuard&&logger.throwError("use fromString",logger_lib_esm.Yd.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),populate(this,params);let match=this.type.match(paramTypeArray);populate(this,match?{arrayLength:parseInt(match[2]||"-1"),arrayChildren:ParamType.fromObject({type:match[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(format){if(format||(format=FormatTypes.sighash),FormatTypes[format]||logger.throwArgumentError("invalid format type","format",format),format===FormatTypes.json){let result={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(result.indexed=this.indexed),this.components&&(result.components=this.components.map((comp=>JSON.parse(comp.format(format))))),JSON.stringify(result)}let result="";return"array"===this.baseType?(result+=this.arrayChildren.format(format),result+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(format!==FormatTypes.sighash&&(result+=this.type),result+="("+this.components.map((comp=>comp.format(format))).join(format===FormatTypes.full?", ":",")+")"):result+=this.type,format!==FormatTypes.sighash&&(!0===this.indexed&&(result+=" indexed"),format===FormatTypes.full&&this.name&&(result+=" "+this.name)),result}static from(value,allowIndexed){return"string"==typeof value?ParamType.fromString(value,allowIndexed):ParamType.fromObject(value)}static fromObject(value){return ParamType.isParamType(value)?value:new ParamType(_constructorGuard,{name:value.name||null,type:verifyType(value.type),indexed:null==value.indexed?null:!!value.indexed,components:value.components?value.components.map(ParamType.fromObject):null})}static fromString(value,allowIndexed){return function ParamTypify(node){return ParamType.fromObject({name:node.name,type:node.type,indexed:node.indexed,components:node.components})}(function parseParamType(param,allowIndexed){let originalParam=param;function throwError(i){logger.throwArgumentError(`unexpected character at position ${i}`,"param",param)}function newNode(parent){let node={type:"",name:"",parent,state:{allowType:!0}};return allowIndexed&&(node.indexed=!1),node}param=param.replace(/\s/g," ");let parent={type:"",name:"",state:{allowType:!0}},node=parent;for(let i=0;i<param.length;i++){let c=param[i];switch(c){case"(":node.state.allowType&&""===node.type?node.type="tuple":node.state.allowParams||throwError(i),node.state.allowType=!1,node.type=verifyType(node.type),node.components=[newNode(node)],node=node.components[0];break;case")":delete node.state,"indexed"===node.name&&(allowIndexed||throwError(i),node.indexed=!0,node.name=""),checkModifier(node.type,node.name)&&(node.name=""),node.type=verifyType(node.type);let child=node;node=node.parent,node||throwError(i),delete child.parent,node.state.allowParams=!1,node.state.allowName=!0,node.state.allowArray=!0;break;case",":delete node.state,"indexed"===node.name&&(allowIndexed||throwError(i),node.indexed=!0,node.name=""),checkModifier(node.type,node.name)&&(node.name=""),node.type=verifyType(node.type);let sibling=newNode(node.parent);node.parent.components.push(sibling),delete node.parent,node=sibling;break;case" ":node.state.allowType&&""!==node.type&&(node.type=verifyType(node.type),delete node.state.allowType,node.state.allowName=!0,node.state.allowParams=!0),node.state.allowName&&""!==node.name&&("indexed"===node.name?(allowIndexed||throwError(i),node.indexed&&throwError(i),node.indexed=!0,node.name=""):checkModifier(node.type,node.name)?node.name="":node.state.allowName=!1);break;case"[":node.state.allowArray||throwError(i),node.type+=c,node.state.allowArray=!1,node.state.allowName=!1,node.state.readArray=!0;break;case"]":node.state.readArray||throwError(i),node.type+=c,node.state.readArray=!1,node.state.allowArray=!0,node.state.allowName=!0;break;default:node.state.allowType?(node.type+=c,node.state.allowParams=!0,node.state.allowArray=!0):node.state.allowName?(node.name+=c,delete node.state.allowArray):node.state.readArray?node.type+=c:throwError(i)}}return node.parent&&logger.throwArgumentError("unexpected eof","param",param),delete parent.state,"indexed"===node.name?(allowIndexed||throwError(originalParam.length-7),node.indexed&&throwError(originalParam.length-7),node.indexed=!0,node.name=""):checkModifier(node.type,node.name)&&(node.name=""),parent.type=verifyType(parent.type),parent}(value,!!allowIndexed))}static isParamType(value){return!(null==value||!value._isParamType)}}function verifyType(type){return type.match(/^uint($|[^1-9])/)?type="uint256"+type.substring(4):type.match(/^int($|[^1-9])/)&&(type="int256"+type.substring(3)),type}var bytes_lib_esm=__webpack_require__("./node_modules/.pnpm/@ethersproject+bytes@5.6.1/node_modules/@ethersproject/bytes/lib.esm/index.js"),bignumber=__webpack_require__("./node_modules/.pnpm/@ethersproject+bignumber@5.6.2/node_modules/@ethersproject/bignumber/lib.esm/bignumber.js");const abstract_coder_logger=new logger_lib_esm.Yd("abi/5.6.4");class Coder{constructor(name,type,localName,dynamic){this.name=name,this.type=type,this.localName=localName,this.dynamic=dynamic}_throwError(message,value){abstract_coder_logger.throwArgumentError(message,this.localName,value)}}class Writer{constructor(wordSize){(0,lib_esm.zG)(this,"wordSize",wordSize||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(wordSize)}get data(){return(0,bytes_lib_esm.xs)(this._data)}get length(){return this._dataLength}_writeData(data){return this._data.push(data),this._dataLength+=data.length,data.length}appendWriter(writer){return this._writeData((0,bytes_lib_esm.zo)(writer._data))}writeBytes(value){let bytes=(0,bytes_lib_esm.lE)(value);const paddingOffset=bytes.length%this.wordSize;return paddingOffset&&(bytes=(0,bytes_lib_esm.zo)([bytes,this._padding.slice(paddingOffset)])),this._writeData(bytes)}_getValue(value){let bytes=(0,bytes_lib_esm.lE)(bignumber.O$.from(value));return bytes.length>this.wordSize&&abstract_coder_logger.throwError("value out-of-bounds",logger_lib_esm.Yd.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:bytes.length}),bytes.length%this.wordSize&&(bytes=(0,bytes_lib_esm.zo)([this._padding.slice(bytes.length%this.wordSize),bytes])),bytes}writeValue(value){return this._writeData(this._getValue(value))}writeUpdatableValue(){const offset=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,value=>{this._data[offset]=this._getValue(value)}}}class Reader{constructor(data,wordSize,coerceFunc,allowLoose){(0,lib_esm.zG)(this,"_data",(0,bytes_lib_esm.lE)(data)),(0,lib_esm.zG)(this,"wordSize",wordSize||32),(0,lib_esm.zG)(this,"_coerceFunc",coerceFunc),(0,lib_esm.zG)(this,"allowLoose",allowLoose),this._offset=0}get data(){return(0,bytes_lib_esm.Dv)(this._data)}get consumed(){return this._offset}static coerce(name,value){let match=name.match("^u?int([0-9]+)$");return match&&parseInt(match[1])<=48&&(value=value.toNumber()),value}coerce(name,value){return this._coerceFunc?this._coerceFunc(name,value):Reader.coerce(name,value)}_peekBytes(offset,length,loose){let alignedLength=Math.ceil(length/this.wordSize)*this.wordSize;return this._offset+alignedLength>this._data.length&&(this.allowLoose&&loose&&this._offset+length<=this._data.length?alignedLength=length:abstract_coder_logger.throwError("data out-of-bounds",logger_lib_esm.Yd.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+alignedLength})),this._data.slice(this._offset,this._offset+alignedLength)}subReader(offset){return new Reader(this._data.slice(this._offset+offset),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(length,loose){let bytes=this._peekBytes(0,length,!!loose);return this._offset+=bytes.length,bytes.slice(0,length)}readValue(){return bignumber.O$.from(this.readBytes(this.wordSize))}}var address_lib_esm=__webpack_require__("./node_modules/.pnpm/@ethersproject+address@5.6.1/node_modules/@ethersproject/address/lib.esm/index.js");class AddressCoder extends Coder{constructor(localName){super("address","address",localName,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(writer,value){try{value=(0,address_lib_esm.Kn)(value)}catch(error){this._throwError(error.message,value)}return writer.writeValue(value)}decode(reader){return(0,address_lib_esm.Kn)((0,bytes_lib_esm.$m)(reader.readValue().toHexString(),20))}}class AnonymousCoder extends Coder{constructor(coder){super(coder.name,coder.type,void 0,coder.dynamic),this.coder=coder}defaultValue(){return this.coder.defaultValue()}encode(writer,value){return this.coder.encode(writer,value)}decode(reader){return this.coder.decode(reader)}}const array_logger=new logger_lib_esm.Yd("abi/5.6.4");function pack(writer,coders,values){let arrayValues=null;if(Array.isArray(values))arrayValues=values;else if(values&&"object"==typeof values){let unique={};arrayValues=coders.map((coder=>{const name=coder.localName;return name||array_logger.throwError("cannot encode object for signature with missing names",logger_lib_esm.Yd.errors.INVALID_ARGUMENT,{argument:"values",coder,value:values}),unique[name]&&array_logger.throwError("cannot encode object for signature with duplicate names",logger_lib_esm.Yd.errors.INVALID_ARGUMENT,{argument:"values",coder,value:values}),unique[name]=!0,values[name]}))}else array_logger.throwArgumentError("invalid tuple value","tuple",values);coders.length!==arrayValues.length&&array_logger.throwArgumentError("types/value length mismatch","tuple",values);let staticWriter=new Writer(writer.wordSize),dynamicWriter=new Writer(writer.wordSize),updateFuncs=[];coders.forEach(((coder,index)=>{let value=arrayValues[index];if(coder.dynamic){let dynamicOffset=dynamicWriter.length;coder.encode(dynamicWriter,value);let updateFunc=staticWriter.writeUpdatableValue();updateFuncs.push((baseOffset=>{updateFunc(baseOffset+dynamicOffset)}))}else coder.encode(staticWriter,value)})),updateFuncs.forEach((func=>{func(staticWriter.length)}));let length=writer.appendWriter(staticWriter);return length+=writer.appendWriter(dynamicWriter),length}function unpack(reader,coders){let values=[],baseReader=reader.subReader(0);coders.forEach((coder=>{let value=null;if(coder.dynamic){let offset=reader.readValue(),offsetReader=baseReader.subReader(offset.toNumber());try{value=coder.decode(offsetReader)}catch(error){if(error.code===logger_lib_esm.Yd.errors.BUFFER_OVERRUN)throw error;value=error,value.baseType=coder.name,value.name=coder.localName,value.type=coder.type}}else try{value=coder.decode(reader)}catch(error){if(error.code===logger_lib_esm.Yd.errors.BUFFER_OVERRUN)throw error;value=error,value.baseType=coder.name,value.name=coder.localName,value.type=coder.type}null!=value&&values.push(value)}));const uniqueNames=coders.reduce(((accum,coder)=>{const name=coder.localName;return name&&(accum[name]||(accum[name]=0),accum[name]++),accum}),{});coders.forEach(((coder,index)=>{let name=coder.localName;if(!name||1!==uniqueNames[name])return;if("length"===name&&(name="_length"),null!=values[name])return;const value=values[index];value instanceof Error?Object.defineProperty(values,name,{enumerable:!0,get:()=>{throw value}}):values[name]=value}));for(let i=0;i<values.length;i++){const value=values[i];value instanceof Error&&Object.defineProperty(values,i,{enumerable:!0,get:()=>{throw value}})}return Object.freeze(values)}class ArrayCoder extends Coder{constructor(coder,length,localName){super("array",coder.type+"["+(length>=0?length:"")+"]",localName,-1===length||coder.dynamic),this.coder=coder,this.length=length}defaultValue(){const defaultChild=this.coder.defaultValue(),result=[];for(let i=0;i<this.length;i++)result.push(defaultChild);return result}encode(writer,value){Array.isArray(value)||this._throwError("expected array value",value);let count=this.length;-1===count&&(count=value.length,writer.writeValue(value.length)),array_logger.checkArgumentCount(value.length,count,"coder array"+(this.localName?" "+this.localName:""));let coders=[];for(let i=0;i<value.length;i++)coders.push(this.coder);return pack(writer,coders,value)}decode(reader){let count=this.length;-1===count&&(count=reader.readValue().toNumber(),32*count>reader._data.length&&array_logger.throwError("insufficient data length",logger_lib_esm.Yd.errors.BUFFER_OVERRUN,{length:reader._data.length,count}));let coders=[];for(let i=0;i<count;i++)coders.push(new AnonymousCoder(this.coder));return reader.coerce(this.name,unpack(reader,coders))}}class BooleanCoder extends Coder{constructor(localName){super("bool","bool",localName,!1)}defaultValue(){return!1}encode(writer,value){return writer.writeValue(value?1:0)}decode(reader){return reader.coerce(this.type,!reader.readValue().isZero())}}class DynamicBytesCoder extends Coder{constructor(type,localName){super(type,type,localName,!0)}defaultValue(){return"0x"}encode(writer,value){value=(0,bytes_lib_esm.lE)(value);let length=writer.writeValue(value.length);return length+=writer.writeBytes(value),length}decode(reader){return reader.readBytes(reader.readValue().toNumber(),!0)}}class BytesCoder extends DynamicBytesCoder{constructor(localName){super("bytes",localName)}decode(reader){return reader.coerce(this.name,(0,bytes_lib_esm.Dv)(super.decode(reader)))}}class FixedBytesCoder extends Coder{constructor(size,localName){let name="bytes"+String(size);super(name,name,localName,!1),this.size=size}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(writer,value){let data=(0,bytes_lib_esm.lE)(value);return data.length!==this.size&&this._throwError("incorrect data length",value),writer.writeBytes(data)}decode(reader){return reader.coerce(this.name,(0,bytes_lib_esm.Dv)(reader.readBytes(this.size)))}}class NullCoder extends Coder{constructor(localName){super("null","",localName,!1)}defaultValue(){return null}encode(writer,value){return null!=value&&this._throwError("not null",value),writer.writeBytes([])}decode(reader){return reader.readBytes(0),reader.coerce(this.name,null)}}var bignumbers=__webpack_require__("./node_modules/.pnpm/@ethersproject+constants@5.6.1/node_modules/@ethersproject/constants/lib.esm/bignumbers.js");class NumberCoder extends Coder{constructor(size,signed,localName){const name=(signed?"int":"uint")+8*size;super(name,name,localName,!1),this.size=size,this.signed=signed}defaultValue(){return 0}encode(writer,value){let v=bignumber.O$.from(value),maxUintValue=bignumbers.Bz.mask(8*writer.wordSize);if(this.signed){let bounds=maxUintValue.mask(8*this.size-1);(v.gt(bounds)||v.lt(bounds.add(bignumbers.fh).mul(bignumbers.tL)))&&this._throwError("value out-of-bounds",value)}else(v.lt(bignumbers._Y)||v.gt(maxUintValue.mask(8*this.size)))&&this._throwError("value out-of-bounds",value);return v=v.toTwos(8*this.size).mask(8*this.size),this.signed&&(v=v.fromTwos(8*this.size).toTwos(8*writer.wordSize)),writer.writeValue(v)}decode(reader){let value=reader.readValue().mask(8*this.size);return this.signed&&(value=value.fromTwos(8*this.size)),reader.coerce(this.name,value)}}const utf8_logger=new logger_lib_esm.Yd("strings/5.6.1");var UnicodeNormalizationForm,Utf8ErrorReason;function ignoreFunc(reason,offset,bytes,output,badCodepoint){if(reason===Utf8ErrorReason.BAD_PREFIX||reason===Utf8ErrorReason.UNEXPECTED_CONTINUE){let i=0;for(let o=offset+1;o<bytes.length&&bytes[o]>>6==2;o++)i++;return i}return reason===Utf8ErrorReason.OVERRUN?bytes.length-offset-1:0}!function(UnicodeNormalizationForm){UnicodeNormalizationForm.current="",UnicodeNormalizationForm.NFC="NFC",UnicodeNormalizationForm.NFD="NFD",UnicodeNormalizationForm.NFKC="NFKC",UnicodeNormalizationForm.NFKD="NFKD"}(UnicodeNormalizationForm||(UnicodeNormalizationForm={})),function(Utf8ErrorReason){Utf8ErrorReason.UNEXPECTED_CONTINUE="unexpected continuation byte",Utf8ErrorReason.BAD_PREFIX="bad codepoint prefix",Utf8ErrorReason.OVERRUN="string overrun",Utf8ErrorReason.MISSING_CONTINUE="missing continuation byte",Utf8ErrorReason.OUT_OF_RANGE="out of UTF-8 range",Utf8ErrorReason.UTF16_SURROGATE="UTF-16 surrogate",Utf8ErrorReason.OVERLONG="overlong representation"}(Utf8ErrorReason||(Utf8ErrorReason={}));const Utf8ErrorFuncs=Object.freeze({error:function errorFunc(reason,offset,bytes,output,badCodepoint){return utf8_logger.throwArgumentError(`invalid codepoint at offset ${offset}; ${reason}`,"bytes",bytes)},ignore:ignoreFunc,replace:function replaceFunc(reason,offset,bytes,output,badCodepoint){return reason===Utf8ErrorReason.OVERLONG?(output.push(badCodepoint),0):(output.push(65533),ignoreFunc(reason,offset,bytes))}});function getUtf8CodePoints(bytes,onError){null==onError&&(onError=Utf8ErrorFuncs.error),bytes=(0,bytes_lib_esm.lE)(bytes);const result=[];let i=0;for(;i<bytes.length;){const c=bytes[i++];if(c>>7==0){result.push(c);continue}let extraLength=null,overlongMask=null;if(192==(224&c))extraLength=1,overlongMask=127;else if(224==(240&c))extraLength=2,overlongMask=2047;else{if(240!=(248&c)){i+=onError(128==(192&c)?Utf8ErrorReason.UNEXPECTED_CONTINUE:Utf8ErrorReason.BAD_PREFIX,i-1,bytes,result);continue}extraLength=3,overlongMask=65535}if(i-1+extraLength>=bytes.length){i+=onError(Utf8ErrorReason.OVERRUN,i-1,bytes,result);continue}let res=c&(1<<8-extraLength-1)-1;for(let j=0;j<extraLength;j++){let nextChar=bytes[i];if(128!=(192&nextChar)){i+=onError(Utf8ErrorReason.MISSING_CONTINUE,i,bytes,result),res=null;break}res=res<<6|63&nextChar,i++}null!==res&&(res>1114111?i+=onError(Utf8ErrorReason.OUT_OF_RANGE,i-1-extraLength,bytes,result,res):res>=55296&&res<=57343?i+=onError(Utf8ErrorReason.UTF16_SURROGATE,i-1-extraLength,bytes,result,res):res<=overlongMask?i+=onError(Utf8ErrorReason.OVERLONG,i-1-extraLength,bytes,result,res):result.push(res))}return result}function toUtf8Bytes(str,form=UnicodeNormalizationForm.current){form!=UnicodeNormalizationForm.current&&(utf8_logger.checkNormalize(),str=str.normalize(form));let result=[];for(let i=0;i<str.length;i++){const c=str.charCodeAt(i);if(c<128)result.push(c);else if(c<2048)result.push(c>>6|192),result.push(63&c|128);else if(55296==(64512&c)){i++;const c2=str.charCodeAt(i);if(i>=str.length||56320!=(64512&c2))throw new Error("invalid utf-8 string");const pair=65536+((1023&c)<<10)+(1023&c2);result.push(pair>>18|240),result.push(pair>>12&63|128),result.push(pair>>6&63|128),result.push(63&pair|128)}else result.push(c>>12|224),result.push(c>>6&63|128),result.push(63&c|128)}return(0,bytes_lib_esm.lE)(result)}function toUtf8String(bytes,onError){return function _toUtf8String(codePoints){return codePoints.map((codePoint=>codePoint<=65535?String.fromCharCode(codePoint):(codePoint-=65536,String.fromCharCode(55296+(codePoint>>10&1023),56320+(1023&codePoint))))).join("")}(getUtf8CodePoints(bytes,onError))}class StringCoder extends DynamicBytesCoder{constructor(localName){super("string",localName)}defaultValue(){return""}encode(writer,value){return super.encode(writer,toUtf8Bytes(value))}decode(reader){return toUtf8String(super.decode(reader))}}class TupleCoder extends Coder{constructor(coders,localName){let dynamic=!1;const types=[];coders.forEach((coder=>{coder.dynamic&&(dynamic=!0),types.push(coder.type)}));super("tuple","tuple("+types.join(",")+")",localName,dynamic),this.coders=coders}defaultValue(){const values=[];this.coders.forEach((coder=>{values.push(coder.defaultValue())}));const uniqueNames=this.coders.reduce(((accum,coder)=>{const name=coder.localName;return name&&(accum[name]||(accum[name]=0),accum[name]++),accum}),{});return this.coders.forEach(((coder,index)=>{let name=coder.localName;name&&1===uniqueNames[name]&&("length"===name&&(name="_length"),null==values[name]&&(values[name]=values[index]))})),Object.freeze(values)}encode(writer,value){return pack(writer,this.coders,value)}decode(reader){return reader.coerce(this.name,unpack(reader,this.coders))}}const abi_coder_logger=new logger_lib_esm.Yd("abi/5.6.4"),paramTypeBytes=new RegExp(/^bytes([0-9]*)$/),paramTypeNumber=new RegExp(/^(u?int)([0-9]*)$/);class AbiCoder{constructor(coerceFunc){(0,lib_esm.zG)(this,"coerceFunc",coerceFunc||null)}_getCoder(param){switch(param.baseType){case"address":return new AddressCoder(param.name);case"bool":return new BooleanCoder(param.name);case"string":return new StringCoder(param.name);case"bytes":return new BytesCoder(param.name);case"array":return new ArrayCoder(this._getCoder(param.arrayChildren),param.arrayLength,param.name);case"tuple":return new TupleCoder((param.components||[]).map((component=>this._getCoder(component))),param.name);case"":return new NullCoder(param.name)}let match=param.type.match(paramTypeNumber);if(match){let size=parseInt(match[2]||"256");return(0===size||size>256||size%8!=0)&&abi_coder_logger.throwArgumentError("invalid "+match[1]+" bit length","param",param),new NumberCoder(size/8,"int"===match[1],param.name)}if(match=param.type.match(paramTypeBytes),match){let size=parseInt(match[1]);return(0===size||size>32)&&abi_coder_logger.throwArgumentError("invalid bytes length","param",param),new FixedBytesCoder(size,param.name)}return abi_coder_logger.throwArgumentError("invalid type","type",param.type)}_getWordSize(){return 32}_getReader(data,allowLoose){return new Reader(data,this._getWordSize(),this.coerceFunc,allowLoose)}_getWriter(){return new Writer(this._getWordSize())}getDefaultValue(types){const coders=types.map((type=>this._getCoder(ParamType.from(type))));return new TupleCoder(coders,"_").defaultValue()}encode(types,values){types.length!==values.length&&abi_coder_logger.throwError("types/values length mismatch",logger_lib_esm.Yd.errors.INVALID_ARGUMENT,{count:{types:types.length,values:values.length},value:{types,values}});const coders=types.map((type=>this._getCoder(ParamType.from(type)))),coder=new TupleCoder(coders,"_"),writer=this._getWriter();return coder.encode(writer,values),writer.data}decode(types,data,loose){const coders=types.map((type=>this._getCoder(ParamType.from(type))));return new TupleCoder(coders,"_").decode(this._getReader((0,bytes_lib_esm.lE)(data),loose))}}new AbiCoder},"./node_modules/.pnpm/@ethersproject+address@5.6.1/node_modules/@ethersproject/address/lib.esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Kn:()=>getAddress});var lib_esm=__webpack_require__("./node_modules/.pnpm/@ethersproject+bytes@5.6.1/node_modules/@ethersproject/bytes/lib.esm/index.js"),bignumber=__webpack_require__("./node_modules/.pnpm/@ethersproject+bignumber@5.6.2/node_modules/@ethersproject/bignumber/lib.esm/bignumber.js"),keccak256_lib_esm=__webpack_require__("./node_modules/.pnpm/@ethersproject+keccak256@5.6.1/node_modules/@ethersproject/keccak256/lib.esm/index.js");const logger=new(__webpack_require__("./node_modules/.pnpm/@ethersproject+logger@5.6.0/node_modules/@ethersproject/logger/lib.esm/index.js").Yd)("address/5.6.1");function getChecksumAddress(address){(0,lib_esm.A7)(address,20)||logger.throwArgumentError("invalid address","address",address);const chars=(address=address.toLowerCase()).substring(2).split(""),expanded=new Uint8Array(40);for(let i=0;i<40;i++)expanded[i]=chars[i].charCodeAt(0);const hashed=(0,lib_esm.lE)((0,keccak256_lib_esm.w)(expanded));for(let i=0;i<40;i+=2)hashed[i>>1]>>4>=8&&(chars[i]=chars[i].toUpperCase()),(15&hashed[i>>1])>=8&&(chars[i+1]=chars[i+1].toUpperCase());return"0x"+chars.join("")}const ibanLookup={};for(let i=0;i<10;i++)ibanLookup[String(i)]=String(i);for(let i=0;i<26;i++)ibanLookup[String.fromCharCode(65+i)]=String(10+i);const safeDigits=Math.floor(function log10(x){return Math.log10?Math.log10(x):Math.log(x)/Math.LN10}(9007199254740991));function ibanChecksum(address){let expanded=(address=(address=address.toUpperCase()).substring(4)+address.substring(0,2)+"00").split("").map((c=>ibanLookup[c])).join("");for(;expanded.length>=safeDigits;){let block=expanded.substring(0,safeDigits);expanded=parseInt(block,10)%97+expanded.substring(block.length)}let checksum=String(98-parseInt(expanded,10)%97);for(;checksum.length<2;)checksum="0"+checksum;return checksum}function getAddress(address){let result=null;if("string"!=typeof address&&logger.throwArgumentError("invalid address","address",address),address.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==address.substring(0,2)&&(address="0x"+address),result=getChecksumAddress(address),address.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&result!==address&&logger.throwArgumentError("bad address checksum","address",address);else if(address.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(address.substring(2,4)!==ibanChecksum(address)&&logger.throwArgumentError("bad icap checksum","address",address),result=(0,bignumber.g$)(address.substring(4));result.length<40;)result="0"+result;result=getChecksumAddress("0x"+result)}else logger.throwArgumentError("invalid address","address",address);return result}},"./node_modules/.pnpm/@ethersproject+bignumber@5.6.2/node_modules/@ethersproject/bignumber/lib.esm/bignumber.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O$:()=>BigNumber,g$:()=>_base36To16});var bn=__webpack_require__("./node_modules/.pnpm/bn.js@5.2.1/node_modules/bn.js/lib/bn.js"),bn_default=__webpack_require__.n(bn),lib_esm=__webpack_require__("./node_modules/.pnpm/@ethersproject+bytes@5.6.1/node_modules/@ethersproject/bytes/lib.esm/index.js"),logger_lib_esm=__webpack_require__("./node_modules/.pnpm/@ethersproject+logger@5.6.0/node_modules/@ethersproject/logger/lib.esm/index.js");var BN=bn_default().BN;const logger=new logger_lib_esm.Yd("bignumber/5.6.2"),_constructorGuard={};let _warnedToStringRadix=!1;class BigNumber{constructor(constructorGuard,hex){constructorGuard!==_constructorGuard&&logger.throwError("cannot call constructor directly; use BigNumber.from",logger_lib_esm.Yd.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=hex,this._isBigNumber=!0,Object.freeze(this)}fromTwos(value){return toBigNumber(toBN(this).fromTwos(value))}toTwos(value){return toBigNumber(toBN(this).toTwos(value))}abs(){return"-"===this._hex[0]?BigNumber.from(this._hex.substring(1)):this}add(other){return toBigNumber(toBN(this).add(toBN(other)))}sub(other){return toBigNumber(toBN(this).sub(toBN(other)))}div(other){return BigNumber.from(other).isZero()&&throwFault("division-by-zero","div"),toBigNumber(toBN(this).div(toBN(other)))}mul(other){return toBigNumber(toBN(this).mul(toBN(other)))}mod(other){const value=toBN(other);return value.isNeg()&&throwFault("division-by-zero","mod"),toBigNumber(toBN(this).umod(value))}pow(other){const value=toBN(other);return value.isNeg()&&throwFault("negative-power","pow"),toBigNumber(toBN(this).pow(value))}and(other){const value=toBN(other);return(this.isNegative()||value.isNeg())&&throwFault("unbound-bitwise-result","and"),toBigNumber(toBN(this).and(value))}or(other){const value=toBN(other);return(this.isNegative()||value.isNeg())&&throwFault("unbound-bitwise-result","or"),toBigNumber(toBN(this).or(value))}xor(other){const value=toBN(other);return(this.isNegative()||value.isNeg())&&throwFault("unbound-bitwise-result","xor"),toBigNumber(toBN(this).xor(value))}mask(value){return(this.isNegative()||value<0)&&throwFault("negative-width","mask"),toBigNumber(toBN(this).maskn(value))}shl(value){return(this.isNegative()||value<0)&&throwFault("negative-width","shl"),toBigNumber(toBN(this).shln(value))}shr(value){return(this.isNegative()||value<0)&&throwFault("negative-width","shr"),toBigNumber(toBN(this).shrn(value))}eq(other){return toBN(this).eq(toBN(other))}lt(other){return toBN(this).lt(toBN(other))}lte(other){return toBN(this).lte(toBN(other))}gt(other){return toBN(this).gt(toBN(other))}gte(other){return toBN(this).gte(toBN(other))}isNegative(){return"-"===this._hex[0]}isZero(){return toBN(this).isZero()}toNumber(){try{return toBN(this).toNumber()}catch(error){throwFault("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return logger.throwError("this platform does not support BigInt",logger_lib_esm.Yd.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?_warnedToStringRadix||(_warnedToStringRadix=!0,logger.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?logger.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",logger_lib_esm.Yd.errors.UNEXPECTED_ARGUMENT,{}):logger.throwError("BigNumber.toString does not accept parameters",logger_lib_esm.Yd.errors.UNEXPECTED_ARGUMENT,{})),toBN(this).toString(10)}toHexString(){return this._hex}toJSON(key){return{type:"BigNumber",hex:this.toHexString()}}static from(value){if(value instanceof BigNumber)return value;if("string"==typeof value)return value.match(/^-?0x[0-9a-f]+$/i)?new BigNumber(_constructorGuard,toHex(value)):value.match(/^-?[0-9]+$/)?new BigNumber(_constructorGuard,toHex(new BN(value))):logger.throwArgumentError("invalid BigNumber string","value",value);if("number"==typeof value)return value%1&&throwFault("underflow","BigNumber.from",value),(value>=9007199254740991||value<=-9007199254740991)&&throwFault("overflow","BigNumber.from",value),BigNumber.from(String(value));const anyValue=value;if("bigint"==typeof anyValue)return BigNumber.from(anyValue.toString());if((0,lib_esm._t)(anyValue))return BigNumber.from((0,lib_esm.Dv)(anyValue));if(anyValue)if(anyValue.toHexString){const hex=anyValue.toHexString();if("string"==typeof hex)return BigNumber.from(hex)}else{let hex=anyValue._hex;if(null==hex&&"BigNumber"===anyValue.type&&(hex=anyValue.hex),"string"==typeof hex&&((0,lib_esm.A7)(hex)||"-"===hex[0]&&(0,lib_esm.A7)(hex.substring(1))))return BigNumber.from(hex)}return logger.throwArgumentError("invalid BigNumber value","value",value)}static isBigNumber(value){return!(!value||!value._isBigNumber)}}function toHex(value){if("string"!=typeof value)return toHex(value.toString(16));if("-"===value[0])return"-"===(value=value.substring(1))[0]&&logger.throwArgumentError("invalid hex","value",value),"0x00"===(value=toHex(value))?value:"-"+value;if("0x"!==value.substring(0,2)&&(value="0x"+value),"0x"===value)return"0x00";for(value.length%2&&(value="0x0"+value.substring(2));value.length>4&&"0x00"===value.substring(0,4);)value="0x"+value.substring(4);return value}function toBigNumber(value){return BigNumber.from(toHex(value))}function toBN(value){const hex=BigNumber.from(value).toHexString();return"-"===hex[0]?new BN("-"+hex.substring(3),16):new BN(hex.substring(2),16)}function throwFault(fault,operation,value){const params={fault,operation};return null!=value&&(params.value=value),logger.throwError(fault,logger_lib_esm.Yd.errors.NUMERIC_FAULT,params)}function _base36To16(value){return new BN(value,36).toString(16)}},"./node_modules/.pnpm/@ethersproject+bytes@5.6.1/node_modules/@ethersproject/bytes/lib.esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{lE:()=>arrayify,zo:()=>concat,xs:()=>hexConcat,E1:()=>hexDataLength,p3:()=>hexDataSlice,$m:()=>hexZeroPad,Dv:()=>hexlify,_t:()=>isBytes,Zq:()=>isBytesLike,A7:()=>isHexString,N:()=>splitSignature,G1:()=>stripZeros});const logger=new(__webpack_require__("./node_modules/.pnpm/@ethersproject+logger@5.6.0/node_modules/@ethersproject/logger/lib.esm/index.js").Yd)("bytes/5.6.1");function isHexable(value){return!!value.toHexString}function addSlice(array){return array.slice||(array.slice=function(){const args=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(array,args)))}),array}function isBytesLike(value){return isHexString(value)&&!(value.length%2)||isBytes(value)}function isInteger(value){return"number"==typeof value&&value==value&&value%1==0}function isBytes(value){if(null==value)return!1;if(value.constructor===Uint8Array)return!0;if("string"==typeof value)return!1;if(!isInteger(value.length)||value.length<0)return!1;for(let i=0;i<value.length;i++){const v=value[i];if(!isInteger(v)||v<0||v>=256)return!1}return!0}function arrayify(value,options){if(options||(options={}),"number"==typeof value){logger.checkSafeUint53(value,"invalid arrayify value");const result=[];for(;value;)result.unshift(255&value),value=parseInt(String(value/256));return 0===result.length&&result.push(0),addSlice(new Uint8Array(result))}if(options.allowMissingPrefix&&"string"==typeof value&&"0x"!==value.substring(0,2)&&(value="0x"+value),isHexable(value)&&(value=value.toHexString()),isHexString(value)){let hex=value.substring(2);hex.length%2&&("left"===options.hexPad?hex="0"+hex:"right"===options.hexPad?hex+="0":logger.throwArgumentError("hex data is odd-length","value",value));const result=[];for(let i=0;i<hex.length;i+=2)result.push(parseInt(hex.substring(i,i+2),16));return addSlice(new Uint8Array(result))}return isBytes(value)?addSlice(new Uint8Array(value)):logger.throwArgumentError("invalid arrayify value","value",value)}function concat(items){const objects=items.map((item=>arrayify(item))),length=objects.reduce(((accum,item)=>accum+item.length),0),result=new Uint8Array(length);return objects.reduce(((offset,object)=>(result.set(object,offset),offset+object.length)),0),addSlice(result)}function stripZeros(value){let result=arrayify(value);if(0===result.length)return result;let start=0;for(;start<result.length&&0===result[start];)start++;return start&&(result=result.slice(start)),result}function isHexString(value,length){return!("string"!=typeof value||!value.match(/^0x[0-9A-Fa-f]*$/))&&(!length||value.length===2+2*length)}function hexlify(value,options){if(options||(options={}),"number"==typeof value){logger.checkSafeUint53(value,"invalid hexlify value");let hex="";for(;value;)hex="0123456789abcdef"[15&value]+hex,value=Math.floor(value/16);return hex.length?(hex.length%2&&(hex="0"+hex),"0x"+hex):"0x00"}if("bigint"==typeof value)return(value=value.toString(16)).length%2?"0x0"+value:"0x"+value;if(options.allowMissingPrefix&&"string"==typeof value&&"0x"!==value.substring(0,2)&&(value="0x"+value),isHexable(value))return value.toHexString();if(isHexString(value))return value.length%2&&("left"===options.hexPad?value="0x0"+value.substring(2):"right"===options.hexPad?value+="0":logger.throwArgumentError("hex data is odd-length","value",value)),value.toLowerCase();if(isBytes(value)){let result="0x";for(let i=0;i<value.length;i++){let v=value[i];result+="0123456789abcdef"[(240&v)>>4]+"0123456789abcdef"[15&v]}return result}return logger.throwArgumentError("invalid hexlify value","value",value)}function hexDataLength(data){if("string"!=typeof data)data=hexlify(data);else if(!isHexString(data)||data.length%2)return null;return(data.length-2)/2}function hexDataSlice(data,offset,endOffset){return"string"!=typeof data?data=hexlify(data):(!isHexString(data)||data.length%2)&&logger.throwArgumentError("invalid hexData","value",data),offset=2+2*offset,null!=endOffset?"0x"+data.substring(offset,2+2*endOffset):"0x"+data.substring(offset)}function hexConcat(items){let result="0x";return items.forEach((item=>{result+=hexlify(item).substring(2)})),result}function hexZeroPad(value,length){for("string"!=typeof value?value=hexlify(value):isHexString(value)||logger.throwArgumentError("invalid hex string","value",value),value.length>2*length+2&&logger.throwArgumentError("value out of range","value",arguments[1]);value.length<2*length+2;)value="0x0"+value.substring(2);return value}function splitSignature(signature){const result={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(isBytesLike(signature)){let bytes=arrayify(signature);64===bytes.length?(result.v=27+(bytes[32]>>7),bytes[32]&=127,result.r=hexlify(bytes.slice(0,32)),result.s=hexlify(bytes.slice(32,64))):65===bytes.length?(result.r=hexlify(bytes.slice(0,32)),result.s=hexlify(bytes.slice(32,64)),result.v=bytes[64]):logger.throwArgumentError("invalid signature string","signature",signature),result.v<27&&(0===result.v||1===result.v?result.v+=27:logger.throwArgumentError("signature invalid v byte","signature",signature)),result.recoveryParam=1-result.v%2,result.recoveryParam&&(bytes[32]|=128),result._vs=hexlify(bytes.slice(32,64))}else{if(result.r=signature.r,result.s=signature.s,result.v=signature.v,result.recoveryParam=signature.recoveryParam,result._vs=signature._vs,null!=result._vs){const vs=function zeroPad(value,length){(value=arrayify(value)).length>length&&logger.throwArgumentError("value out of range","value",arguments[0]);const result=new Uint8Array(length);return result.set(value,length-value.length),addSlice(result)}(arrayify(result._vs),32);result._vs=hexlify(vs);const recoveryParam=vs[0]>=128?1:0;null==result.recoveryParam?result.recoveryParam=recoveryParam:result.recoveryParam!==recoveryParam&&logger.throwArgumentError("signature recoveryParam mismatch _vs","signature",signature),vs[0]&=127;const s=hexlify(vs);null==result.s?result.s=s:result.s!==s&&logger.throwArgumentError("signature v mismatch _vs","signature",signature)}if(null==result.recoveryParam)null==result.v?logger.throwArgumentError("signature missing v and recoveryParam","signature",signature):0===result.v||1===result.v?result.recoveryParam=result.v:result.recoveryParam=1-result.v%2;else if(null==result.v)result.v=27+result.recoveryParam;else{const recId=0===result.v||1===result.v?result.v:1-result.v%2;result.recoveryParam!==recId&&logger.throwArgumentError("signature recoveryParam mismatch v","signature",signature)}null!=result.r&&isHexString(result.r)?result.r=hexZeroPad(result.r,32):logger.throwArgumentError("signature missing or invalid r","signature",signature),null!=result.s&&isHexString(result.s)?result.s=hexZeroPad(result.s,32):logger.throwArgumentError("signature missing or invalid s","signature",signature);const vs=arrayify(result.s);vs[0]>=128&&logger.throwArgumentError("signature s out of range","signature",signature),result.recoveryParam&&(vs[0]|=128);const _vs=hexlify(vs);result._vs&&(isHexString(result._vs)||logger.throwArgumentError("signature invalid _vs","signature",signature),result._vs=hexZeroPad(result._vs,32)),null==result._vs?result._vs=_vs:result._vs!==_vs&&logger.throwArgumentError("signature _vs mismatch v and s","signature",signature)}return result.yParityAndS=result._vs,result.compact=result.r+result.yParityAndS.substring(2),result}},"./node_modules/.pnpm/@ethersproject+constants@5.6.1/node_modules/@ethersproject/constants/lib.esm/bignumbers.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Bz:()=>MaxUint256,_Y:()=>Zero,fh:()=>One,tL:()=>NegativeOne});var _ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@ethersproject+bignumber@5.6.2/node_modules/@ethersproject/bignumber/lib.esm/bignumber.js");const NegativeOne=_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_0__.O$.from(-1),Zero=_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_0__.O$.from(0),One=_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_0__.O$.from(1),MaxUint256=_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_0__.O$.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")},"./node_modules/.pnpm/@ethersproject+keccak256@5.6.1/node_modules/@ethersproject/keccak256/lib.esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{w:()=>keccak256});var js_sha3__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/js-sha3@0.8.0/node_modules/js-sha3/src/sha3.js"),js_sha3__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(js_sha3__WEBPACK_IMPORTED_MODULE_0__),_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@ethersproject+bytes@5.6.1/node_modules/@ethersproject/bytes/lib.esm/index.js");function keccak256(data){return"0x"+js_sha3__WEBPACK_IMPORTED_MODULE_0___default().keccak_256((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_1__.lE)(data))}},"./node_modules/.pnpm/@ethersproject+transactions@5.6.2/node_modules/@ethersproject/transactions/lib.esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TransactionTypes:()=>TransactionTypes,accessListify:()=>accessListify,computeAddress:()=>computeAddress,parse:()=>parse,recoverAddress:()=>recoverAddress,serialize:()=>serialize});var lib_esm=__webpack_require__("./node_modules/.pnpm/@ethersproject+address@5.6.1/node_modules/@ethersproject/address/lib.esm/index.js"),bignumber=__webpack_require__("./node_modules/.pnpm/@ethersproject+bignumber@5.6.2/node_modules/@ethersproject/bignumber/lib.esm/bignumber.js"),bytes_lib_esm=__webpack_require__("./node_modules/.pnpm/@ethersproject+bytes@5.6.1/node_modules/@ethersproject/bytes/lib.esm/index.js"),bignumbers=__webpack_require__("./node_modules/.pnpm/@ethersproject+constants@5.6.1/node_modules/@ethersproject/constants/lib.esm/bignumbers.js"),keccak256_lib_esm=__webpack_require__("./node_modules/.pnpm/@ethersproject+keccak256@5.6.1/node_modules/@ethersproject/keccak256/lib.esm/index.js"),properties_lib_esm=__webpack_require__("./node_modules/.pnpm/@ethersproject+properties@5.6.0/node_modules/@ethersproject/properties/lib.esm/index.js"),logger_lib_esm=__webpack_require__("./node_modules/.pnpm/@ethersproject+logger@5.6.0/node_modules/@ethersproject/logger/lib.esm/index.js");const logger=new logger_lib_esm.Yd("rlp/5.6.1");function arrayifyInteger(value){const result=[];for(;value;)result.unshift(255&value),value>>=8;return result}function unarrayifyInteger(data,offset,length){let result=0;for(let i=0;i<length;i++)result=256*result+data[offset+i];return result}function _encode(object){if(Array.isArray(object)){let payload=[];if(object.forEach((function(child){payload=payload.concat(_encode(child))})),payload.length<=55)return payload.unshift(192+payload.length),payload;const length=arrayifyInteger(payload.length);return length.unshift(247+length.length),length.concat(payload)}(0,bytes_lib_esm.Zq)(object)||logger.throwArgumentError("RLP object must be BytesLike","object",object);const data=Array.prototype.slice.call((0,bytes_lib_esm.lE)(object));if(1===data.length&&data[0]<=127)return data;if(data.length<=55)return data.unshift(128+data.length),data;const length=arrayifyInteger(data.length);return length.unshift(183+length.length),length.concat(data)}function encode(object){return(0,bytes_lib_esm.Dv)(_encode(object))}function _decodeChildren(data,offset,childOffset,length){const result=[];for(;childOffset<offset+1+length;){const decoded=_decode(data,childOffset);result.push(decoded.result),(childOffset+=decoded.consumed)>offset+1+length&&logger.throwError("child data too short",logger_lib_esm.Yd.errors.BUFFER_OVERRUN,{})}return{consumed:1+length,result}}function _decode(data,offset){if(0===data.length&&logger.throwError("data too short",logger_lib_esm.Yd.errors.BUFFER_OVERRUN,{}),data[offset]>=248){const lengthLength=data[offset]-247;offset+1+lengthLength>data.length&&logger.throwError("data short segment too short",logger_lib_esm.Yd.errors.BUFFER_OVERRUN,{});const length=unarrayifyInteger(data,offset+1,lengthLength);return offset+1+lengthLength+length>data.length&&logger.throwError("data long segment too short",logger_lib_esm.Yd.errors.BUFFER_OVERRUN,{}),_decodeChildren(data,offset,offset+1+lengthLength,lengthLength+length)}if(data[offset]>=192){const length=data[offset]-192;return offset+1+length>data.length&&logger.throwError("data array too short",logger_lib_esm.Yd.errors.BUFFER_OVERRUN,{}),_decodeChildren(data,offset,offset+1,length)}if(data[offset]>=184){const lengthLength=data[offset]-183;offset+1+lengthLength>data.length&&logger.throwError("data array too short",logger_lib_esm.Yd.errors.BUFFER_OVERRUN,{});const length=unarrayifyInteger(data,offset+1,lengthLength);offset+1+lengthLength+length>data.length&&logger.throwError("data array too short",logger_lib_esm.Yd.errors.BUFFER_OVERRUN,{});return{consumed:1+lengthLength+length,result:(0,bytes_lib_esm.Dv)(data.slice(offset+1+lengthLength,offset+1+lengthLength+length))}}if(data[offset]>=128){const length=data[offset]-128;offset+1+length>data.length&&logger.throwError("data too short",logger_lib_esm.Yd.errors.BUFFER_OVERRUN,{});return{consumed:1+length,result:(0,bytes_lib_esm.Dv)(data.slice(offset+1,offset+1+length))}}return{consumed:1,result:(0,bytes_lib_esm.Dv)(data[offset])}}function decode(data){const bytes=(0,bytes_lib_esm.lE)(data),decoded=_decode(bytes,0);return decoded.consumed!==bytes.length&&logger.throwArgumentError("invalid rlp data","data",data),decoded.result}var bn=__webpack_require__("./node_modules/.pnpm/bn.js@5.2.1/node_modules/bn.js/lib/bn.js"),bn_default=__webpack_require__.n(bn),hash=__webpack_require__("./node_modules/.pnpm/hash.js@1.1.7/node_modules/hash.js/lib/hash.js"),hash_default=__webpack_require__.n(hash);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self&&self;function createCommonjsModule(fn,basedir,module){return module={path:basedir,exports:{},require:function(path,base){return function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==base&&module.path)}},fn(module,module.exports),module.exports}var minimalisticAssert=assert;function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")}assert.equal=function assertEqual(l,r,msg){if(l!=r)throw new Error(msg||"Assertion failed: "+l+" != "+r)};var utils_1=createCommonjsModule((function(module,exports){var utils=exports;function zero2(word){return 1===word.length?"0"+word:word}function toHex(msg){for(var res="",i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res}utils.toArray=function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if("string"!=typeof msg){for(var i=0;i<msg.length;i++)res[i]=0|msg[i];return res}if("hex"===enc){(msg=msg.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(msg="0"+msg);for(i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16))}else for(i=0;i<msg.length;i++){var c=msg.charCodeAt(i),hi=c>>8,lo=255&c;hi?res.push(hi,lo):res.push(lo)}return res},utils.zero2=zero2,utils.toHex=toHex,utils.encode=function encode(arr,enc){return"hex"===enc?toHex(arr):arr}})),utils_1$1=createCommonjsModule((function(module,exports){var utils=exports;utils.assert=minimalisticAssert,utils.toArray=utils_1.toArray,utils.zero2=utils_1.zero2,utils.toHex=utils_1.toHex,utils.encode=utils_1.encode,utils.getNAF=function getNAF(num,w,bits){var naf=new Array(Math.max(num.bitLength(),bits)+1);naf.fill(0);for(var ws=1<<w+1,k=num.clone(),i=0;i<naf.length;i++){var z,mod=k.andln(ws-1);k.isOdd()?(z=mod>(ws>>1)-1?(ws>>1)-mod:mod,k.isubn(z)):z=0,naf[i]=z,k.iushrn(1)}return naf},utils.getJSF=function getJSF(k1,k2){var jsf=[[],[]];k1=k1.clone(),k2=k2.clone();for(var m8,d1=0,d2=0;k1.cmpn(-d1)>0||k2.cmpn(-d2)>0;){var u1,u2,m14=k1.andln(3)+d1&3,m24=k2.andln(3)+d2&3;3===m14&&(m14=-1),3===m24&&(m24=-1),u1=0==(1&m14)?0:3!==(m8=k1.andln(7)+d1&7)&&5!==m8||2!==m24?m14:-m14,jsf[0].push(u1),u2=0==(1&m24)?0:3!==(m8=k2.andln(7)+d2&7)&&5!==m8||2!==m14?m24:-m24,jsf[1].push(u2),2*d1===u1+1&&(d1=1-d1),2*d2===u2+1&&(d2=1-d2),k1.iushrn(1),k2.iushrn(1)}return jsf},utils.cachedProperty=function cachedProperty(obj,name,computer){var key="_"+name;obj.prototype[name]=function cachedProperty(){return void 0!==this[key]?this[key]:this[key]=computer.call(this)}},utils.parseBytes=function parseBytes(bytes){return"string"==typeof bytes?utils.toArray(bytes,"hex"):bytes},utils.intFromLE=function intFromLE(bytes){return new(bn_default())(bytes,"hex","le")}})),getNAF=utils_1$1.getNAF,getJSF=utils_1$1.getJSF,assert$1=utils_1$1.assert;function BaseCurve(type,conf){this.type=type,this.p=new(bn_default())(conf.p,16),this.red=conf.prime?bn_default().red(conf.prime):bn_default().mont(this.p),this.zero=new(bn_default())(0).toRed(this.red),this.one=new(bn_default())(1).toRed(this.red),this.two=new(bn_default())(2).toRed(this.red),this.n=conf.n&&new(bn_default())(conf.n,16),this.g=conf.g&&this.pointFromJSON(conf.g,conf.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var adjustCount=this.n&&this.p.div(this.n);!adjustCount||adjustCount.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base=BaseCurve;function BasePoint(curve,type){this.curve=curve,this.type=type,this.precomputed=null}BaseCurve.prototype.point=function point(){throw new Error("Not implemented")},BaseCurve.prototype.validate=function validate(){throw new Error("Not implemented")},BaseCurve.prototype._fixedNafMul=function _fixedNafMul(p,k){assert$1(p.precomputed);var doubles=p._getDoubles(),naf=getNAF(k,1,this._bitLength),I=(1<<doubles.step+1)-(doubles.step%2==0?2:1);I/=3;var j,nafW,repr=[];for(j=0;j<naf.length;j+=doubles.step){nafW=0;for(var l=j+doubles.step-1;l>=j;l--)nafW=(nafW<<1)+naf[l];repr.push(nafW)}for(var a=this.jpoint(null,null,null),b=this.jpoint(null,null,null),i=I;i>0;i--){for(j=0;j<repr.length;j++)(nafW=repr[j])===i?b=b.mixedAdd(doubles.points[j]):nafW===-i&&(b=b.mixedAdd(doubles.points[j].neg()));a=a.add(b)}return a.toP()},BaseCurve.prototype._wnafMul=function _wnafMul(p,k){var w=4,nafPoints=p._getNAFPoints(w);w=nafPoints.wnd;for(var wnd=nafPoints.points,naf=getNAF(k,w,this._bitLength),acc=this.jpoint(null,null,null),i=naf.length-1;i>=0;i--){for(var l=0;i>=0&&0===naf[i];i--)l++;if(i>=0&&l++,acc=acc.dblp(l),i<0)break;var z=naf[i];assert$1(0!==z),acc="affine"===p.type?z>0?acc.mixedAdd(wnd[z-1>>1]):acc.mixedAdd(wnd[-z-1>>1].neg()):z>0?acc.add(wnd[z-1>>1]):acc.add(wnd[-z-1>>1].neg())}return"affine"===p.type?acc.toP():acc},BaseCurve.prototype._wnafMulAdd=function _wnafMulAdd(defW,points,coeffs,len,jacobianResult){var i,j,p,wndWidth=this._wnafT1,wnd=this._wnafT2,naf=this._wnafT3,max=0;for(i=0;i<len;i++){var nafPoints=(p=points[i])._getNAFPoints(defW);wndWidth[i]=nafPoints.wnd,wnd[i]=nafPoints.points}for(i=len-1;i>=1;i-=2){var a=i-1,b=i;if(1===wndWidth[a]&&1===wndWidth[b]){var comb=[points[a],null,null,points[b]];0===points[a].y.cmp(points[b].y)?(comb[1]=points[a].add(points[b]),comb[2]=points[a].toJ().mixedAdd(points[b].neg())):0===points[a].y.cmp(points[b].y.redNeg())?(comb[1]=points[a].toJ().mixedAdd(points[b]),comb[2]=points[a].add(points[b].neg())):(comb[1]=points[a].toJ().mixedAdd(points[b]),comb[2]=points[a].toJ().mixedAdd(points[b].neg()));var index=[-3,-1,-5,-7,0,7,5,1,3],jsf=getJSF(coeffs[a],coeffs[b]);for(max=Math.max(jsf[0].length,max),naf[a]=new Array(max),naf[b]=new Array(max),j=0;j<max;j++){var ja=0|jsf[0][j],jb=0|jsf[1][j];naf[a][j]=index[3*(ja+1)+(jb+1)],naf[b][j]=0,wnd[a]=comb}}else naf[a]=getNAF(coeffs[a],wndWidth[a],this._bitLength),naf[b]=getNAF(coeffs[b],wndWidth[b],this._bitLength),max=Math.max(naf[a].length,max),max=Math.max(naf[b].length,max)}var acc=this.jpoint(null,null,null),tmp=this._wnafT4;for(i=max;i>=0;i--){for(var k=0;i>=0;){var zero=!0;for(j=0;j<len;j++)tmp[j]=0|naf[j][i],0!==tmp[j]&&(zero=!1);if(!zero)break;k++,i--}if(i>=0&&k++,acc=acc.dblp(k),i<0)break;for(j=0;j<len;j++){var z=tmp[j];0!==z&&(z>0?p=wnd[j][z-1>>1]:z<0&&(p=wnd[j][-z-1>>1].neg()),acc="affine"===p.type?acc.mixedAdd(p):acc.add(p))}}for(i=0;i<len;i++)wnd[i]=null;return jacobianResult?acc:acc.toP()},BaseCurve.BasePoint=BasePoint,BasePoint.prototype.eq=function eq(){throw new Error("Not implemented")},BasePoint.prototype.validate=function validate(){return this.curve.validate(this)},BaseCurve.prototype.decodePoint=function decodePoint(bytes,enc){bytes=utils_1$1.toArray(bytes,enc);var len=this.p.byteLength();if((4===bytes[0]||6===bytes[0]||7===bytes[0])&&bytes.length-1==2*len)return 6===bytes[0]?assert$1(bytes[bytes.length-1]%2==0):7===bytes[0]&&assert$1(bytes[bytes.length-1]%2==1),this.point(bytes.slice(1,1+len),bytes.slice(1+len,1+2*len));if((2===bytes[0]||3===bytes[0])&&bytes.length-1===len)return this.pointFromX(bytes.slice(1,1+len),3===bytes[0]);throw new Error("Unknown point format")},BasePoint.prototype.encodeCompressed=function encodeCompressed(enc){return this.encode(enc,!0)},BasePoint.prototype._encode=function _encode(compact){var len=this.curve.p.byteLength(),x=this.getX().toArray("be",len);return compact?[this.getY().isEven()?2:3].concat(x):[4].concat(x,this.getY().toArray("be",len))},BasePoint.prototype.encode=function encode(enc,compact){return utils_1$1.encode(this._encode(compact),enc)},BasePoint.prototype.precompute=function precompute(power){if(this.precomputed)return this;var precomputed={doubles:null,naf:null,beta:null};return precomputed.naf=this._getNAFPoints(8),precomputed.doubles=this._getDoubles(4,power),precomputed.beta=this._getBeta(),this.precomputed=precomputed,this},BasePoint.prototype._hasDoubles=function _hasDoubles(k){if(!this.precomputed)return!1;var doubles=this.precomputed.doubles;return!!doubles&&doubles.points.length>=Math.ceil((k.bitLength()+1)/doubles.step)},BasePoint.prototype._getDoubles=function _getDoubles(step,power){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var doubles=[this],acc=this,i=0;i<power;i+=step){for(var j=0;j<step;j++)acc=acc.dbl();doubles.push(acc)}return{step,points:doubles}},BasePoint.prototype._getNAFPoints=function _getNAFPoints(wnd){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var res=[this],max=(1<<wnd)-1,dbl=1===max?null:this.dbl(),i=1;i<max;i++)res[i]=res[i-1].add(dbl);return{wnd,points:res}},BasePoint.prototype._getBeta=function _getBeta(){return null},BasePoint.prototype.dblp=function dblp(k){for(var r=this,i=0;i<k;i++)r=r.dbl();return r};var inherits_browser=createCommonjsModule((function(module){"function"==typeof Object.create?module.exports=function inherits(ctor,superCtor){superCtor&&(ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}}))}:module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}}})),assert$2=utils_1$1.assert;function ShortCurve(conf){base.call(this,"short",conf),this.a=new(bn_default())(conf.a,16).toRed(this.red),this.b=new(bn_default())(conf.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(conf),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits_browser(ShortCurve,base);var short_1=ShortCurve;function Point(curve,x,y,isRed){base.BasePoint.call(this,curve,"affine"),null===x&&null===y?(this.x=null,this.y=null,this.inf=!0):(this.x=new(bn_default())(x,16),this.y=new(bn_default())(y,16),isRed&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function JPoint(curve,x,y,z){base.BasePoint.call(this,curve,"jacobian"),null===x&&null===y&&null===z?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(bn_default())(0)):(this.x=new(bn_default())(x,16),this.y=new(bn_default())(y,16),this.z=new(bn_default())(z,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}ShortCurve.prototype._getEndomorphism=function _getEndomorphism(conf){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var beta,lambda;if(conf.beta)beta=new(bn_default())(conf.beta,16).toRed(this.red);else{var betas=this._getEndoRoots(this.p);beta=(beta=betas[0].cmp(betas[1])<0?betas[0]:betas[1]).toRed(this.red)}if(conf.lambda)lambda=new(bn_default())(conf.lambda,16);else{var lambdas=this._getEndoRoots(this.n);0===this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta))?lambda=lambdas[0]:(lambda=lambdas[1],assert$2(0===this.g.mul(lambda).x.cmp(this.g.x.redMul(beta))))}return{beta,lambda,basis:conf.basis?conf.basis.map((function(vec){return{a:new(bn_default())(vec.a,16),b:new(bn_default())(vec.b,16)}})):this._getEndoBasis(lambda)}}},ShortCurve.prototype._getEndoRoots=function _getEndoRoots(num){var red=num===this.p?this.red:bn_default().mont(num),tinv=new(bn_default())(2).toRed(red).redInvm(),ntinv=tinv.redNeg(),s=new(bn_default())(3).toRed(red).redNeg().redSqrt().redMul(tinv);return[ntinv.redAdd(s).fromRed(),ntinv.redSub(s).fromRed()]},ShortCurve.prototype._getEndoBasis=function _getEndoBasis(lambda){for(var a0,b0,a1,b1,a2,b2,prevR,r,x,aprxSqrt=this.n.ushrn(Math.floor(this.n.bitLength()/2)),u=lambda,v=this.n.clone(),x1=new(bn_default())(1),y1=new(bn_default())(0),x2=new(bn_default())(0),y2=new(bn_default())(1),i=0;0!==u.cmpn(0);){var q=v.div(u);r=v.sub(q.mul(u)),x=x2.sub(q.mul(x1));var y=y2.sub(q.mul(y1));if(!a1&&r.cmp(aprxSqrt)<0)a0=prevR.neg(),b0=x1,a1=r.neg(),b1=x;else if(a1&&2==++i)break;prevR=r,v=u,u=r,x2=x1,x1=x,y2=y1,y1=y}a2=r.neg(),b2=x;var len1=a1.sqr().add(b1.sqr());return a2.sqr().add(b2.sqr()).cmp(len1)>=0&&(a2=a0,b2=b0),a1.negative&&(a1=a1.neg(),b1=b1.neg()),a2.negative&&(a2=a2.neg(),b2=b2.neg()),[{a:a1,b:b1},{a:a2,b:b2}]},ShortCurve.prototype._endoSplit=function _endoSplit(k){var basis=this.endo.basis,v1=basis[0],v2=basis[1],c1=v2.b.mul(k).divRound(this.n),c2=v1.b.neg().mul(k).divRound(this.n),p1=c1.mul(v1.a),p2=c2.mul(v2.a),q1=c1.mul(v1.b),q2=c2.mul(v2.b);return{k1:k.sub(p1).sub(p2),k2:q1.add(q2).neg()}},ShortCurve.prototype.pointFromX=function pointFromX(x,odd){(x=new(bn_default())(x,16)).red||(x=x.toRed(this.red));var y2=x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b),y=y2.redSqrt();if(0!==y.redSqr().redSub(y2).cmp(this.zero))throw new Error("invalid point");var isOdd=y.fromRed().isOdd();return(odd&&!isOdd||!odd&&isOdd)&&(y=y.redNeg()),this.point(x,y)},ShortCurve.prototype.validate=function validate(point){if(point.inf)return!0;var x=point.x,y=point.y,ax=this.a.redMul(x),rhs=x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);return 0===y.redSqr().redISub(rhs).cmpn(0)},ShortCurve.prototype._endoWnafMulAdd=function _endoWnafMulAdd(points,coeffs,jacobianResult){for(var npoints=this._endoWnafT1,ncoeffs=this._endoWnafT2,i=0;i<points.length;i++){var split=this._endoSplit(coeffs[i]),p=points[i],beta=p._getBeta();split.k1.negative&&(split.k1.ineg(),p=p.neg(!0)),split.k2.negative&&(split.k2.ineg(),beta=beta.neg(!0)),npoints[2*i]=p,npoints[2*i+1]=beta,ncoeffs[2*i]=split.k1,ncoeffs[2*i+1]=split.k2}for(var res=this._wnafMulAdd(1,npoints,ncoeffs,2*i,jacobianResult),j=0;j<2*i;j++)npoints[j]=null,ncoeffs[j]=null;return res},inherits_browser(Point,base.BasePoint),ShortCurve.prototype.point=function point(x,y,isRed){return new Point(this,x,y,isRed)},ShortCurve.prototype.pointFromJSON=function pointFromJSON(obj,red){return Point.fromJSON(this,obj,red)},Point.prototype._getBeta=function _getBeta(){if(this.curve.endo){var pre=this.precomputed;if(pre&&pre.beta)return pre.beta;var beta=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(pre){var curve=this.curve,endoMul=function(p){return curve.point(p.x.redMul(curve.endo.beta),p.y)};pre.beta=beta,beta.precomputed={beta:null,naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(endoMul)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(endoMul)}}}return beta}},Point.prototype.toJSON=function toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Point.fromJSON=function fromJSON(curve,obj,red){"string"==typeof obj&&(obj=JSON.parse(obj));var res=curve.point(obj[0],obj[1],red);if(!obj[2])return res;function obj2point(obj){return curve.point(obj[0],obj[1],red)}var pre=obj[2];return res.precomputed={beta:null,doubles:pre.doubles&&{step:pre.doubles.step,points:[res].concat(pre.doubles.points.map(obj2point))},naf:pre.naf&&{wnd:pre.naf.wnd,points:[res].concat(pre.naf.points.map(obj2point))}},res},Point.prototype.inspect=function inspect(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function isInfinity(){return this.inf},Point.prototype.add=function add(p){if(this.inf)return p;if(p.inf)return this;if(this.eq(p))return this.dbl();if(this.neg().eq(p))return this.curve.point(null,null);if(0===this.x.cmp(p.x))return this.curve.point(null,null);var c=this.y.redSub(p.y);0!==c.cmpn(0)&&(c=c.redMul(this.x.redSub(p.x).redInvm()));var nx=c.redSqr().redISub(this.x).redISub(p.x),ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny)},Point.prototype.dbl=function dbl(){if(this.inf)return this;var ys1=this.y.redAdd(this.y);if(0===ys1.cmpn(0))return this.curve.point(null,null);var a=this.curve.a,x2=this.x.redSqr(),dyinv=ys1.redInvm(),c=x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv),nx=c.redSqr().redISub(this.x.redAdd(this.x)),ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny)},Point.prototype.getX=function getX(){return this.x.fromRed()},Point.prototype.getY=function getY(){return this.y.fromRed()},Point.prototype.mul=function mul(k){return k=new(bn_default())(k,16),this.isInfinity()?this:this._hasDoubles(k)?this.curve._fixedNafMul(this,k):this.curve.endo?this.curve._endoWnafMulAdd([this],[k]):this.curve._wnafMul(this,k)},Point.prototype.mulAdd=function mulAdd(k1,p2,k2){var points=[this,p2],coeffs=[k1,k2];return this.curve.endo?this.curve._endoWnafMulAdd(points,coeffs):this.curve._wnafMulAdd(1,points,coeffs,2)},Point.prototype.jmulAdd=function jmulAdd(k1,p2,k2){var points=[this,p2],coeffs=[k1,k2];return this.curve.endo?this.curve._endoWnafMulAdd(points,coeffs,!0):this.curve._wnafMulAdd(1,points,coeffs,2,!0)},Point.prototype.eq=function eq(p){return this===p||this.inf===p.inf&&(this.inf||0===this.x.cmp(p.x)&&0===this.y.cmp(p.y))},Point.prototype.neg=function neg(_precompute){if(this.inf)return this;var res=this.curve.point(this.x,this.y.redNeg());if(_precompute&&this.precomputed){var pre=this.precomputed,negate=function(p){return p.neg()};res.precomputed={naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(negate)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(negate)}}}return res},Point.prototype.toJ=function toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},inherits_browser(JPoint,base.BasePoint),ShortCurve.prototype.jpoint=function jpoint(x,y,z){return new JPoint(this,x,y,z)},JPoint.prototype.toP=function toP(){if(this.isInfinity())return this.curve.point(null,null);var zinv=this.z.redInvm(),zinv2=zinv.redSqr(),ax=this.x.redMul(zinv2),ay=this.y.redMul(zinv2).redMul(zinv);return this.curve.point(ax,ay)},JPoint.prototype.neg=function neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JPoint.prototype.add=function add(p){if(this.isInfinity())return p;if(p.isInfinity())return this;var pz2=p.z.redSqr(),z2=this.z.redSqr(),u1=this.x.redMul(pz2),u2=p.x.redMul(z2),s1=this.y.redMul(pz2.redMul(p.z)),s2=p.y.redMul(z2.redMul(this.z)),h=u1.redSub(u2),r=s1.redSub(s2);if(0===h.cmpn(0))return 0!==r.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h2=h.redSqr(),h3=h2.redMul(h),v=u1.redMul(h2),nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v),ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3)),nz=this.z.redMul(p.z).redMul(h);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.mixedAdd=function mixedAdd(p){if(this.isInfinity())return p.toJ();if(p.isInfinity())return this;var z2=this.z.redSqr(),u1=this.x,u2=p.x.redMul(z2),s1=this.y,s2=p.y.redMul(z2).redMul(this.z),h=u1.redSub(u2),r=s1.redSub(s2);if(0===h.cmpn(0))return 0!==r.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h2=h.redSqr(),h3=h2.redMul(h),v=u1.redMul(h2),nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v),ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3)),nz=this.z.redMul(h);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.dblp=function dblp(pow){if(0===pow)return this;if(this.isInfinity())return this;if(!pow)return this.dbl();var i;if(this.curve.zeroA||this.curve.threeA){var r=this;for(i=0;i<pow;i++)r=r.dbl();return r}var a=this.curve.a,tinv=this.curve.tinv,jx=this.x,jy=this.y,jz=this.z,jz4=jz.redSqr().redSqr(),jyd=jy.redAdd(jy);for(i=0;i<pow;i++){var jx2=jx.redSqr(),jyd2=jyd.redSqr(),jyd4=jyd2.redSqr(),c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4)),t1=jx.redMul(jyd2),nx=c.redSqr().redISub(t1.redAdd(t1)),t2=t1.redISub(nx),dny=c.redMul(t2);dny=dny.redIAdd(dny).redISub(jyd4);var nz=jyd.redMul(jz);i+1<pow&&(jz4=jz4.redMul(jyd4)),jx=nx,jz=nz,jyd=dny}return this.curve.jpoint(jx,jyd.redMul(tinv),jz)},JPoint.prototype.dbl=function dbl(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JPoint.prototype._zeroDbl=function _zeroDbl(){var nx,ny,nz;if(this.zOne){var xx=this.x.redSqr(),yy=this.y.redSqr(),yyyy=yy.redSqr(),s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx),t=m.redSqr().redISub(s).redISub(s),yyyy8=yyyy.redIAdd(yyyy);yyyy8=(yyyy8=yyyy8.redIAdd(yyyy8)).redIAdd(yyyy8),nx=t,ny=m.redMul(s.redISub(t)).redISub(yyyy8),nz=this.y.redAdd(this.y)}else{var a=this.x.redSqr(),b=this.y.redSqr(),c=b.redSqr(),d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a),f=e.redSqr(),c8=c.redIAdd(c);c8=(c8=c8.redIAdd(c8)).redIAdd(c8),nx=f.redISub(d).redISub(d),ny=e.redMul(d.redISub(nx)).redISub(c8),nz=(nz=this.y.redMul(this.z)).redIAdd(nz)}return this.curve.jpoint(nx,ny,nz)},JPoint.prototype._threeDbl=function _threeDbl(){var nx,ny,nz;if(this.zOne){var xx=this.x.redSqr(),yy=this.y.redSqr(),yyyy=yy.redSqr(),s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a),t=m.redSqr().redISub(s).redISub(s);nx=t;var yyyy8=yyyy.redIAdd(yyyy);yyyy8=(yyyy8=yyyy8.redIAdd(yyyy8)).redIAdd(yyyy8),ny=m.redMul(s.redISub(t)).redISub(yyyy8),nz=this.y.redAdd(this.y)}else{var delta=this.z.redSqr(),gamma=this.y.redSqr(),beta=this.x.redMul(gamma),alpha=this.x.redSub(delta).redMul(this.x.redAdd(delta));alpha=alpha.redAdd(alpha).redIAdd(alpha);var beta4=beta.redIAdd(beta),beta8=(beta4=beta4.redIAdd(beta4)).redAdd(beta4);nx=alpha.redSqr().redISub(beta8),nz=this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);var ggamma8=gamma.redSqr();ggamma8=(ggamma8=(ggamma8=ggamma8.redIAdd(ggamma8)).redIAdd(ggamma8)).redIAdd(ggamma8),ny=alpha.redMul(beta4.redISub(nx)).redISub(ggamma8)}return this.curve.jpoint(nx,ny,nz)},JPoint.prototype._dbl=function _dbl(){var a=this.curve.a,jx=this.x,jy=this.y,jz=this.z,jz4=jz.redSqr().redSqr(),jx2=jx.redSqr(),jy2=jy.redSqr(),c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4)),jxd4=jx.redAdd(jx),t1=(jxd4=jxd4.redIAdd(jxd4)).redMul(jy2),nx=c.redSqr().redISub(t1.redAdd(t1)),t2=t1.redISub(nx),jyd8=jy2.redSqr();jyd8=(jyd8=(jyd8=jyd8.redIAdd(jyd8)).redIAdd(jyd8)).redIAdd(jyd8);var ny=c.redMul(t2).redISub(jyd8),nz=jy.redAdd(jy).redMul(jz);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.trpl=function trpl(){if(!this.curve.zeroA)return this.dbl().add(this);var xx=this.x.redSqr(),yy=this.y.redSqr(),zz=this.z.redSqr(),yyyy=yy.redSqr(),m=xx.redAdd(xx).redIAdd(xx),mm=m.redSqr(),e=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy),ee=(e=(e=(e=e.redIAdd(e)).redAdd(e).redIAdd(e)).redISub(mm)).redSqr(),t=yyyy.redIAdd(yyyy);t=(t=(t=t.redIAdd(t)).redIAdd(t)).redIAdd(t);var u=m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t),yyu4=yy.redMul(u);yyu4=(yyu4=yyu4.redIAdd(yyu4)).redIAdd(yyu4);var nx=this.x.redMul(ee).redISub(yyu4);nx=(nx=nx.redIAdd(nx)).redIAdd(nx);var ny=this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));ny=(ny=(ny=ny.redIAdd(ny)).redIAdd(ny)).redIAdd(ny);var nz=this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.mul=function mul(k,kbase){return k=new(bn_default())(k,kbase),this.curve._wnafMul(this,k)},JPoint.prototype.eq=function eq(p){if("affine"===p.type)return this.eq(p.toJ());if(this===p)return!0;var z2=this.z.redSqr(),pz2=p.z.redSqr();if(0!==this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0))return!1;var z3=z2.redMul(this.z),pz3=pz2.redMul(p.z);return 0===this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0)},JPoint.prototype.eqXToP=function eqXToP(x){var zs=this.z.redSqr(),rx=x.toRed(this.curve.red).redMul(zs);if(0===this.x.cmp(rx))return!0;for(var xc=x.clone(),t=this.curve.redN.redMul(zs);;){if(xc.iadd(this.curve.n),xc.cmp(this.curve.p)>=0)return!1;if(rx.redIAdd(t),0===this.x.cmp(rx))return!0}},JPoint.prototype.inspect=function inspect(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},JPoint.prototype.isInfinity=function isInfinity(){return 0===this.z.cmpn(0)};var curve_1=createCommonjsModule((function(module,exports){var curve=exports;curve.base=base,curve.short=short_1,curve.mont=null,curve.edwards=null})),curves_1=createCommonjsModule((function(module,exports){var pre,curves=exports,assert=utils_1$1.assert;function PresetCurve(options){"short"===options.type?this.curve=new curve_1.short(options):"edwards"===options.type?this.curve=new curve_1.edwards(options):this.curve=new curve_1.mont(options),this.g=this.curve.g,this.n=this.curve.n,this.hash=options.hash,assert(this.g.validate(),"Invalid curve"),assert(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function defineCurve(name,options){Object.defineProperty(curves,name,{configurable:!0,enumerable:!0,get:function(){var curve=new PresetCurve(options);return Object.defineProperty(curves,name,{configurable:!0,enumerable:!0,value:curve}),curve}})}curves.PresetCurve=PresetCurve,defineCurve("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash_default().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),defineCurve("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash_default().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),defineCurve("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash_default().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),defineCurve("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash_default().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),defineCurve("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash_default().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),defineCurve("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash_default().sha256,gRed:!1,g:["9"]}),defineCurve("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash_default().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{pre=null.crash()}catch(e){pre=void 0}defineCurve("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash_default().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",pre]})}));function HmacDRBG(options){if(!(this instanceof HmacDRBG))return new HmacDRBG(options);this.hash=options.hash,this.predResist=!!options.predResist,this.outLen=this.hash.outSize,this.minEntropy=options.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var entropy=utils_1.toArray(options.entropy,options.entropyEnc||"hex"),nonce=utils_1.toArray(options.nonce,options.nonceEnc||"hex"),pers=utils_1.toArray(options.pers,options.persEnc||"hex");minimalisticAssert(entropy.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(entropy,nonce,pers)}var hmacDrbg=HmacDRBG;HmacDRBG.prototype._init=function init(entropy,nonce,pers){var seed=entropy.concat(nonce).concat(pers);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(seed),this._reseed=1,this.reseedInterval=281474976710656},HmacDRBG.prototype._hmac=function hmac(){return new(hash_default().hmac)(this.hash,this.K)},HmacDRBG.prototype._update=function update(seed){var kmac=this._hmac().update(this.V).update([0]);seed&&(kmac=kmac.update(seed)),this.K=kmac.digest(),this.V=this._hmac().update(this.V).digest(),seed&&(this.K=this._hmac().update(this.V).update([1]).update(seed).digest(),this.V=this._hmac().update(this.V).digest())},HmacDRBG.prototype.reseed=function reseed(entropy,entropyEnc,add,addEnc){"string"!=typeof entropyEnc&&(addEnc=add,add=entropyEnc,entropyEnc=null),entropy=utils_1.toArray(entropy,entropyEnc),add=utils_1.toArray(add,addEnc),minimalisticAssert(entropy.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(entropy.concat(add||[])),this._reseed=1},HmacDRBG.prototype.generate=function generate(len,enc,add,addEnc){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof enc&&(addEnc=add,add=enc,enc=null),add&&(add=utils_1.toArray(add,addEnc||"hex"),this._update(add));for(var temp=[];temp.length<len;)this.V=this._hmac().update(this.V).digest(),temp=temp.concat(this.V);var res=temp.slice(0,len);return this._update(add),this._reseed++,utils_1.encode(res,enc)};var assert$3=utils_1$1.assert;function KeyPair(ec,options){this.ec=ec,this.priv=null,this.pub=null,options.priv&&this._importPrivate(options.priv,options.privEnc),options.pub&&this._importPublic(options.pub,options.pubEnc)}var key=KeyPair;KeyPair.fromPublic=function fromPublic(ec,pub,enc){return pub instanceof KeyPair?pub:new KeyPair(ec,{pub,pubEnc:enc})},KeyPair.fromPrivate=function fromPrivate(ec,priv,enc){return priv instanceof KeyPair?priv:new KeyPair(ec,{priv,privEnc:enc})},KeyPair.prototype.validate=function validate(){var pub=this.getPublic();return pub.isInfinity()?{result:!1,reason:"Invalid public key"}:pub.validate()?pub.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},KeyPair.prototype.getPublic=function getPublic(compact,enc){return"string"==typeof compact&&(enc=compact,compact=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),enc?this.pub.encode(enc,compact):this.pub},KeyPair.prototype.getPrivate=function getPrivate(enc){return"hex"===enc?this.priv.toString(16,2):this.priv},KeyPair.prototype._importPrivate=function _importPrivate(key,enc){this.priv=new(bn_default())(key,enc||16),this.priv=this.priv.umod(this.ec.curve.n)},KeyPair.prototype._importPublic=function _importPublic(key,enc){if(key.x||key.y)return"mont"===this.ec.curve.type?assert$3(key.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||assert$3(key.x&&key.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(key.x,key.y));this.pub=this.ec.curve.decodePoint(key,enc)},KeyPair.prototype.derive=function derive(pub){return pub.validate()||assert$3(pub.validate(),"public point not validated"),pub.mul(this.priv).getX()},KeyPair.prototype.sign=function sign(msg,enc,options){return this.ec.sign(msg,this,enc,options)},KeyPair.prototype.verify=function verify(msg,signature){return this.ec.verify(msg,signature,this)},KeyPair.prototype.inspect=function inspect(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var assert$4=utils_1$1.assert;function Signature(options,enc){if(options instanceof Signature)return options;this._importDER(options,enc)||(assert$4(options.r&&options.s,"Signature without r or s"),this.r=new(bn_default())(options.r,16),this.s=new(bn_default())(options.s,16),void 0===options.recoveryParam?this.recoveryParam=null:this.recoveryParam=options.recoveryParam)}var signature=Signature;function Position(){this.place=0}function getLength(buf,p){var initial=buf[p.place++];if(!(128&initial))return initial;var octetLen=15&initial;if(0===octetLen||octetLen>4)return!1;for(var val=0,i=0,off=p.place;i<octetLen;i++,off++)val<<=8,val|=buf[off],val>>>=0;return!(val<=127)&&(p.place=off,val)}function rmPadding(buf){for(var i=0,len=buf.length-1;!buf[i]&&!(128&buf[i+1])&&i<len;)i++;return 0===i?buf:buf.slice(i)}function constructLength(arr,len){if(len<128)arr.push(len);else{var octets=1+(Math.log(len)/Math.LN2>>>3);for(arr.push(128|octets);--octets;)arr.push(len>>>(octets<<3)&255);arr.push(len)}}Signature.prototype._importDER=function _importDER(data,enc){data=utils_1$1.toArray(data,enc);var p=new Position;if(48!==data[p.place++])return!1;var len=getLength(data,p);if(!1===len)return!1;if(len+p.place!==data.length)return!1;if(2!==data[p.place++])return!1;var rlen=getLength(data,p);if(!1===rlen)return!1;var r=data.slice(p.place,rlen+p.place);if(p.place+=rlen,2!==data[p.place++])return!1;var slen=getLength(data,p);if(!1===slen)return!1;if(data.length!==slen+p.place)return!1;var s=data.slice(p.place,slen+p.place);if(0===r[0]){if(!(128&r[1]))return!1;r=r.slice(1)}if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}return this.r=new(bn_default())(r),this.s=new(bn_default())(s),this.recoveryParam=null,!0},Signature.prototype.toDER=function toDER(enc){var r=this.r.toArray(),s=this.s.toArray();for(128&r[0]&&(r=[0].concat(r)),128&s[0]&&(s=[0].concat(s)),r=rmPadding(r),s=rmPadding(s);!(s[0]||128&s[1]);)s=s.slice(1);var arr=[2];constructLength(arr,r.length),(arr=arr.concat(r)).push(2),constructLength(arr,s.length);var backHalf=arr.concat(s),res=[48];return constructLength(res,backHalf.length),res=res.concat(backHalf),utils_1$1.encode(res,enc)};var rand=function(){throw new Error("unsupported")},assert$5=utils_1$1.assert;function EC(options){if(!(this instanceof EC))return new EC(options);"string"==typeof options&&(assert$5(Object.prototype.hasOwnProperty.call(curves_1,options),"Unknown curve "+options),options=curves_1[options]),options instanceof curves_1.PresetCurve&&(options={curve:options}),this.curve=options.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=options.curve.g,this.g.precompute(options.curve.n.bitLength()+1),this.hash=options.hash||options.curve.hash}var ec=EC;EC.prototype.keyPair=function keyPair(options){return new key(this,options)},EC.prototype.keyFromPrivate=function keyFromPrivate(priv,enc){return key.fromPrivate(this,priv,enc)},EC.prototype.keyFromPublic=function keyFromPublic(pub,enc){return key.fromPublic(this,pub,enc)},EC.prototype.genKeyPair=function genKeyPair(options){options||(options={});for(var drbg=new hmacDrbg({hash:this.hash,pers:options.pers,persEnc:options.persEnc||"utf8",entropy:options.entropy||rand(this.hash.hmacStrength),entropyEnc:options.entropy&&options.entropyEnc||"utf8",nonce:this.n.toArray()}),bytes=this.n.byteLength(),ns2=this.n.sub(new(bn_default())(2));;){var priv=new(bn_default())(drbg.generate(bytes));if(!(priv.cmp(ns2)>0))return priv.iaddn(1),this.keyFromPrivate(priv)}},EC.prototype._truncateToN=function _truncateToN(msg,truncOnly){var delta=8*msg.byteLength()-this.n.bitLength();return delta>0&&(msg=msg.ushrn(delta)),!truncOnly&&msg.cmp(this.n)>=0?msg.sub(this.n):msg},EC.prototype.sign=function sign(msg,key,enc,options){"object"==typeof enc&&(options=enc,enc=null),options||(options={}),key=this.keyFromPrivate(key,enc),msg=this._truncateToN(new(bn_default())(msg,16));for(var bytes=this.n.byteLength(),bkey=key.getPrivate().toArray("be",bytes),nonce=msg.toArray("be",bytes),drbg=new hmacDrbg({hash:this.hash,entropy:bkey,nonce,pers:options.pers,persEnc:options.persEnc||"utf8"}),ns1=this.n.sub(new(bn_default())(1)),iter=0;;iter++){var k=options.k?options.k(iter):new(bn_default())(drbg.generate(this.n.byteLength()));if(!((k=this._truncateToN(k,!0)).cmpn(1)<=0||k.cmp(ns1)>=0)){var kp=this.g.mul(k);if(!kp.isInfinity()){var kpX=kp.getX(),r=kpX.umod(this.n);if(0!==r.cmpn(0)){var s=k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));if(0!==(s=s.umod(this.n)).cmpn(0)){var recoveryParam=(kp.getY().isOdd()?1:0)|(0!==kpX.cmp(r)?2:0);return options.canonical&&s.cmp(this.nh)>0&&(s=this.n.sub(s),recoveryParam^=1),new signature({r,s,recoveryParam})}}}}}},EC.prototype.verify=function verify(msg,signature$1,key,enc){msg=this._truncateToN(new(bn_default())(msg,16)),key=this.keyFromPublic(key,enc);var r=(signature$1=new signature(signature$1,"hex")).r,s=signature$1.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var p,sinv=s.invm(this.n),u1=sinv.mul(msg).umod(this.n),u2=sinv.mul(r).umod(this.n);return this.curve._maxwellTrick?!(p=this.g.jmulAdd(u1,key.getPublic(),u2)).isInfinity()&&p.eqXToP(r):!(p=this.g.mulAdd(u1,key.getPublic(),u2)).isInfinity()&&0===p.getX().umod(this.n).cmp(r)},EC.prototype.recoverPubKey=function(msg,signature$1,j,enc){assert$5((3&j)===j,"The recovery param is more than two bits"),signature$1=new signature(signature$1,enc);var n=this.n,e=new(bn_default())(msg),r=signature$1.r,s=signature$1.s,isYOdd=1&j,isSecondKey=j>>1;if(r.cmp(this.curve.p.umod(this.curve.n))>=0&&isSecondKey)throw new Error("Unable to find sencond key candinate");r=isSecondKey?this.curve.pointFromX(r.add(this.curve.n),isYOdd):this.curve.pointFromX(r,isYOdd);var rInv=signature$1.r.invm(n),s1=n.sub(e).mul(rInv).umod(n),s2=s.mul(rInv).umod(n);return this.g.mulAdd(s1,r,s2)},EC.prototype.getKeyRecoveryParam=function(e,signature$1,Q,enc){if(null!==(signature$1=new signature(signature$1,enc)).recoveryParam)return signature$1.recoveryParam;for(var i=0;i<4;i++){var Qprime;try{Qprime=this.recoverPubKey(e,signature$1,i)}catch(e){continue}if(Qprime.eq(Q))return i}throw new Error("Unable to find valid recovery factor")};var EC$1=createCommonjsModule((function(module,exports){var elliptic=exports;elliptic.version="6.5.4",elliptic.utils=utils_1$1,elliptic.rand=function(){throw new Error("unsupported")},elliptic.curve=curve_1,elliptic.curves=curves_1,elliptic.ec=ec,elliptic.eddsa=null})).ec;const lib_esm_logger=new logger_lib_esm.Yd("signing-key/5.6.2");let _curve=null;function getCurve(){return _curve||(_curve=new EC$1("secp256k1")),_curve}class SigningKey{constructor(privateKey){(0,properties_lib_esm.zG)(this,"curve","secp256k1"),(0,properties_lib_esm.zG)(this,"privateKey",(0,bytes_lib_esm.Dv)(privateKey)),32!==(0,bytes_lib_esm.E1)(this.privateKey)&&lib_esm_logger.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const keyPair=getCurve().keyFromPrivate((0,bytes_lib_esm.lE)(this.privateKey));(0,properties_lib_esm.zG)(this,"publicKey","0x"+keyPair.getPublic(!1,"hex")),(0,properties_lib_esm.zG)(this,"compressedPublicKey","0x"+keyPair.getPublic(!0,"hex")),(0,properties_lib_esm.zG)(this,"_isSigningKey",!0)}_addPoint(other){const p0=getCurve().keyFromPublic((0,bytes_lib_esm.lE)(this.publicKey)),p1=getCurve().keyFromPublic((0,bytes_lib_esm.lE)(other));return"0x"+p0.pub.add(p1.pub).encodeCompressed("hex")}signDigest(digest){const keyPair=getCurve().keyFromPrivate((0,bytes_lib_esm.lE)(this.privateKey)),digestBytes=(0,bytes_lib_esm.lE)(digest);32!==digestBytes.length&&lib_esm_logger.throwArgumentError("bad digest length","digest",digest);const signature=keyPair.sign(digestBytes,{canonical:!0});return(0,bytes_lib_esm.N)({recoveryParam:signature.recoveryParam,r:(0,bytes_lib_esm.$m)("0x"+signature.r.toString(16),32),s:(0,bytes_lib_esm.$m)("0x"+signature.s.toString(16),32)})}computeSharedSecret(otherKey){const keyPair=getCurve().keyFromPrivate((0,bytes_lib_esm.lE)(this.privateKey)),otherKeyPair=getCurve().keyFromPublic((0,bytes_lib_esm.lE)(computePublicKey(otherKey)));return(0,bytes_lib_esm.$m)("0x"+keyPair.derive(otherKeyPair.getPublic()).toString(16),32)}static isSigningKey(value){return!(!value||!value._isSigningKey)}}function computePublicKey(key,compressed){const bytes=(0,bytes_lib_esm.lE)(key);if(32===bytes.length){const signingKey=new SigningKey(bytes);return compressed?"0x"+getCurve().keyFromPrivate(bytes).getPublic(!0,"hex"):signingKey.publicKey}return 33===bytes.length?compressed?(0,bytes_lib_esm.Dv)(bytes):"0x"+getCurve().keyFromPublic(bytes).getPublic(!1,"hex"):65===bytes.length?compressed?"0x"+getCurve().keyFromPublic(bytes).getPublic(!0,"hex"):(0,bytes_lib_esm.Dv)(bytes):lib_esm_logger.throwArgumentError("invalid public or private key","key","[REDACTED]")}const transactions_lib_esm_logger=new logger_lib_esm.Yd("transactions/5.6.2");var TransactionTypes;function handleAddress(value){return"0x"===value?null:(0,lib_esm.Kn)(value)}function handleNumber(value){return"0x"===value?bignumbers._Y:bignumber.O$.from(value)}!function(TransactionTypes){TransactionTypes[TransactionTypes.legacy=0]="legacy",TransactionTypes[TransactionTypes.eip2930=1]="eip2930",TransactionTypes[TransactionTypes.eip1559=2]="eip1559"}(TransactionTypes||(TransactionTypes={}));const transactionFields=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],allowedTransactionKeys={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function computeAddress(key){const publicKey=computePublicKey(key);return(0,lib_esm.Kn)((0,bytes_lib_esm.p3)((0,keccak256_lib_esm.w)((0,bytes_lib_esm.p3)(publicKey,1)),12))}function recoverAddress(digest,signature){return computeAddress(function recoverPublicKey(digest,signature){const sig=(0,bytes_lib_esm.N)(signature),rs={r:(0,bytes_lib_esm.lE)(sig.r),s:(0,bytes_lib_esm.lE)(sig.s)};return"0x"+getCurve().recoverPubKey((0,bytes_lib_esm.lE)(digest),rs,sig.recoveryParam).encode("hex",!1)}((0,bytes_lib_esm.lE)(digest),signature))}function formatNumber(value,name){const result=(0,bytes_lib_esm.G1)(bignumber.O$.from(value).toHexString());return result.length>32&&transactions_lib_esm_logger.throwArgumentError("invalid length for "+name,"transaction:"+name,value),result}function accessSetify(addr,storageKeys){return{address:(0,lib_esm.Kn)(addr),storageKeys:(storageKeys||[]).map(((storageKey,index)=>(32!==(0,bytes_lib_esm.E1)(storageKey)&&transactions_lib_esm_logger.throwArgumentError("invalid access list storageKey",`accessList[${addr}:${index}]`,storageKey),storageKey.toLowerCase())))}}function accessListify(value){if(Array.isArray(value))return value.map(((set,index)=>Array.isArray(set)?(set.length>2&&transactions_lib_esm_logger.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${index}]`,set),accessSetify(set[0],set[1])):accessSetify(set.address,set.storageKeys)));const result=Object.keys(value).map((addr=>{const storageKeys=value[addr].reduce(((accum,storageKey)=>(accum[storageKey]=!0,accum)),{});return accessSetify(addr,Object.keys(storageKeys).sort())}));return result.sort(((a,b)=>a.address.localeCompare(b.address))),result}function formatAccessList(value){return accessListify(value).map((set=>[set.address,set.storageKeys]))}function _serializeEip1559(transaction,signature){if(null!=transaction.gasPrice){const gasPrice=bignumber.O$.from(transaction.gasPrice),maxFeePerGas=bignumber.O$.from(transaction.maxFeePerGas||0);gasPrice.eq(maxFeePerGas)||transactions_lib_esm_logger.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice,maxFeePerGas})}const fields=[formatNumber(transaction.chainId||0,"chainId"),formatNumber(transaction.nonce||0,"nonce"),formatNumber(transaction.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(transaction.maxFeePerGas||0,"maxFeePerGas"),formatNumber(transaction.gasLimit||0,"gasLimit"),null!=transaction.to?(0,lib_esm.Kn)(transaction.to):"0x",formatNumber(transaction.value||0,"value"),transaction.data||"0x",formatAccessList(transaction.accessList||[])];if(signature){const sig=(0,bytes_lib_esm.N)(signature);fields.push(formatNumber(sig.recoveryParam,"recoveryParam")),fields.push((0,bytes_lib_esm.G1)(sig.r)),fields.push((0,bytes_lib_esm.G1)(sig.s))}return(0,bytes_lib_esm.xs)(["0x02",encode(fields)])}function _serializeEip2930(transaction,signature){const fields=[formatNumber(transaction.chainId||0,"chainId"),formatNumber(transaction.nonce||0,"nonce"),formatNumber(transaction.gasPrice||0,"gasPrice"),formatNumber(transaction.gasLimit||0,"gasLimit"),null!=transaction.to?(0,lib_esm.Kn)(transaction.to):"0x",formatNumber(transaction.value||0,"value"),transaction.data||"0x",formatAccessList(transaction.accessList||[])];if(signature){const sig=(0,bytes_lib_esm.N)(signature);fields.push(formatNumber(sig.recoveryParam,"recoveryParam")),fields.push((0,bytes_lib_esm.G1)(sig.r)),fields.push((0,bytes_lib_esm.G1)(sig.s))}return(0,bytes_lib_esm.xs)(["0x01",encode(fields)])}function serialize(transaction,signature){if(null==transaction.type||0===transaction.type)return null!=transaction.accessList&&transactions_lib_esm_logger.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",transaction),function _serialize(transaction,signature){(0,properties_lib_esm.uj)(transaction,allowedTransactionKeys);const raw=[];transactionFields.forEach((function(fieldInfo){let value=transaction[fieldInfo.name]||[];const options={};fieldInfo.numeric&&(options.hexPad="left"),value=(0,bytes_lib_esm.lE)((0,bytes_lib_esm.Dv)(value,options)),fieldInfo.length&&value.length!==fieldInfo.length&&value.length>0&&transactions_lib_esm_logger.throwArgumentError("invalid length for "+fieldInfo.name,"transaction:"+fieldInfo.name,value),fieldInfo.maxLength&&(value=(0,bytes_lib_esm.G1)(value),value.length>fieldInfo.maxLength&&transactions_lib_esm_logger.throwArgumentError("invalid length for "+fieldInfo.name,"transaction:"+fieldInfo.name,value)),raw.push((0,bytes_lib_esm.Dv)(value))}));let chainId=0;if(null!=transaction.chainId?(chainId=transaction.chainId,"number"!=typeof chainId&&transactions_lib_esm_logger.throwArgumentError("invalid transaction.chainId","transaction",transaction)):signature&&!(0,bytes_lib_esm.Zq)(signature)&&signature.v>28&&(chainId=Math.floor((signature.v-35)/2)),0!==chainId&&(raw.push((0,bytes_lib_esm.Dv)(chainId)),raw.push("0x"),raw.push("0x")),!signature)return encode(raw);const sig=(0,bytes_lib_esm.N)(signature);let v=27+sig.recoveryParam;return 0!==chainId?(raw.pop(),raw.pop(),raw.pop(),v+=2*chainId+8,sig.v>28&&sig.v!==v&&transactions_lib_esm_logger.throwArgumentError("transaction.chainId/signature.v mismatch","signature",signature)):sig.v!==v&&transactions_lib_esm_logger.throwArgumentError("transaction.chainId/signature.v mismatch","signature",signature),raw.push((0,bytes_lib_esm.Dv)(v)),raw.push((0,bytes_lib_esm.G1)((0,bytes_lib_esm.lE)(sig.r))),raw.push((0,bytes_lib_esm.G1)((0,bytes_lib_esm.lE)(sig.s))),encode(raw)}(transaction,signature);switch(transaction.type){case 1:return _serializeEip2930(transaction,signature);case 2:return _serializeEip1559(transaction,signature)}return transactions_lib_esm_logger.throwError(`unsupported transaction type: ${transaction.type}`,logger_lib_esm.Yd.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:transaction.type})}function _parseEipSignature(tx,fields,serialize){try{const recid=handleNumber(fields[0]).toNumber();if(0!==recid&&1!==recid)throw new Error("bad recid");tx.v=recid}catch(error){transactions_lib_esm_logger.throwArgumentError("invalid v for transaction type: 1","v",fields[0])}tx.r=(0,bytes_lib_esm.$m)(fields[1],32),tx.s=(0,bytes_lib_esm.$m)(fields[2],32);try{const digest=(0,keccak256_lib_esm.w)(serialize(tx));tx.from=recoverAddress(digest,{r:tx.r,s:tx.s,recoveryParam:tx.v})}catch(error){}}function parse(rawTransaction){const payload=(0,bytes_lib_esm.lE)(rawTransaction);if(payload[0]>127)return function _parse(rawTransaction){const transaction=decode(rawTransaction);9!==transaction.length&&6!==transaction.length&&transactions_lib_esm_logger.throwArgumentError("invalid raw transaction","rawTransaction",rawTransaction);const tx={nonce:handleNumber(transaction[0]).toNumber(),gasPrice:handleNumber(transaction[1]),gasLimit:handleNumber(transaction[2]),to:handleAddress(transaction[3]),value:handleNumber(transaction[4]),data:transaction[5],chainId:0};if(6===transaction.length)return tx;try{tx.v=bignumber.O$.from(transaction[6]).toNumber()}catch(error){return tx}if(tx.r=(0,bytes_lib_esm.$m)(transaction[7],32),tx.s=(0,bytes_lib_esm.$m)(transaction[8],32),bignumber.O$.from(tx.r).isZero()&&bignumber.O$.from(tx.s).isZero())tx.chainId=tx.v,tx.v=0;else{tx.chainId=Math.floor((tx.v-35)/2),tx.chainId<0&&(tx.chainId=0);let recoveryParam=tx.v-27;const raw=transaction.slice(0,6);0!==tx.chainId&&(raw.push((0,bytes_lib_esm.Dv)(tx.chainId)),raw.push("0x"),raw.push("0x"),recoveryParam-=2*tx.chainId+8);const digest=(0,keccak256_lib_esm.w)(encode(raw));try{tx.from=recoverAddress(digest,{r:(0,bytes_lib_esm.Dv)(tx.r),s:(0,bytes_lib_esm.Dv)(tx.s),recoveryParam})}catch(error){}tx.hash=(0,keccak256_lib_esm.w)(rawTransaction)}return tx.type=null,tx}(payload);switch(payload[0]){case 1:return function _parseEip2930(payload){const transaction=decode(payload.slice(1));8!==transaction.length&&11!==transaction.length&&transactions_lib_esm_logger.throwArgumentError("invalid component count for transaction type: 1","payload",(0,bytes_lib_esm.Dv)(payload));const tx={type:1,chainId:handleNumber(transaction[0]).toNumber(),nonce:handleNumber(transaction[1]).toNumber(),gasPrice:handleNumber(transaction[2]),gasLimit:handleNumber(transaction[3]),to:handleAddress(transaction[4]),value:handleNumber(transaction[5]),data:transaction[6],accessList:accessListify(transaction[7])};return 8===transaction.length||(tx.hash=(0,keccak256_lib_esm.w)(payload),_parseEipSignature(tx,transaction.slice(8),_serializeEip2930)),tx}(payload);case 2:return function _parseEip1559(payload){const transaction=decode(payload.slice(1));9!==transaction.length&&12!==transaction.length&&transactions_lib_esm_logger.throwArgumentError("invalid component count for transaction type: 2","payload",(0,bytes_lib_esm.Dv)(payload));const maxPriorityFeePerGas=handleNumber(transaction[2]),maxFeePerGas=handleNumber(transaction[3]),tx={type:2,chainId:handleNumber(transaction[0]).toNumber(),nonce:handleNumber(transaction[1]).toNumber(),maxPriorityFeePerGas,maxFeePerGas,gasPrice:null,gasLimit:handleNumber(transaction[4]),to:handleAddress(transaction[5]),value:handleNumber(transaction[6]),data:transaction[7],accessList:accessListify(transaction[8])};return 9===transaction.length||(tx.hash=(0,keccak256_lib_esm.w)(payload),_parseEipSignature(tx,transaction.slice(9),_serializeEip1559)),tx}(payload)}return transactions_lib_esm_logger.throwError(`unsupported transaction type: ${payload[0]}`,logger_lib_esm.Yd.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:payload[0]})}},"./node_modules/.pnpm/@metamask+obs-store@7.0.0/node_modules/@metamask/obs-store/dist/ComposedStore.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComposedStore=void 0;const ObservableStore_1=__webpack_require__("./node_modules/.pnpm/@metamask+obs-store@7.0.0/node_modules/@metamask/obs-store/dist/ObservableStore.js");class ComposedStore extends ObservableStore_1.ObservableStore{constructor(children){super({}),this._children=children||{},Object.keys(this._children).forEach((childKey=>{const child=this._children[childKey];this._addChild(childKey,child)}))}_addChild(childKey,child){const updateFromChild=childValue=>{const state=this.getState();state[childKey]=childValue,this.putState(state)};child.subscribe(updateFromChild),updateFromChild(child.getState())}}exports.ComposedStore=ComposedStore},"./node_modules/.pnpm/@metamask+obs-store@7.0.0/node_modules/@metamask/obs-store/dist/MergedStore.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MergedStore=void 0;const ObservableStore_1=__webpack_require__("./node_modules/.pnpm/@metamask+obs-store@7.0.0/node_modules/@metamask/obs-store/dist/ObservableStore.js");class MergedStore extends ObservableStore_1.ObservableStore{constructor(children=[]){super({}),this._children=children,children.forEach((child=>this._addChild(child))),this._updateWholeState()}_addChild(child){child.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const childStates=this._children.map((child=>child.getState())),state=Object.assign({},...childStates);this.putState(state)}}exports.MergedStore=MergedStore},"./node_modules/.pnpm/@metamask+obs-store@7.0.0/node_modules/@metamask/obs-store/dist/ObservableStore.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ObservableStore=void 0;const safe_event_emitter_1=__importDefault(__webpack_require__("./node_modules/.pnpm/@metamask+safe-event-emitter@2.0.0/node_modules/@metamask/safe-event-emitter/index.js"));class ObservableStore extends safe_event_emitter_1.default{constructor(initState){super(),this._state=initState||{}}getState(){return this._getState()}putState(newState){this._putState(newState),this.emit("update",newState)}updateState(partialState){if(partialState&&"object"==typeof partialState){const state=this.getState();this.putState(Object.assign(Object.assign({},state),partialState))}else this.putState(partialState)}subscribe(handler){this.on("update",handler)}unsubscribe(handler){this.removeListener("update",handler)}_getState(){return this._state}_putState(newState){this._state=newState}}exports.ObservableStore=ObservableStore},"./node_modules/.pnpm/@metamask+obs-store@7.0.0/node_modules/@metamask/obs-store/dist/asStream.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.storeAsStream=void 0;const stream_1=__webpack_require__("./node_modules/.pnpm/stream-browserify@3.0.0/node_modules/stream-browserify/index.js");class ObservableStoreStream extends stream_1.Duplex{constructor(obsStore){super({objectMode:!0}),this.resume(),this.handler=state=>this.push(state),this.obsStore=obsStore,this.obsStore.subscribe(this.handler)}pipe(dest,options){const result=super.pipe(dest,options);return dest.write(this.obsStore.getState()),result}_write(chunk,_encoding,callback){this.obsStore.putState(chunk),callback()}_read(_size){}_destroy(err,callback){this.obsStore.unsubscribe(this.handler),super._destroy(err,callback)}}exports.storeAsStream=function storeAsStream(obsStore){return new ObservableStoreStream(obsStore)}},"./node_modules/.pnpm/@metamask+obs-store@7.0.0/node_modules/@metamask/obs-store/dist/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/.pnpm/@metamask+obs-store@7.0.0/node_modules/@metamask/obs-store/dist/asStream.js"),exports),__exportStar(__webpack_require__("./node_modules/.pnpm/@metamask+obs-store@7.0.0/node_modules/@metamask/obs-store/dist/ComposedStore.js"),exports),__exportStar(__webpack_require__("./node_modules/.pnpm/@metamask+obs-store@7.0.0/node_modules/@metamask/obs-store/dist/MergedStore.js"),exports),__exportStar(__webpack_require__("./node_modules/.pnpm/@metamask+obs-store@7.0.0/node_modules/@metamask/obs-store/dist/ObservableStore.js"),exports),__exportStar(__webpack_require__("./node_modules/.pnpm/@metamask+obs-store@7.0.0/node_modules/@metamask/obs-store/dist/transform.js"),exports)},"./node_modules/.pnpm/@metamask+obs-store@7.0.0/node_modules/@metamask/obs-store/dist/transform.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.storeTransformStream=void 0;const through2_1=__webpack_require__("./node_modules/.pnpm/through2@2.0.5/node_modules/through2/through2.js");exports.storeTransformStream=function storeTransformStream(syncTransformFn){return through2_1.obj(((state,_encoding,cb)=>{try{return void cb(null,syncTransformFn(state))}catch(err){return void cb(err)}}))}},"./node_modules/.pnpm/@web3auth+torus-evm-adapter@1.1.1_@babel+runtime@7.18.3/node_modules/@web3auth/torus-evm-adapter/dist/torusEvmAdapter.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TorusWalletAdapter:()=>TorusWalletAdapter});var defineProperty=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),objectWithoutProperties=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),lib=__webpack_require__("./node_modules/.pnpm/web3-eth-contract@1.7.4/node_modules/web3-eth-contract/lib/index.js"),lib_default=__webpack_require__.n(lib),web3_utils_lib=__webpack_require__("./node_modules/.pnpm/web3-utils@1.7.4/node_modules/web3-utils/lib/index.js");const ETHEREUM_NETWORK={ROPSTEN:"ropsten",MAINNET:"mainnet",POLYGON:"polygon-mainnet"},abi=[{inputs:[{internalType:"string",name:"_verifier",type:"string"},{internalType:"bytes32",name:"hashedVerifierId",type:"bytes32"}],name:"getNodeSet",outputs:[{internalType:"uint256",name:"currentEpoch",type:"uint256"},{internalType:"string[]",name:"torusNodeEndpoints",type:"string[]"},{internalType:"uint256[]",name:"torusNodePubX",type:"uint256[]"},{internalType:"uint256[]",name:"torusNodePubY",type:"uint256[]"},{internalType:"uint256[]",name:"torusIndexes",type:"uint256[]"}],stateMutability:"view",type:"function"}];class NodeDetailManager{constructor(){let url,{network=ETHEREUM_NETWORK.MAINNET,proxyAddress=NodeDetailManager.PROXY_ADDRESS_MAINNET}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,defineProperty.Z)(this,"_currentEpoch",""),(0,defineProperty.Z)(this,"_torusNodeEndpoints",[]),(0,defineProperty.Z)(this,"_torusNodePub",[]),(0,defineProperty.Z)(this,"_torusIndexes",[]),(0,defineProperty.Z)(this,"nodeListAddress",void 0),(0,defineProperty.Z)(this,"updated",void 0),(0,defineProperty.Z)(this,"nodeListContract",void 0);try{url=new URL(network).href}catch(_){const projectId="b8cdb0e4cff24599a286bf8e87ff1c96";url="https://".concat(network,".infura.io/v3/").concat(projectId)}lib_default().setProvider(url),this.nodeListContract=new(lib_default())(abi,proxyAddress),this.nodeListAddress=proxyAddress,this.updated=!1}get _nodeDetails(){return{currentEpoch:this._currentEpoch,nodeListAddress:this.nodeListAddress,torusNodeEndpoints:this._torusNodeEndpoints,torusNodePub:this._torusNodePub,torusIndexes:this._torusIndexes,updated:this.updated}}async getNodeDetails(_ref){let{verifier,verifierId}=_ref;try{if(this.updated&&(this.nodeListAddress===NodeDetailManager.PROXY_ADDRESS_MAINNET||this.nodeListAddress===NodeDetailManager.PROXY_ADDRESS_ROPSTEN))return this._nodeDetails;const hashedVerifierId=(0,web3_utils_lib.keccak256)(verifierId),nodeDetails=await this.nodeListContract.methods.getNodeSet(verifier,hashedVerifierId).call(),{currentEpoch,torusNodeEndpoints,torusNodePubX,torusNodePubY,torusIndexes}=nodeDetails;this._currentEpoch=currentEpoch,this._torusIndexes=torusIndexes.map((x=>Number(x)));const updatedEndpoints=[],updatedNodePub=[];for(let index=0;index<torusNodeEndpoints.length;index+=1){const endPointElement=torusNodeEndpoints[index],pubKx=torusNodePubX[index],pubKy=torusNodePubY[index],endpoint="https://".concat(endPointElement.split(":")[0],"/jrpc");updatedEndpoints.push(endpoint),updatedNodePub.push({X:(0,web3_utils_lib.toHex)(pubKx).replace("0x",""),Y:(0,web3_utils_lib.toHex)(pubKy).replace("0x","")})}return this._torusNodeEndpoints=updatedEndpoints,this._torusNodePub=updatedNodePub,this.updated=!0,this._nodeDetails}catch(error){if(this.nodeListAddress===NodeDetailManager.PROXY_ADDRESS_MAINNET)return NodeDetailManager.NODE_DETAILS_MAINNET;throw error}}}(0,defineProperty.Z)(NodeDetailManager,"PROXY_ADDRESS_MAINNET","0xf20336e16B5182637f09821c27BDe29b0AFcfe80"),(0,defineProperty.Z)(NodeDetailManager,"PROXY_ADDRESS_ROPSTEN","0x6258c9d6c12ed3edda59a1a6527e469517744aa7"),(0,defineProperty.Z)(NodeDetailManager,"PROXY_ADDRESS_POLYGON","0x9f072ba19b3370e512aa1b4bfcdaf97283168005"),(0,defineProperty.Z)(NodeDetailManager,"NODE_DETAILS_MAINNET",{currentEpoch:"19",nodeListAddress:NodeDetailManager.PROXY_ADDRESS_MAINNET,torusNodeEndpoints:["https://torus-19.torusnode.com/jrpc","https://torus-node.ens.domains/jrpc","https://torus-node.matic.network/jrpc","https://torus.zilliqa.network/jrpc","https://torus-mainnet.cosmos.network/jrpc","https://torus2.etherscan.com/jrpc","https://torus-node-v2.skalelabs.com/jrpc","https://torus-node.binancex.dev/jrpc","https://torusnode.ont.io/jrpc"],torusIndexes:[1,2,3,4,5,6,7,8,9],torusNodePub:[{X:"bbe83c64177c3775550e6ba6ac2bc059f6847d644c9e4894e42c60d7974d8c2b",Y:"82b49a7caf70def38cdad2740af45c1e4f969650105c5019a29bb18b21a9acb5"},{X:"c208cac4ef9a47d386097a9c915b28e9cb89213abee8d26a17198ee261201b0d",Y:"c7db2fe4631109f40833de9dc78d07e35706549ee48fa557b33e4e75e1047873"},{X:"ca1766bb426d4ca5582818a0c5439d560ea64f5baa060793ab29dd3d0ceacfe",Y:"d46c1d08c40e1306e1bca328c2287b8268166b11a1ba4b8442ea2ad0c5e32152"},{X:"c3934dd2f6f4b3d2e1e398cc501e143c1e1a381b52feb6d1525af34d16253768",Y:"71f5141a5035799099f5ea3e241e66946bc55dc857ac3bd7d6fcdb8dcd3eeeef"},{X:"22e66f1929631d00bf026227581597f085fd94fd952fc0dca9f0833398b5c064",Y:"6088b3912e10a1e9d50355a609c10db7d188f16a2e2fd7357e51bf4f6a74f0a1"},{X:"9dc9fa410f3ce9eb70df70cdea00a49f2c4cc7a31c08c0dab5f863ed35ff5139",Y:"627a291cb87a75c61da3f65d6818e1e05e360217179817ed27e8c73bca7ec122"},{X:"118b9fc07e97b096d899b9f6658463ce6a8caa64038e37fc969df4e6023dd8c6",Y:"baf9fa4e51770f4796ea165dd03a769b8606681a38954a0a92c4cbffd6609ce9"},{X:"8a6d8b925da15a273dec3d8f8395ec35cd6878f274b2b180e4e106999db64043",Y:"96f67f870c157743da0b1eb84d89bf30500d74dc84c11f501ee1cb013acc8c46"},{X:"39cecb62e863729f572f7dfc46c24867981bf04bb405fed0df39e33984bfade5",Y:"61c2364434012e68a2be2e9952805037e52629d7762fafc8e10e9fb5bad8f790"}],updated:!1});var httpHelpers_esm=__webpack_require__("./node_modules/.pnpm/@toruslabs+http-helpers@3.1.0_@babel+runtime@7.18.3/node_modules/@toruslabs/http-helpers/dist/httpHelpers.esm.js"),openloginJrpc_esm=__webpack_require__("./node_modules/.pnpm/@toruslabs+openlogin-jrpc@2.1.0_@babel+runtime@7.18.3/node_modules/@toruslabs/openlogin-jrpc/dist/openloginJrpc.esm.js"),browser=__webpack_require__("./node_modules/.pnpm/@toruslabs+eccrypto@1.1.8/node_modules/@toruslabs/eccrypto/browser.js"),bn=__webpack_require__("./node_modules/.pnpm/bn.js@5.2.1/node_modules/bn.js/lib/bn.js"),bn_default=__webpack_require__.n(bn),elliptic=__webpack_require__("./node_modules/.pnpm/elliptic@6.5.4/node_modules/elliptic/lib/elliptic.js"),json_stable_stringify=__webpack_require__("./node_modules/.pnpm/json-stable-stringify@1.0.1/node_modules/json-stable-stringify/index.js"),json_stable_stringify_default=__webpack_require__.n(json_stable_stringify),loglevel=__webpack_require__("./node_modules/.pnpm/loglevel@1.8.0/node_modules/loglevel/lib/loglevel.js"),loglevel_default=__webpack_require__.n(loglevel),js=__webpack_require__("./node_modules/.pnpm/keccak@3.0.2/node_modules/keccak/js.js"),js_default=__webpack_require__.n(js),Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;const log=loglevel_default().getLogger("torus.js");log.disableAll();class SomeError extends Error{constructor(_ref){let{errors,responses,predicate}=_ref;super("Unable to resolve enough promises."),(0,defineProperty.Z)(this,"errors",void 0),(0,defineProperty.Z)(this,"responses",void 0),(0,defineProperty.Z)(this,"predicate",void 0),this.errors=errors,this.responses=responses,this.predicate=predicate}}const Some=(promises,predicate)=>new Promise(((resolve,reject)=>{let finishedCount=0;const sharedState={resolved:!1},errorArr=new Array(promises.length).fill(void 0),resultArr=new Array(promises.length).fill(void 0);let predicateError;return promises.forEach(((x,index)=>x.then((resp=>{resultArr[index]=resp})).catch((error=>{errorArr[index]=error})).finally((()=>{if(!sharedState.resolved)return predicate(resultArr.slice(0),sharedState).then((data=>{sharedState.resolved=!0,resolve(data)})).catch((error=>{predicateError=error})).finally((()=>{if(finishedCount+=1,finishedCount===promises.length){const errors=Object.values(resultArr.reduce(((acc,z)=>{if(z){var _error$data;const{id,error}=z;(null==error||null===(_error$data=error.data)||void 0===_error$data?void 0:_error$data.length)>0&&(error.data.startsWith("Error occurred while verifying params")?acc[id]=function capitalizeFirstLetter(str){return str.charAt(0).toUpperCase()+str.slice(1)}(error.data):acc[id]=error.data)}return acc}),{}));if(errors.length>0){const msg=errors.length>1?`\n${errors.map((it=>` ${it}`)).join("\n")}`:errors[0];reject(new Error(msg))}else{var _predicateError;reject(new SomeError({errors:errorArr,responses:resultArr,predicate:(null===(_predicateError=predicateError)||void 0===_predicateError?void 0:_predicateError.message)||predicateError}))}}}))}))))}));function ownKeys$1(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread$1(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys$1(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys$1(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}class GetOrSetNonceError extends Error{}const kCombinations=(s,k)=>{let set=s;if("number"==typeof set&&(set=Array.from({length:set},((_,i)=>i))),k>set.length||k<=0)return[];if(k===set.length)return[set];if(1===k)return set.reduce(((acc,cur)=>[...acc,[cur]]),[]);const combs=[];let tailCombs=[];for(let i=0;i<=set.length-k+1;i+=1){tailCombs=kCombinations(set.slice(i+1),k-1);for(let j=0;j<tailCombs.length;j+=1)combs.push([set[i],...tailCombs[j]])}return combs},thresholdSame=(arr,t)=>{const hashMap={};for(let i=0;i<arr.length;i+=1){const str=json_stable_stringify_default()(arr[i]);if(hashMap[str]=hashMap[str]?hashMap[str]+1:1,hashMap[str]===t)return arr[i]}},keyLookup=async(endpoints,verifier,verifierId)=>{const lookupPromises=endpoints.map((x=>(0,httpHelpers_esm.v_)(x,(0,httpHelpers_esm.i)("VerifierLookupRequest",{verifier,verifier_id:verifierId.toString()})).catch((err=>log.error("lookup request failed",err)))));return Some(lookupPromises,(lookupResults=>{const lookupShares=lookupResults.filter((x1=>x1)),errorResult=thresholdSame(lookupShares.map((x2=>x2&&x2.error)),1+~~(endpoints.length/2)),keyResult=thresholdSame(lookupShares.map((x3=>x3&&x3.result)),1+~~(endpoints.length/2));return keyResult||errorResult?Promise.resolve({keyResult,errorResult}):Promise.reject(new Error(`invalid results ${JSON.stringify(lookupResults)}`))}))},waitKeyLookup=(endpoints,verifier,verifierId,timeout)=>new Promise(((resolve,reject)=>{setTimeout((()=>{keyLookup(endpoints,verifier,verifierId).then(resolve).catch(reject)}),timeout)})),keyAssign=async _ref=>{let nodeNum,initialPoint,{endpoints,torusNodePubs,lastPoint,firstPoint,verifier,verifierId,signerHost,network}=_ref;if(void 0===lastPoint?(nodeNum=Math.floor(Math.random()*endpoints.length),initialPoint=nodeNum):nodeNum=lastPoint%endpoints.length,nodeNum===firstPoint)throw new Error("Looped through all");void 0!==firstPoint&&(initialPoint=firstPoint);const data=(0,httpHelpers_esm.i)("KeyAssign",{verifier,verifier_id:verifierId.toString()});try{const signedData=await(0,httpHelpers_esm.v_)(signerHost,data,{headers:{pubKeyX:torusNodePubs[nodeNum].X,pubKeyY:torusNodePubs[nodeNum].Y,network}},{useAPIKey:!0});return await(0,httpHelpers_esm.v_)(endpoints[nodeNum],_objectSpread$1(_objectSpread$1({},data),signedData),{headers:{"Content-Type":"application/json; charset=utf-8"}})}catch(error){log.error(error);if(["Timed out","TypeError: Failed to fetch","TypeError: cancelled","TypeError: NetworkError when attempting to fetch resource."].includes(error.message))return keyAssign({endpoints,torusNodePubs,lastPoint:nodeNum+1,firstPoint:initialPoint,verifier,verifierId,signerHost,network});throw new Error(`Sorry, the Torus Network that powers Web3Auth is currently very busy.\n    We will generate your key in time. Pls try again later. \n\n    ${error.message||""}`)}};function keccak256(a){return`0x${js_default()("keccak256").update(a).digest().toString("hex")}`}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}class torusUtils_esm_Torus{constructor(){let{enableOneKey=!1,metadataHost="https://metadata.tor.us",allowHost="https://signer.tor.us/api/allow",signerHost="https://signer.tor.us/api/sign",serverTimeOffset=0,network="mainnet"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,defineProperty.Z)(this,"metadataHost",void 0),(0,defineProperty.Z)(this,"allowHost",void 0),(0,defineProperty.Z)(this,"serverTimeOffset",void 0),(0,defineProperty.Z)(this,"enableOneKey",void 0),(0,defineProperty.Z)(this,"signerHost",void 0),(0,defineProperty.Z)(this,"network",void 0),(0,defineProperty.Z)(this,"ec",void 0),this.ec=new elliptic.ec("secp256k1"),this.metadataHost=metadataHost,this.allowHost=allowHost,this.enableOneKey=enableOneKey,this.serverTimeOffset=serverTimeOffset||0,this.signerHost=signerHost,this.network=network}static enableLogging(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?log.enableAll():log.disableAll()}static setAPIKey(apiKey){(0,httpHelpers_esm.ut)(apiKey)}static setEmbedHost(embedHost){(0,httpHelpers_esm.y1)(embedHost)}static isGetOrSetNonceError(err){return err instanceof GetOrSetNonceError}async getUserTypeAndAddress(endpoints,torusNodePubs,_ref){let{verifier,verifierId}=_ref,doesKeyAssign=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{keyResult,errorResult}=await keyLookup(endpoints,verifier,verifierId)||{};let finalKeyResult,isNewKey=!1;if(errorResult&&JSON.stringify(errorResult).includes("Verifier + VerifierID has not yet been assigned")){if(!doesKeyAssign)throw new Error("Verifier + VerifierID has not yet been assigned");await keyAssign({endpoints,torusNodePubs,lastPoint:void 0,firstPoint:void 0,verifier,verifierId,signerHost:this.signerHost,network:this.network});const assignResult=await waitKeyLookup(endpoints,verifier,verifierId,1e3);finalKeyResult=null==assignResult?void 0:assignResult.keyResult,isNewKey=!0}else{if(!keyResult)throw new Error(`node results do not match at first lookup ${JSON.stringify(keyResult||{})}, ${JSON.stringify(errorResult||{})}`);finalKeyResult=keyResult}if(finalKeyResult){const{pub_key_X:X,pub_key_Y:Y}=finalKeyResult.keys[0];let nonceResult,nonce,modifiedPubKey;try{nonceResult=await this.getOrSetNonce(X,Y,void 0,!isNewKey),nonce=new(bn_default())(nonceResult.nonce||"0",16)}catch{throw new GetOrSetNonceError}if("v1"===nonceResult.typeOfUser)modifiedPubKey=this.ec.keyFromPublic({x:X,y:Y}).getPublic().add(this.ec.keyFromPrivate(nonce.toString(16)).getPublic());else{if("v2"!==nonceResult.typeOfUser)throw new Error("getOrSetNonce should always return typeOfUser.");modifiedPubKey=this.ec.keyFromPublic({x:X,y:Y}).getPublic().add(this.ec.keyFromPublic({x:nonceResult.pubNonce.x,y:nonceResult.pubNonce.y}).getPublic())}const finalX=modifiedPubKey.getX().toString(16),finalY=modifiedPubKey.getY().toString(16),address=this.generateAddressFromPubKey(modifiedPubKey.getX(),modifiedPubKey.getY());if("v1"===nonceResult.typeOfUser)return{typeOfUser:nonceResult.typeOfUser,nonce,X:finalX,Y:finalY,address};if("v2"===nonceResult.typeOfUser)return{typeOfUser:nonceResult.typeOfUser,nonce,pubNonce:nonceResult.pubNonce,upgraded:nonceResult.upgraded,X:finalX,Y:finalY,address}}throw new Error(`node results do not match at final lookup ${JSON.stringify(keyResult||{})}, ${JSON.stringify(errorResult||{})}`)}async setCustomKey(_ref2){let torusKey,{privKeyHex,metadataNonce,torusKeyHex,customKeyHex}=_ref2;if(torusKeyHex)torusKey=new(bn_default())(torusKeyHex,16);else{torusKey=new(bn_default())(privKeyHex,16).sub(metadataNonce).umod(this.ec.curve.n)}const newMetadataNonce=new(bn_default())(customKeyHex,16).sub(torusKey).umod(this.ec.curve.n),data=this.generateMetadataParams(newMetadataNonce.toString(16),torusKey);await this.setMetadata(data)}async retrieveShares(endpoints,indexes,verifier,verifierParams,idToken){let extraParams=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const promiseArr=[];await(0,httpHelpers_esm.U2)(this.allowHost,{headers:{verifier,verifier_id:verifierParams.verifier_id,network:this.network}},{useAPIKey:!0});const tmpKey=(0,browser.oq)(),pubKey=(0,browser.rc)(tmpKey).toString("hex"),pubKeyX=pubKey.slice(2,66),pubKeyY=pubKey.slice(66),tokenCommitment=keccak256(idToken);for(let i=0;i<endpoints.length;i+=1){const p=(0,httpHelpers_esm.v_)(endpoints[i],(0,httpHelpers_esm.i)("CommitmentRequest",{messageprefix:"mug00",tokencommitment:tokenCommitment.slice(2),temppubx:pubKeyX,temppuby:pubKeyY,verifieridentifier:verifier})).catch((err=>{log.error("commitment",err)}));promiseArr.push(p)}return Some(promiseArr,(resultArr=>resultArr.filter((x=>!(!x||"object"!=typeof x)&&!x.error)).length>=3*~~(endpoints.length/4)+1?Promise.resolve(resultArr):Promise.reject(new Error(`invalid ${JSON.stringify(resultArr)}`)))).then((responses=>{const promiseArrRequest=[],nodeSigs=[];for(let i=0;i<responses.length;i+=1)responses[i]&&nodeSigs.push(responses[i].result);for(let i=0;i<endpoints.length;i+=1){const p=(0,httpHelpers_esm.v_)(endpoints[i],(0,httpHelpers_esm.i)("ShareRequest",{encrypted:"yes",item:[_objectSpread(_objectSpread({},verifierParams),{},{idtoken:idToken,nodesignatures:nodeSigs,verifieridentifier:verifier},extraParams)]})).catch((err=>log.error("share req",err)));promiseArrRequest.push(p)}return Some(promiseArrRequest,(async(shareResponses,sharedState)=>{const completedRequests=shareResponses.filter((x=>x)),thresholdPublicKey=thresholdSame(shareResponses.map((x=>x&&x.result&&x.result.keys[0].PublicKey)),1+~~(endpoints.length/2));if(completedRequests.length>=1+~~(endpoints.length/2)&&thresholdPublicKey){const sharePromises=[],nodeIndexes=[];for(let i=0;i<shareResponses.length;i+=1){var _currentShareResponse,_currentShareResponse2;const currentShareResponse=shareResponses[i];if((null==currentShareResponse||null===(_currentShareResponse=currentShareResponse.result)||void 0===_currentShareResponse||null===(_currentShareResponse2=_currentShareResponse.keys)||void 0===_currentShareResponse2?void 0:_currentShareResponse2.length)>0){currentShareResponse.result.keys.sort(((a,b)=>new(bn_default())(a.Index,16).cmp(new(bn_default())(b.Index,16))));const firstKey=currentShareResponse.result.keys[0];if(firstKey.Metadata){const metadata={ephemPublicKey:Buffer.from(firstKey.Metadata.ephemPublicKey,"hex"),iv:Buffer.from(firstKey.Metadata.iv,"hex"),mac:Buffer.from(firstKey.Metadata.mac,"hex")};sharePromises.push((0,browser.pe)(tmpKey,_objectSpread(_objectSpread({},metadata),{},{ciphertext:Buffer.from(Buffer.from(firstKey.Share,"base64").toString("binary").padStart(64,"0"),"hex")})).catch((err=>log.debug("share decryption",err))))}else sharePromises.push(Promise.resolve(Buffer.from(firstKey.Share.padStart(64,"0"),"hex")))}else sharePromises.push(Promise.resolve(void 0));nodeIndexes.push(new(bn_default())(indexes[i],16))}const sharesResolved=await Promise.all(sharePromises);if(sharedState.resolved)return;const decryptedShares=sharesResolved.reduce(((acc,curr,index)=>(curr&&acc.push({index:nodeIndexes[index],value:new(bn_default())(curr)}),acc)),[]),allCombis=kCombinations(decryptedShares.length,1+~~(endpoints.length/2));let privateKey=null;for(let j=0;j<allCombis.length;j+=1){const currentCombi=allCombis[j],currentCombiShares=decryptedShares.filter(((v,index)=>currentCombi.includes(index))),shares=currentCombiShares.map((x=>x.value)),indices=currentCombiShares.map((x=>x.index)),derivedPrivateKey=this.lagrangeInterpolation(shares,indices);if(!derivedPrivateKey)continue;const decryptedPubKey=(0,browser.rc)(Buffer.from(derivedPrivateKey.toString(16,64),"hex")).toString("hex"),decryptedPubKeyX=decryptedPubKey.slice(2,66),decryptedPubKeyY=decryptedPubKey.slice(66);if(0===new(bn_default())(decryptedPubKeyX,16).cmp(new(bn_default())(thresholdPublicKey.X,16))&&0===new(bn_default())(decryptedPubKeyY,16).cmp(new(bn_default())(thresholdPublicKey.Y,16))){privateKey=derivedPrivateKey;break}}if(null==privateKey)throw new Error("could not derive private key");return privateKey}throw new Error("invalid")}))})).then((async returnedKey=>{let privateKey=returnedKey;if(!privateKey)throw new Error("Invalid private key returned");const decryptedPubKey=(0,browser.rc)(Buffer.from(privateKey.toString(16,64),"hex")).toString("hex"),decryptedPubKeyX=decryptedPubKey.slice(2,66),decryptedPubKeyY=decryptedPubKey.slice(66);let metadataNonce;if(this.enableOneKey){const{nonce}=await this.getNonce(decryptedPubKeyX,decryptedPubKeyY,privateKey);metadataNonce=new(bn_default())(nonce||"0",16)}else metadataNonce=await this.getMetadata({pub_key_X:decryptedPubKeyX,pub_key_Y:decryptedPubKeyY});log.debug("> torus.js/retrieveShares",{privKey:privateKey.toString(16),metadataNonce:metadataNonce.toString(16)}),privateKey=privateKey.add(metadataNonce).umod(this.ec.curve.n);const ethAddress=this.generateAddressFromPrivKey(privateKey);return log.debug("> torus.js/retrieveShares",{ethAddress,privKey:privateKey.toString(16)}),{ethAddress,privKey:privateKey.toString("hex",64),metadataNonce}}))}async getMetadata(data){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const metadataResponse=await(0,httpHelpers_esm.v_)(`${this.metadataHost}/get`,data,options,{useAPIKey:!0});return metadataResponse&&metadataResponse.message?new(bn_default())(metadataResponse.message,16):new(bn_default())(0)}catch(error){return log.error("get metadata error",error),new(bn_default())(0)}}generateMetadataParams(message,privateKey){const key=this.ec.keyFromPrivate(privateKey.toString("hex",64)),setData={data:message,timestamp:new(bn_default())(~~(this.serverTimeOffset+Date.now()/1e3)).toString(16)},sig=key.sign(keccak256(json_stable_stringify_default()(setData)).slice(2));return{pub_key_X:key.getPublic().getX().toString("hex"),pub_key_Y:key.getPublic().getY().toString("hex"),set_data:setData,signature:Buffer.from(sig.r.toString(16,64)+sig.s.toString(16,64)+new(bn_default())("").toString(16,2),"hex").toString("base64")}}async setMetadata(data){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return(await(0,httpHelpers_esm.v_)(`${this.metadataHost}/set`,data,options,{useAPIKey:!0})).message}catch(error){return log.error("set metadata error",error),""}}lagrangeInterpolation(shares,nodeIndex){if(shares.length!==nodeIndex.length)return null;let secret=new(bn_default())(0);for(let i=0;i<shares.length;i+=1){let upper=new(bn_default())(1),lower=new(bn_default())(1);for(let j=0;j<shares.length;j+=1)if(i!==j){upper=upper.mul(nodeIndex[j].neg()),upper=upper.umod(this.ec.curve.n);let temp=nodeIndex[i].sub(nodeIndex[j]);temp=temp.umod(this.ec.curve.n),lower=lower.mul(temp).umod(this.ec.curve.n)}let delta=upper.mul(lower.invm(this.ec.curve.n)).umod(this.ec.curve.n);delta=delta.mul(shares[i]).umod(this.ec.curve.n),secret=secret.add(delta)}return secret.umod(this.ec.curve.n)}generateAddressFromPrivKey(privateKey){const publicKey=this.ec.keyFromPrivate(privateKey.toString("hex",64),"hex").getPublic().encode("hex",!1).slice(2);log.info(publicKey,"public key");const ethAddressLower=`0x${keccak256(Buffer.from(publicKey,"hex")).slice(26)}`;return(0,web3_utils_lib.toChecksumAddress)(ethAddressLower)}generateAddressFromPubKey(publicKeyX,publicKeyY){const key=this.ec.keyFromPublic({x:publicKeyX.toString("hex",64),y:publicKeyY.toString("hex",64)}),publicKey=key.getPublic().encode("hex",!1).slice(2);log.info(key.getPublic().encode("hex",!1),"public key");const ethAddressLower=`0x${keccak256(Buffer.from(publicKey,"hex")).slice(26)}`;return(0,web3_utils_lib.toChecksumAddress)(ethAddressLower)}async getPublicAddress(endpoints,torusNodePubs,_ref3){let finalKeyResult,{verifier,verifierId}=_ref3,isExtended=arguments.length>3&&void 0!==arguments[3]&&arguments[3];log.debug("> torus.js/getPublicAddress",{endpoints,torusNodePubs,verifier,verifierId,isExtended});let isNewKey=!1;const{keyResult,errorResult}=await keyLookup(endpoints,verifier,verifierId)||{};if(errorResult&&JSON.stringify(errorResult).includes("Verifier not supported"))throw new Error("Verifier not supported. Check if you: \n\n      1. Are on the right network (Torus testnet/mainnet) \n\n      2. Have setup a verifier on dashboard.web3auth.io?");if(errorResult&&JSON.stringify(errorResult).includes("Verifier + VerifierID has not yet been assigned")){await keyAssign({endpoints,torusNodePubs,lastPoint:void 0,firstPoint:void 0,verifier,verifierId,signerHost:this.signerHost,network:this.network});const assignResult=await waitKeyLookup(endpoints,verifier,verifierId,1e3);finalKeyResult=null==assignResult?void 0:assignResult.keyResult,isNewKey=!0}else{if(!keyResult)throw new Error(`node results do not match at first lookup ${JSON.stringify(keyResult||{})}, ${JSON.stringify(errorResult||{})}`);finalKeyResult=keyResult}if(log.debug("> torus.js/getPublicAddress",{finalKeyResult,isNewKey}),finalKeyResult){var _nonce;let nonceResult,nonce,modifiedPubKey,typeOfUser,pubNonce,{pub_key_X:X,pub_key_Y:Y}=finalKeyResult.keys[0];if(this.enableOneKey){try{nonceResult=await this.getOrSetNonce(X,Y,void 0,!isNewKey),nonce=new(bn_default())(nonceResult.nonce||"0",16),typeOfUser=nonceResult.typeOfUser}catch{throw new GetOrSetNonceError}if("v1"===nonceResult.typeOfUser)modifiedPubKey=this.ec.keyFromPublic({x:X,y:Y}).getPublic().add(this.ec.keyFromPrivate(nonce.toString(16)).getPublic());else{if("v2"!==nonceResult.typeOfUser)throw new Error("getOrSetNonce should always return typeOfUser.");nonceResult.upgraded?modifiedPubKey=this.ec.keyFromPublic({x:X,y:Y}).getPublic():(modifiedPubKey=this.ec.keyFromPublic({x:X,y:Y}).getPublic().add(this.ec.keyFromPublic({x:nonceResult.pubNonce.x,y:nonceResult.pubNonce.y}).getPublic()),pubNonce=nonceResult.pubNonce)}}else typeOfUser="v1",nonce=await this.getMetadata({pub_key_X:X,pub_key_Y:Y}),modifiedPubKey=this.ec.keyFromPublic({x:X,y:Y}).getPublic().add(this.ec.keyFromPrivate(nonce.toString(16)).getPublic());X=modifiedPubKey.getX().toString(16),Y=modifiedPubKey.getY().toString(16);const address=this.generateAddressFromPubKey(modifiedPubKey.getX(),modifiedPubKey.getY());return log.debug("> torus.js/getPublicAddress",{X,Y,address,typeOfUser,nonce:null===(_nonce=nonce)||void 0===_nonce?void 0:_nonce.toString(16),pubNonce}),isExtended?{typeOfUser,address,X,Y,metadataNonce:nonce,pubNonce}:address}throw new Error(`node results do not match at final lookup ${JSON.stringify(keyResult||{})}, ${JSON.stringify(errorResult||{})}`)}async getOrSetNonce(X,Y,privKey){let data;const msg=arguments.length>3&&void 0!==arguments[3]&&arguments[3]?"getNonce":"getOrSetNonce";return data=privKey?this.generateMetadataParams(msg,privKey):{pub_key_X:X,pub_key_Y:Y,set_data:{data:msg}},(0,httpHelpers_esm.v_)(`${this.metadataHost}/get_or_set_nonce`,data,void 0,{useAPIKey:!0})}async getNonce(X,Y,privKey){return this.getOrSetNonce(X,Y,privKey,!0)}getPostboxKeyFrom1OutOf1(privKey,nonce){const privKeyBN=new(bn_default())(privKey,16),nonceBN=new(bn_default())(nonce,16);return privKeyBN.sub(nonceBN).umod(this.ec.curve.n).toString("hex")}}var lodash_merge=__webpack_require__("./node_modules/.pnpm/lodash.merge@4.6.2/node_modules/lodash.merge/index.js"),lodash_merge_default=__webpack_require__.n(lodash_merge),dist=__webpack_require__("./node_modules/.pnpm/@metamask+obs-store@7.0.0/node_modules/@metamask/obs-store/dist/index.js"),eth_rpc_errors_dist=__webpack_require__("./node_modules/.pnpm/eth-rpc-errors@4.0.3/node_modules/eth-rpc-errors/dist/index.js"),fast_deep_equal=__webpack_require__("./node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js"),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal),is_stream=__webpack_require__("./node_modules/.pnpm/is-stream@2.0.1/node_modules/is-stream/index.js"),pump=__webpack_require__("./node_modules/.pnpm/pump@3.0.0/node_modules/pump/index.js"),pump_default=__webpack_require__.n(pump),create_hash_browser=__webpack_require__("./node_modules/.pnpm/create-hash@1.2.0/node_modules/create-hash/browser.js"),browser_default=__webpack_require__.n(create_hash_browser),events=__webpack_require__("./node_modules/.pnpm/events@3.3.0/node_modules/events/events.js"),torus_esm_Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;const LOGIN_PROVIDER_GOOGLE="google",LOGIN_PROVIDER_FACEBOOK="facebook",LOGIN_PROVIDER_TWITCH="twitch",LOGIN_PROVIDER_REDDIT="reddit",LOGIN_PROVIDER_DISCORD="discord",WALLET_VERIFIERS={GOOGLE:"google",FACEBOOK:"facebook",TWITCH:"twitch",REDDIT:"reddit",DISCORD:"discord",EMAIL_PASSWORDLESS:"torus-auth0-email-passwordless"},WALLET_OPENLOGIN_VERIFIER_MAP={[WALLET_VERIFIERS.GOOGLE]:"tkey-google",[WALLET_VERIFIERS.FACEBOOK]:"tkey-facebook",[WALLET_VERIFIERS.TWITCH]:"tkey-twitch",[WALLET_VERIFIERS.REDDIT]:"tkey-reddit",[WALLET_VERIFIERS.DISCORD]:"tkey-discord",[WALLET_VERIFIERS.EMAIL_PASSWORDLESS]:"tkey-auth0-email-passwordless"},TORUS_BUILD_ENV={PRODUCTION:"production",DEVELOPMENT:"development",BINANCE:"binance",TESTING:"testing",LRC:"lrc",BETA:"beta"},BUTTON_POSITION={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},paymentProviders$1={["rampnetwork"]:{line1:"Debit Card/ Apple Pay/ Bank transfer",line2:"0.49% - 2.9%",line3:"5,000/purchase, 20,000/mo",supportPage:"https://instant.ramp.network/",minOrderValue:50,maxOrderValue:2e4,validCurrencies:["GBP","EUR","USD"],validCryptoCurrencies:["ETH","DAI","USDC","BSC_BNB"],includeFees:!0,enforceMax:!1},["moonpay"]:{line1:"Credit / Debit Card / Apple Pay",line2:"4.5% or 5 USD",line3:"2,000/day, 10,000/mo",supportPage:"https://help.moonpay.io/en/",minOrderValue:24.99,maxOrderValue:5e4,validCurrencies:["USD","EUR","GBP","AUD","CAD","SGD","RUB"],validCryptoCurrencies:["ETH","DAI","TUSD","USDC","USDT","BNB_BSC","BUSD_BSC"],includeFees:!0,enforceMax:!1},["wyre"]:{line1:"Apple Pay/ Debit/ Credit Card",line2:"4.9% + 30 or 5 USD",line3:"$250/day",supportPage:"https://support.sendwyre.com/en/",minOrderValue:5,maxOrderValue:500,validCurrencies:["USD","AUD","CAD","GBP","EUR"],validCryptoCurrencies:["ETH","DAI","USDC","USDT"],includeFees:!1,enforceMax:!1},["xanpool"]:{line1:"PayNow/ InstaPay/ FPS/ GoJekPay/ UPI/ PromptPay/ VietelPay/ DuitNow",line2:"2.5% buying, 3% selling",line3:"$2,500 / day",supportPage:"mailto:support@xanpool.com",minOrderValue:100,maxOrderValue:2500,validCurrencies:["SGD","HKD","MYR","PHP","INR","VND","THB","IDR"],validCryptoCurrencies:["ETH","USDT"],includeFees:!0,sell:!0,enforceMax:!1},["mercuryo"]:{line1:"Credit/ Debit Card/ Apple Pay",line2:"3.95% or 4 USD",line3:"10,000/day, 25,000/mo",supportPage:"mailto:support@mercuryo.io",minOrderValue:30,maxOrderValue:5e3,validCurrencies:["USD","EUR","RUB","TRY","GBP","UAH"],validCryptoCurrencies:["ETH","DAI","BAT","USDT","OKB"],includeFees:!0,enforceMax:!1},["transak"]:{line1:"Credit/ Debit Card/ <br/>Bank Transfer (sepa/gbp)",line2:"0.99% - 5.5% or 5 USD",line3:"500/day",supportPage:"https://support.transak.com/hc/en-US",minOrderValue:20,maxOrderValue:500,validCurrencies:["USD","EUR","GBP","AUD","CAD","SGD"],validCryptoCurrencies:["ETH","DAI","USDC","USDT"],includeFees:!0,enforceMax:!1}};var configuration={supportedVerifierList:Object.values(WALLET_VERIFIERS),paymentProviders:paymentProviders$1,api:"https://api.tor.us",translations:{en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies bentigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"",actionRequired:"",pendingAction:"",cookiesRequired:"",enableCookies:"TorusCookie",clickHere:""}},ko:{embed:{continue:"",actionRequired:" ",pendingAction:"    .",cookiesRequired:" ",enableCookies:"     Torus .",clickHere:"  "}},zh:{embed:{continue:"",actionRequired:"",pendingAction:"",cookiesRequired:"Cookie",enableCookies:"cookieTorus",clickHere:""}}},prodTorusUrl:"",localStorageKeyPrefix:"torus-"};const runOnLoad=fn=>new Promise(((resolve,reject)=>{null!=window.document.body?Promise.resolve(fn()).then(resolve).catch(reject):window.document.addEventListener("DOMContentLoaded",(()=>{Promise.resolve(fn()).then(resolve).catch(reject)}))})),htmlToElement=html=>{const template=window.document.createElement("template"),trimmedHtml=html.trim();return template.innerHTML=trimmedHtml,template.content.firstChild},handleStream=(handle,eventName,handler)=>{const handlerWrapper=chunk=>{handler(chunk),handle.removeListener(eventName,handlerWrapper)};handle.on(eventName,handlerWrapper)};async function documentReady(){return new Promise((resolve=>{"loading"!==document.readyState?resolve():function(handle,eventName,handler){for(var _len=arguments.length,handlerArgs=new Array(_len>3?_len-3:0),_key=3;_key<_len;_key++)handlerArgs[_key-3]=arguments[_key];const handlerWrapper=()=>{handler(...handlerArgs),handle.removeEventListener(eventName,handlerWrapper)};handle.addEventListener(eventName,handlerWrapper)}(document,"DOMContentLoaded",resolve)}))}var torus_esm_log=loglevel_default().getLogger("torus-embed"),messages={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",sendSiteMetadata:()=>"Torus: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:method=>"Torus: The Torus Ethereum provider does not support synchronous methods like ".concat(method," without a callback parameter."),invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:(maxEventListeners,shouldSendMetadata)=>"Invalid options. Received: { maxEventListeners: ".concat(maxEventListeners,", shouldSendMetadata: ").concat(shouldSendMetadata," }"),invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:method=>"'args.logger' must include required method '".concat(method,"'.")},info:{connected:chainId=>'Torus: Connected to chain with ID "'.concat(chainId,'".')},warnings:{enableDeprecation:'Torus: ""ethereum.enable()" is deprecated and may be removed in the future. Please use "ethereum.send("eth_requestAccounts")" instead. For more information, see: https://eips.ethereum.org/EIPS/eip-1102',sendDeprecation:'Torus: "ethereum.send(...)" is deprecated and may be removed in the future. Please use "ethereum.sendAsync(...)" or "ethereum.request(...)" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',events:{close:'Torus: The event "close" is deprecated and may be removed in the future. Please use "disconnect" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',data:'Torus: The event "data" is deprecated and will be removed in the future.Use "message" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message',networkChanged:'Torus: The event "networkChanged" is deprecated and may be removed in the future. Please use "chainChanged" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',notification:'Torus: The event "notification" is deprecated and may be removed in the future. Please use "message" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193'},publicConfigStore:'Torus: The property "publicConfigStore" is deprecated and WILL be removed in the future.'}};const{paymentProviders}=configuration;function logStreamDisconnectWarning(remoteLabel,error,emitter){let warningMsg='MetaMask: Lost connection to "'.concat(remoteLabel,'".');null!=error&&error.stack&&(warningMsg+="\n".concat(error.stack)),torus_esm_log.warn(warningMsg),emitter&&emitter.listenerCount("error")>0&&emitter.emit("error",warningMsg)}const getPreopenInstanceId=()=>Math.random().toString(36).slice(2),getTorusUrl=async(buildEnv,integrity)=>{let torusUrl,logLevel;let versionUsed=integrity.version||"1.27.1";try{if(("binance"===buildEnv||"production"===buildEnv)&&!integrity.version){let response;response=configuration.prodTorusUrl?{data:configuration.prodTorusUrl}:await(0,httpHelpers_esm.U2)("".concat(configuration.api,"/latestversion?name=@toruslabs/torus-embed&version=").concat("1.27.1"),{},{useAPIKey:!0}),versionUsed=response.data,configuration.prodTorusUrl=response.data}}catch(error){torus_esm_log.error(error,"unable to fetch latest version")}switch(torus_esm_log.info("version used: ",versionUsed),buildEnv){case"binance":torusUrl="https://binance.tor.us/v".concat(versionUsed),logLevel="info";break;case"testing":torusUrl="https://testing.tor.us",logLevel="debug";break;case"lrc":torusUrl="https://lrc.tor.us",logLevel="debug";break;case"beta":torusUrl="https://beta.tor.us",logLevel="debug";break;case"development":torusUrl="http://localhost:4050",logLevel="debug";break;default:torusUrl="https://app.tor.us/v".concat(versionUsed),logLevel="error"}return{torusUrl,logLevel}},getUserLanguage=()=>{let userLanguage=window.navigator.language||"en-US";const userLanguages=userLanguage.split("-");return userLanguage=Object.prototype.hasOwnProperty.call(configuration.translations,userLanguages[0])?userLanguages[0]:"en",userLanguage},EMITTED_NOTIFICATIONS=["eth_subscription"],NOOP=()=>{},FEATURES_CONFIRM_WINDOW="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=450";function torus_esm_ownKeys$1(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}openloginJrpc_esm.Ue.defaultMaxListeners=100;const getRpcPromiseCallback=function(resolve,reject){let unwrapResult=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(error,response)=>error||response.error?reject(error||response.error):!unwrapResult||Array.isArray(response)?resolve(response):resolve(response.result)};class TorusInpageProvider extends openloginJrpc_esm.Ue{constructor(connectionStream){let{maxEventListeners=100,shouldSendMetadata=!0,jsonRpcStreamName="provider"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(super(),(0,defineProperty.Z)(this,"chainId",void 0),(0,defineProperty.Z)(this,"selectedAddress",void 0),(0,defineProperty.Z)(this,"_rpcEngine",void 0),(0,defineProperty.Z)(this,"networkVersion",void 0),(0,defineProperty.Z)(this,"shouldSendMetadata",void 0),(0,defineProperty.Z)(this,"isTorus",void 0),(0,defineProperty.Z)(this,"_publicConfigStore",void 0),(0,defineProperty.Z)(this,"tryPreopenHandle",void 0),(0,defineProperty.Z)(this,"enable",void 0),(0,defineProperty.Z)(this,"_state",void 0),(0,defineProperty.Z)(this,"_jsonRpcConnection",void 0),(0,defineProperty.Z)(this,"_sentWarnings",{enable:!1,experimentalMethods:!1,send:!1,publicConfigStore:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}}),!(0,is_stream.duplex)(connectionStream))throw new Error(messages.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(maxEventListeners),this._state=function torus_esm_objectSpread$1(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?torus_esm_ownKeys$1(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):torus_esm_ownKeys$1(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},TorusInpageProvider._defaultState),this.selectedAddress=null,this.networkVersion=null,this.chainId=null,this.shouldSendMetadata=shouldSendMetadata,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._sendSync=this._sendSync.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this);const mux=new openloginJrpc_esm.O4;pump_default()(connectionStream,mux,connectionStream,this._handleStreamDisconnect.bind(this,"MetaMask")),this._publicConfigStore=new dist.ObservableStore({storageKey:"Metamask-Config"}),pump_default()(mux.createStream("publicConfig"),(0,dist.storeAsStream)(this._publicConfigStore),logStreamDisconnectWarning.bind(this,"MetaMask PublicConfigStore")),mux.ignoreStream("phishing"),this.on("connect",(()=>{this._state.isConnected=!0}));const jsonRpcConnection=(0,openloginJrpc_esm.AP)();pump_default()(jsonRpcConnection.stream,mux.createStream(jsonRpcStreamName),jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider"));const rpcEngine=new openloginJrpc_esm.eI;rpcEngine.push((0,openloginJrpc_esm.Rq)()),rpcEngine.push(function createErrorMiddleware(){return(req,res,next)=>{"string"==typeof req.method&&req.method||(res.error=eth_rpc_errors_dist.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:req})),next((done=>{const{error}=res;return error?(torus_esm_log.error("MetaMask - RPC Error: ".concat(error.message),error),done()):done()}))}}()),rpcEngine.push(jsonRpcConnection.middleware),this._rpcEngine=rpcEngine,jsonRpcConnection.events.on("notification",(payload=>{const{method,params}=payload;"wallet_accountsChanged"===method?this._handleAccountsChanged(params):"wallet_unlockStateChanged"===method?this._handleUnlockStateChanged(params):"wallet_chainChanged"===method?this._handleChainChanged(params):EMITTED_NOTIFICATIONS.includes(payload.method)&&(this.emit("data",payload),this.emit("notification",params.result),this.emit("message",{type:method,data:params}))}))}get publicConfigStore(){return this._sentWarnings.publicConfigStore||(torus_esm_log.warn(messages.warnings.publicConfigStore),this._sentWarnings.publicConfigStore=!0),this._publicConfigStore}isConnected(){return this._state.isConnected}async request(args){if(!args||"object"!=typeof args||Array.isArray(args))throw eth_rpc_errors_dist.ethErrors.rpc.invalidRequest({message:messages.errors.invalidRequestArgs(),data:args});const{method,params}=args;if("string"!=typeof method||0===method.length)throw eth_rpc_errors_dist.ethErrors.rpc.invalidRequest({message:messages.errors.invalidRequestMethod(),data:args});if(void 0!==params&&!Array.isArray(params)&&("object"!=typeof params||null===params))throw eth_rpc_errors_dist.ethErrors.rpc.invalidRequest({message:messages.errors.invalidRequestParams(),data:args});return new Promise(((resolve,reject)=>{this._rpcRequest({method,params},getRpcPromiseCallback(resolve,reject))}))}sendAsync(payload,callback){this._rpcRequest(payload,callback)}addListener(eventName,listener){return this._warnOfDeprecation(eventName),super.addListener(eventName,listener)}on(eventName,listener){return this._warnOfDeprecation(eventName),super.on(eventName,listener)}once(eventName,listener){return this._warnOfDeprecation(eventName),super.once(eventName,listener)}prependListener(eventName,listener){return this._warnOfDeprecation(eventName),super.prependListener(eventName,listener)}prependOnceListener(eventName,listener){return this._warnOfDeprecation(eventName),super.prependOnceListener(eventName,listener)}async _initializeState(){try{const{accounts,chainId,isUnlocked,networkVersion}=await this.request({method:"wallet_getProviderState"});this.emit("connect",{chainId}),this._handleChainChanged({chainId,networkVersion}),this._handleUnlockStateChanged({accounts,isUnlocked}),this._handleAccountsChanged(accounts)}catch(error){torus_esm_log.error("MetaMask: Failed to get initial state. Please report this bug.",error)}finally{torus_esm_log.info("initialized state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(payload,callback){let isInternal=arguments.length>2&&void 0!==arguments[2]&&arguments[2],cb=callback;const _payload=payload;if(!Array.isArray(_payload))if(_payload.jsonrpc||(_payload.jsonrpc="2.0"),"eth_accounts"===_payload.method||"eth_requestAccounts"===_payload.method)cb=(err,res)=>{this._handleAccountsChanged(res.result||[],"eth_accounts"===_payload.method,isInternal),callback(err,res)};else if("wallet_getProviderState"===_payload.method)return void this._rpcEngine.handle(payload,cb);this.tryPreopenHandle(_payload,cb)}send(methodOrPayload,callbackOrArgs){return this._sentWarnings.send||(torus_esm_log.warn(messages.warnings.sendDeprecation),this._sentWarnings.send=!0),"string"!=typeof methodOrPayload||callbackOrArgs&&!Array.isArray(callbackOrArgs)?methodOrPayload&&"object"==typeof methodOrPayload&&"function"==typeof callbackOrArgs?this._rpcRequest(methodOrPayload,callbackOrArgs):this._sendSync(methodOrPayload):new Promise(((resolve,reject)=>{try{this._rpcRequest({method:methodOrPayload,params:callbackOrArgs},getRpcPromiseCallback(resolve,reject,!1))}catch(error){reject(error)}}))}_sendSync(payload){let result;switch(payload.method){case"eth_accounts":result=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":result=this.selectedAddress||null;break;case"eth_uninstallFilter":this._rpcRequest(payload,NOOP),result=!0;break;case"net_version":result=this.networkVersion||null;break;default:throw new Error(messages.errors.unsupportedSync(payload.method))}return{id:payload.id,jsonrpc:payload.jsonrpc,result}}_handleConnect(chainId){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId}),torus_esm_log.debug(messages.info.connected(chainId)))}_handleDisconnect(isRecoverable,errorMessage){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!isRecoverable){let error;this._state.isConnected=!1,isRecoverable?(error=new eth_rpc_errors_dist.EthereumRpcError(1013,errorMessage||messages.errors.disconnected()),torus_esm_log.debug(error)):(error=new eth_rpc_errors_dist.EthereumRpcError(1011,errorMessage||messages.errors.permanentlyDisconnected()),torus_esm_log.error(error),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",error)}}_handleStreamDisconnect(streamName,error){logStreamDisconnectWarning(streamName,error,this),this._handleDisconnect(!1,error?error.message:void 0)}_handleAccountsChanged(accounts){let isEthAccounts=arguments.length>1&&void 0!==arguments[1]&&arguments[1],isInternal=arguments.length>2&&void 0!==arguments[2]&&arguments[2],finalAccounts=accounts;Array.isArray(finalAccounts)||(torus_esm_log.error("MetaMask: Received non-array accounts parameter. Please report this bug.",finalAccounts),finalAccounts=[]);for(const account of accounts)if("string"!=typeof account){torus_esm_log.error("MetaMask: Received non-string account. Please report this bug.",accounts),finalAccounts=[];break}fast_deep_equal_default()(this._state.accounts,finalAccounts)||(isEthAccounts&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!isInternal&&torus_esm_log.error('MetaMask: "eth_accounts" unexpectedly updated accounts. Please report this bug.',finalAccounts),this._state.accounts=finalAccounts,this.emit("accountsChanged",finalAccounts)),this.selectedAddress!==finalAccounts[0]&&(this.selectedAddress=finalAccounts[0]||null)}_handleChainChanged(){let{chainId,networkVersion}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};chainId&&networkVersion?"loading"===networkVersion?this._handleDisconnect(!0):(this._handleConnect(chainId),chainId!==this.chainId&&(this.chainId=chainId,this._state.initialized&&this.emit("chainChanged",this.chainId))):torus_esm_log.error("MetaMask: Received invalid network parameters. Please report this bug.",{chainId,networkVersion})}_handleUnlockStateChanged(){let{accounts,isUnlocked}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"boolean"==typeof isUnlocked?isUnlocked!==this._state.isUnlocked&&(this._state.isUnlocked=isUnlocked,this._handleAccountsChanged(accounts||[])):torus_esm_log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked})}_warnOfDeprecation(eventName){!1===this._sentWarnings.events[eventName]&&(torus_esm_log.warn(messages.warnings.events[eventName]),this._sentWarnings.events[eventName]=!0)}}(0,defineProperty.Z)(TorusInpageProvider,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});const hashes=(options,data)=>{const internalHashes={};return options.algorithms.forEach((algorithm=>{internalHashes[algorithm]=browser_default()(algorithm).update(data,"utf8").digest("base64")})),internalHashes},main=(options,data)=>{const finalOptions=(options=>({algorithms:options.algorithms||["sha256"],delimiter:options.delimiter||" ",full:options.full||!1}))(options),sri={hashes:hashes(finalOptions,data),integrity:void 0};return sri.integrity=((options,sri)=>{let output="";return output+=Object.keys(sri.hashes).map((algorithm=>"".concat(algorithm,"-").concat(sri.hashes[algorithm]))).join(options.delimiter),output})(finalOptions,sri),finalOptions.full?sri:sri.integrity};class PopupHandler extends events.EventEmitter{constructor(_ref){let{url,target,features}=_ref;super(),(0,defineProperty.Z)(this,"url",void 0),(0,defineProperty.Z)(this,"target",void 0),(0,defineProperty.Z)(this,"features",void 0),(0,defineProperty.Z)(this,"window",void 0),(0,defineProperty.Z)(this,"windowTimer",void 0),(0,defineProperty.Z)(this,"iClosedWindow",void 0),this.url=url,this.target=target||"_blank",this.features=features||function getPopupFeatures(){const dualScreenLeft=void 0!==window.screenLeft?window.screenLeft:window.screenX,dualScreenTop=void 0!==window.screenTop?window.screenTop:window.screenY,width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,left=Math.abs((width-1200)/2/1+dualScreenLeft),top=Math.abs((height-700)/2/1+dualScreenTop);return"titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=".concat(700,",width=").concat(1200,",top=").concat(top,",left=").concat(left)}(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval((()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0),void 0===this.window&&clearInterval(this.windowTimer)}),500))}open(){var _this$window;return this.window=window.open(this.url.href,this.target,this.features),null!==(_this$window=this.window)&&void 0!==_this$window&&_this$window.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(locationReplaceOnRedirect){locationReplaceOnRedirect?window.location.replace(this.url.href):window.location.href=this.url.href}}function imgExists(url){return new Promise(((resolve,reject)=>{try{const img=document.createElement("img");img.onload=()=>resolve(!0),img.onerror=()=>resolve(!1),img.src=url}catch(e){reject(e)}}))}const getSiteName=window=>{const{document}=window,siteName=document.querySelector('head > meta[property="og:site_name"]');if(siteName)return siteName.content;const metaTitle=document.querySelector('head > meta[name="title"]');return metaTitle?metaTitle.content:document.title&&document.title.length>0?document.title:window.location.hostname};async function getSiteIcon(window){const{document}=window;let icon=document.querySelector('head > link[rel="shortcut icon"]');return icon&&await imgExists(icon.href)?icon.href:(icon=Array.from(document.querySelectorAll('head > link[rel="icon"]')).find((_icon=>Boolean(_icon.href))),icon&&await imgExists(icon.href)?icon.href:null)}async function sendSiteMetadata(engine){try{const domainMetadata=await(async()=>({name:getSiteName(window),icon:await getSiteIcon(window)}))();engine.handle({jsonrpc:"2.0",id:getPreopenInstanceId(),method:"wallet_sendDomainMetadata",params:domainMetadata},NOOP)}catch(error){torus_esm_log.error({message:messages.errors.sendSiteMetadata(),originalError:error})}}const _excluded=["host","chainId","networkName"];function torus_esm_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function torus_esm_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?torus_esm_ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):torus_esm_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}const defaultVerifiers={[LOGIN_PROVIDER_GOOGLE]:!0,[LOGIN_PROVIDER_FACEBOOK]:!0,[LOGIN_PROVIDER_REDDIT]:!0,[LOGIN_PROVIDER_TWITCH]:!0,[LOGIN_PROVIDER_DISCORD]:!0},iframeIntegrity="sha384-NBSt2kh2h3MtCNm/Zs5juxAA3mgtnF7nUZopYlcG1fc8btjZAUiYRvsIFTLwQ9Lm",UNSAFE_METHODS=["eth_sendTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","eth_getEncryptionPublicKey","eth_decrypt"],isLocalStorageAvailable=function storageAvailable(type){let storage;try{storage=window[type];const x="__storage_test__";return storage.setItem(x,x),storage.removeItem(x),!0}catch(e){return e&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&storage&&0!==storage.length}}("localStorage");!async function preLoadIframe(){try{if("undefined"==typeof document)return;const torusIframeHtml=document.createElement("link"),{torusUrl}=await getTorusUrl("production",{check:!1,hash:iframeIntegrity,version:""});torusIframeHtml.href="".concat(torusUrl,"/popup"),torusIframeHtml.crossOrigin="anonymous",torusIframeHtml.type="text/html",torusIframeHtml.rel="prefetch",torusIframeHtml.relList&&torusIframeHtml.relList.supports&&torusIframeHtml.relList.supports("prefetch")&&document.head.appendChild(torusIframeHtml)}catch(error){torus_esm_log.warn(error)}}();class Torus{constructor(){let{buttonPosition=BUTTON_POSITION.BOTTOM_LEFT,modalZIndex=99999,apiKey="torus-default"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,defineProperty.Z)(this,"buttonPosition",BUTTON_POSITION.BOTTOM_LEFT),(0,defineProperty.Z)(this,"torusUrl",void 0),(0,defineProperty.Z)(this,"torusIframe",void 0),(0,defineProperty.Z)(this,"styleLink",void 0),(0,defineProperty.Z)(this,"isLoggedIn",void 0),(0,defineProperty.Z)(this,"isInitialized",void 0),(0,defineProperty.Z)(this,"torusWidgetVisibility",void 0),(0,defineProperty.Z)(this,"torusAlert",void 0),(0,defineProperty.Z)(this,"nodeDetailManager",void 0),(0,defineProperty.Z)(this,"torusJs",void 0),(0,defineProperty.Z)(this,"apiKey",void 0),(0,defineProperty.Z)(this,"modalZIndex",void 0),(0,defineProperty.Z)(this,"alertZIndex",void 0),(0,defineProperty.Z)(this,"torusAlertContainer",void 0),(0,defineProperty.Z)(this,"isIframeFullScreen",void 0),(0,defineProperty.Z)(this,"whiteLabel",void 0),(0,defineProperty.Z)(this,"requestedVerifier",void 0),(0,defineProperty.Z)(this,"currentVerifier",void 0),(0,defineProperty.Z)(this,"embedTranslations",void 0),(0,defineProperty.Z)(this,"ethereum",void 0),(0,defineProperty.Z)(this,"provider",void 0),(0,defineProperty.Z)(this,"communicationMux",void 0),(0,defineProperty.Z)(this,"isLoginCallback",void 0),(0,defineProperty.Z)(this,"dappStorageKey",void 0),(0,defineProperty.Z)(this,"paymentProviders",configuration.paymentProviders),(0,defineProperty.Z)(this,"loginHint",""),(0,defineProperty.Z)(this,"useWalletConnect",void 0),this.buttonPosition=buttonPosition,this.torusUrl="",this.isLoggedIn=!1,this.isInitialized=!1,this.torusWidgetVisibility=!0,this.requestedVerifier="",this.currentVerifier="",this.nodeDetailManager=new NodeDetailManager,this.torusJs=new torusUtils_esm_Torus({metadataHost:"https://metadata.tor.us",allowHost:"https://signer.tor.us/api/allow",network:"mainnet"}),this.apiKey=apiKey,torusUtils_esm_Torus.setAPIKey(apiKey),(0,httpHelpers_esm.ut)(apiKey),this.modalZIndex=modalZIndex,this.alertZIndex=modalZIndex+1e3,this.isIframeFullScreen=!1,this.dappStorageKey=""}async init(){let{buildEnv=TORUS_BUILD_ENV.PRODUCTION,enableLogging=!1,enabledVerifiers=defaultVerifiers,network={host:"mainnet",chainId:null,networkName:"",blockExplorer:"",ticker:"",tickerName:""},loginConfig={},showTorusButton=!0,integrity={check:!1,hash:iframeIntegrity,version:""},whiteLabel,skipTKey=!1,useLocalStorage=!1,useWalletConnect=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl,logLevel}=await getTorusUrl(buildEnv,integrity);torus_esm_log.info(torusUrl,"url loaded"),this.torusUrl=torusUrl,this.whiteLabel=whiteLabel,this.useWalletConnect=useWalletConnect,torus_esm_log.setDefaultLevel(logLevel),enableLogging?torus_esm_log.enableAll():torus_esm_log.disableAll(),this.torusWidgetVisibility=showTorusButton;let dappStorageKey="";if(isLocalStorageAvailable&&useLocalStorage){const localStorageKey="".concat(configuration.localStorageKeyPrefix).concat(window.location.hostname),storedKey=window.localStorage.getItem(localStorageKey);if(storedKey)dappStorageKey=storedKey;else{const generatedKey="torus-app-".concat(getPreopenInstanceId());window.localStorage.setItem(localStorageKey,generatedKey),dappStorageKey=generatedKey}}this.dappStorageKey=dappStorageKey;const torusIframeUrl=new URL(torusUrl);torusIframeUrl.pathname.endsWith("/")?torusIframeUrl.pathname+="popup":torusIframeUrl.pathname+="/popup",dappStorageKey&&(torusIframeUrl.hash="#dappStorageKey=".concat(dappStorageKey)),this.torusIframe=htmlToElement('<iframe\n        id="torusIframe"\n        allow='.concat(useWalletConnect?"camera":"",'\n        class="torusIframe"\n        src="').concat(torusIframeUrl.href,'"\n        style="display: none; position: fixed; top: 0; right: 0; width: 100%;\n        height: 100%; border: none; border-radius: 0; z-index: ').concat(this.modalZIndex,'"\n      ></iframe>')),this.torusAlertContainer=htmlToElement('<div id="torusAlertContainer"></div>'),this.torusAlertContainer.style.display="none",this.torusAlertContainer.style.setProperty("z-index",this.alertZIndex.toString());const link=window.document.createElement("link");link.setAttribute("rel","stylesheet"),link.setAttribute("type","text/css"),link.setAttribute("href","".concat(torusUrl,"/css/widget.css")),this.styleLink=link;const{defaultLanguage=getUserLanguage(),customTranslations={}}=this.whiteLabel||{},languageTranslations=lodash_merge_default()(configuration.translations,customTranslations)[defaultLanguage]||configuration.translations[getUserLanguage()];this.embedTranslations=languageTranslations.embed;const handleSetup=async()=>(await documentReady(),new Promise(((resolve,reject)=>{this.torusIframe.onload=async()=>{this._setupWeb3();const initStream=this.communicationMux.getStream("init_stream");initStream.on("data",(chunk=>{const{name,data,error}=chunk;"init_complete"===name&&data.success?(this.isInitialized=!0,this._displayIframe(this.isIframeFullScreen),resolve(void 0)):error&&reject(new Error(error))})),initStream.write({name:"init_stream",data:{enabledVerifiers,loginConfig,whiteLabel:this.whiteLabel,buttonPosition:this.buttonPosition,torusWidgetVisibility:this.torusWidgetVisibility,apiKey:this.apiKey,skipTKey,network}})},window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)})));if("production"===buildEnv&&integrity.check){const fetchUrl="".concat(torusUrl,"/popup"),resp=await fetch(fetchUrl,{cache:"reload"});if("max-age=3600"!==resp.headers.get("Cache-Control"))throw new Error("Unexpected Cache-Control headers, got ".concat(resp.headers.get("Cache-Control")));const response=await resp.text(),calculatedIntegrity=main({algorithms:["sha384"]},response);if(torus_esm_log.info(calculatedIntegrity,"integrity"),calculatedIntegrity!==integrity.hash)throw this.clearInit(),new Error("Integrity check failed");await handleSetup()}else await handleSetup()}login(){let{verifier="",login_hint:loginHint=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");return this.requestedVerifier=verifier,this.loginHint=loginHint,this.ethereum.enable()}logout(){return new Promise(((resolve,reject)=>{if(!this.isLoggedIn)return void reject(new Error("User has not logged in yet"));this.communicationMux.getStream("logout").write({name:"logOut"});const statusStream=this.communicationMux.getStream("status");handleStream(statusStream,"data",(status=>{status.loggedIn?reject(new Error("Some Error Occured")):(this.isLoggedIn=!1,this.currentVerifier="",this.requestedVerifier="",resolve())}))}))}async cleanUp(){this.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function isElement(element){return element instanceof Element||element instanceof HTMLDocument}isElement(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),isElement(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),isElement(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.torusWidgetVisibility=!1,this._sendWidgetVisibilityStatus(!1),this._displayIframe()}showTorusButton(){this.torusWidgetVisibility=!0,this._sendWidgetVisibilityStatus(!0),this._displayIframe()}setProvider(){let _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{host="mainnet",chainId=null,networkName=""}=_ref,rest=(0,objectWithoutProperties.Z)(_ref,_excluded);return new Promise(((resolve,reject)=>{const providerChangeStream=this.communicationMux.getStream("provider_change");handleStream(providerChangeStream,"data",(chunk=>{const{err,success}=chunk.data;torus_esm_log.info(chunk),err?reject(err):success?resolve():reject(new Error("some error occured"))}));const preopenInstanceId=getPreopenInstanceId();this._handleWindow(preopenInstanceId,{target:"_blank",features:"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=660,width=375"}),providerChangeStream.write({name:"show_provider_change",data:{network:torus_esm_objectSpread({host,chainId,networkName},rest),preopenInstanceId,override:!1}})}))}showWallet(path){let params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const showWalletStream=this.communicationMux.getStream("show_wallet"),finalPath=path?"/".concat(path):"";showWalletStream.write({name:"show_wallet",data:{path:finalPath}});handleStream(showWalletStream,"data",(chunk=>{if("show_wallet_instance"===chunk.name){const{instanceId}=chunk.data,finalUrl=new URL("".concat(this.torusUrl,"/wallet").concat(finalPath));finalUrl.searchParams.append("integrity","true"),finalUrl.searchParams.append("instanceId",instanceId),Object.keys(params).forEach((x=>{finalUrl.searchParams.append(x,params[x])})),this.dappStorageKey&&(finalUrl.hash="#dappStorageKey=".concat(this.dappStorageKey));new PopupHandler({url:finalUrl,features:"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=740,width=1315"}).open()}}))}async getPublicAddress(_ref2){let{verifier,verifierId,isExtended=!1}=_ref2;if(!configuration.supportedVerifierList.includes(verifier)||!WALLET_OPENLOGIN_VERIFIER_MAP[verifier])throw new Error("Unsupported verifier");const nodeDetails=await this.nodeDetailManager.getNodeDetails({verifier,verifierId}),endpoints=nodeDetails.torusNodeEndpoints,torusNodePubs=nodeDetails.torusNodePub,walletVerifier=verifier,openloginVerifier=WALLET_OPENLOGIN_VERIFIER_MAP[verifier];try{const existingV1User=await this.torusJs.getUserTypeAndAddress(endpoints,torusNodePubs,{verifier:walletVerifier,verifierId});if("v1"===existingV1User.typeOfUser)return isExtended?existingV1User:existingV1User.address;const v2User=await this.torusJs.getUserTypeAndAddress(endpoints,torusNodePubs,{verifier:openloginVerifier,verifierId},!0);return isExtended?v2User:v2User.address}catch(error){if(null!=error&&error.message.includes("Verifier + VerifierID has not yet been assigned")){const newV2User=await this.torusJs.getUserTypeAndAddress(endpoints,torusNodePubs,{verifier:openloginVerifier,verifierId},!0);return isExtended?newV2User:newV2User.address}throw error}}getUserInfo(message){return new Promise(((resolve,reject)=>{if(this.isLoggedIn){const userInfoAccessStream=this.communicationMux.getStream("user_info_access");userInfoAccessStream.write({name:"user_info_access_request"});const userInfoAccessHandler=chunk=>{const{name,data:{approved,payload,rejected,newRequest}}=chunk;if("user_info_access_response"===name)if(approved)resolve(payload);else if(rejected)reject(new Error("User rejected the request"));else if(newRequest){const userInfoStream=this.communicationMux.getStream("user_info");handleStream(userInfoStream,"data",(handlerChunk=>{"user_info_response"===handlerChunk.name&&(handlerChunk.data.approved?resolve(handlerChunk.data.payload):reject(new Error("User rejected the request")))}));const preopenInstanceId=getPreopenInstanceId();this._handleWindow(preopenInstanceId,{target:"_blank",features:"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=660,width=375"}),userInfoStream.write({name:"user_info_request",data:{message,preopenInstanceId}})}};handleStream(userInfoAccessStream,"data",userInfoAccessHandler)}else reject(new Error("User has not logged in yet"))}))}initiateTopup(provider,params){return new Promise(((resolve,reject)=>{if(this.isInitialized){const{errors,isValid}=((provider,params)=>{const errors={};if(!provider)return{errors,isValid:!0};if(provider&&!paymentProviders[provider])return errors.provider="Invalid Provider",{errors,isValid:0===Object.keys(errors).length};const selectedProvider=paymentProviders[provider],selectedParams=params||{};if(selectedParams.fiatValue){const requestedOrderAmount=+parseFloat(selectedParams.fiatValue.toString())||0;requestedOrderAmount<selectedProvider.minOrderValue&&(errors.fiatValue="Requested amount is lower than supported"),requestedOrderAmount>selectedProvider.maxOrderValue&&selectedProvider.enforceMax&&(errors.fiatValue="Requested amount is higher than supported")}return selectedParams.selectedCurrency&&!selectedProvider.validCurrencies.includes(selectedParams.selectedCurrency)&&(errors.selectedCurrency="Unsupported currency"),selectedParams.selectedCryptoCurrency&&!selectedProvider.validCryptoCurrencies.includes(selectedParams.selectedCryptoCurrency)&&(errors.selectedCryptoCurrency="Unsupported cryptoCurrency"),{errors,isValid:0===Object.keys(errors).length}})(provider,params);if(!isValid)return void reject(new Error(JSON.stringify(errors)));const topupStream=this.communicationMux.getStream("topup");handleStream(topupStream,"data",(chunk=>{"topup_response"===chunk.name&&(chunk.data.success?resolve(chunk.data.success):reject(new Error(chunk.data.error)))}));const preopenInstanceId=getPreopenInstanceId();this._handleWindow(preopenInstanceId),topupStream.write({name:"topup_request",data:{provider,params,preopenInstanceId}})}else reject(new Error("Torus is not initialized yet"))}))}async loginWithPrivateKey(loginParams){const{privateKey,userInfo}=loginParams;return new Promise(((resolve,reject)=>{if(this.isInitialized){if(32!==torus_esm_Buffer.from(privateKey,"hex").length)return void reject(new Error("Invalid private key, Please provide a 32 byte valid secp25k1 private key"));const loginPrivKeyStream=this.communicationMux.getStream("login_with_private_key");handleStream(loginPrivKeyStream,"data",(chunk=>{"login_with_private_key_response"===chunk.name&&(chunk.data.success?resolve(chunk.data.success):reject(new Error(chunk.data.error)))})),loginPrivKeyStream.write({name:"login_with_private_key_request",data:{privateKey,userInfo}})}else reject(new Error("Torus is not initialized yet"))}))}async showWalletConnectScanner(){if(!this.useWalletConnect)throw new Error("Set `useWalletConnect` as true in init function options to use wallet connect scanner");return new Promise(((resolve,reject)=>{if(this.isLoggedIn){const walletConnectStream=this.communicationMux.getStream("wallet_connect_stream");handleStream(walletConnectStream,"data",(chunk=>{"wallet_connect_stream_res"===chunk.name&&(chunk.data.success?resolve(chunk.data.success):reject(new Error(chunk.data.error)),this._displayIframe())})),walletConnectStream.write({name:"wallet_connect_stream_req"}),this._displayIframe(!0)}else reject(new Error("User has not logged in yet"))}))}_handleWindow(preopenInstanceId){let{url,target,features}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(preopenInstanceId){const windowStream=this.communicationMux.getStream("window"),finalUrl=new URL(url||"".concat(this.torusUrl,"/redirect?preopenInstanceId=").concat(preopenInstanceId));this.dappStorageKey&&(finalUrl.hash?finalUrl.hash+="&dappStorageKey=".concat(this.dappStorageKey):finalUrl.hash="#dappStorageKey=".concat(this.dappStorageKey));const handledWindow=new PopupHandler({url:finalUrl,target,features});if(handledWindow.open(),!handledWindow.window)return void this._createPopupBlockAlert(preopenInstanceId,finalUrl.href);windowStream.write({name:"opened_window",data:{preopenInstanceId}});const closeHandler=_ref3=>{let{preopenInstanceId:receivedId,close}=_ref3;receivedId===preopenInstanceId&&close&&(handledWindow.close(),windowStream.removeListener("data",closeHandler))};windowStream.on("data",closeHandler),handledWindow.once("close",(()=>{windowStream.write({data:{preopenInstanceId,closed:!0}}),windowStream.removeListener("data",closeHandler)}))}}_setEmbedWhiteLabel(element){const{theme}=this.whiteLabel||{};if(theme){const{isDark=!1,colors={}}=theme;isDark&&element.classList.add("torus-dark"),colors.torusBrand1&&element.style.setProperty("--torus-brand-1",colors.torusBrand1),colors.torusGray2&&element.style.setProperty("--torus-gray-2",colors.torusGray2)}}_getLogoUrl(){var _this$whiteLabel,_this$whiteLabel$them;let logoUrl="".concat(this.torusUrl,"/images/torus_icon-blue.svg");var _this$whiteLabel2,_this$whiteLabel3;null!==(_this$whiteLabel=this.whiteLabel)&&void 0!==_this$whiteLabel&&null!==(_this$whiteLabel$them=_this$whiteLabel.theme)&&void 0!==_this$whiteLabel$them&&_this$whiteLabel$them.isDark?logoUrl=(null===(_this$whiteLabel2=this.whiteLabel)||void 0===_this$whiteLabel2?void 0:_this$whiteLabel2.logoLight)||logoUrl:logoUrl=(null===(_this$whiteLabel3=this.whiteLabel)||void 0===_this$whiteLabel3?void 0:_this$whiteLabel3.logoDark)||logoUrl;return logoUrl}_sendWidgetVisibilityStatus(status){this.communicationMux.getStream("torus-widget-visibility").write({data:status})}_displayIframe(){let isFull=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const style={};if(isFull)style.display="block",style.width="100%",style.height="100%",style.top="0px",style.right="0px",style.left="0px",style.bottom="0px";else switch(style.display=this.torusWidgetVisibility?"block":"none",style.height="70px",style.width="70px",this.buttonPosition){case BUTTON_POSITION.TOP_LEFT:style.top="0px",style.left="0px",style.right="auto",style.bottom="auto";break;case BUTTON_POSITION.TOP_RIGHT:style.top="0px",style.right="0px",style.left="auto",style.bottom="auto";break;case BUTTON_POSITION.BOTTOM_RIGHT:style.bottom="0px",style.right="0px",style.top="auto",style.left="auto";break;case BUTTON_POSITION.BOTTOM_LEFT:default:style.bottom="0px",style.left="0px",style.top="auto",style.right="auto"}Object.assign(this.torusIframe.style,style),this.isIframeFullScreen=isFull}_setupWeb3(){torus_esm_log.info("setupWeb3 running");const metamaskStream=new openloginJrpc_esm.XR({name:"embed_metamask",target:"iframe_metamask",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),communicationStream=new openloginJrpc_esm.XR({name:"embed_comm",target:"iframe_comm",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),inpageProvider=new TorusInpageProvider(metamaskStream),detectAccountRequestPrototypeModifier=m=>{const originalMethod=inpageProvider[m];inpageProvider[m]=function providerFunc(method){if(method&&"eth_requestAccounts"===method)return inpageProvider.enable();for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return originalMethod.apply(this,[method,...args])}};detectAccountRequestPrototypeModifier("send"),detectAccountRequestPrototypeModifier("sendAsync"),inpageProvider.enable=()=>new Promise(((resolve,reject)=>{inpageProvider.sendAsync({jsonrpc:"2.0",id:getPreopenInstanceId(),method:"eth_requestAccounts",params:[]},((err,response)=>{const{result:res}=response||{};if(err)setTimeout((()=>{reject(err)}),50);else if(Array.isArray(res)&&res.length>0){const handleLoginCb=()=>{if(""!==this.requestedVerifier&&this.currentVerifier!==this.requestedVerifier){const{requestedVerifier}=this;this.logout().then((_=>{this.requestedVerifier=requestedVerifier,this._showLoginPopup(!0,resolve,reject)})).catch((error=>reject(error)))}else resolve(res)};this.isLoggedIn?handleLoginCb():this.isLoginCallback=handleLoginCb}else this._showLoginPopup(!0,resolve,reject)}))})),inpageProvider.tryPreopenHandle=(payload,cb)=>{const _payload=payload;if(!Array.isArray(_payload)&&UNSAFE_METHODS.includes(_payload.method)){const preopenInstanceId=getPreopenInstanceId();this._handleWindow(preopenInstanceId,{target:"_blank",features:FEATURES_CONFIRM_WINDOW}),_payload.preopenInstanceId=preopenInstanceId}inpageProvider._rpcEngine.handle(_payload,cb)};const proxiedInpageProvider=new Proxy(inpageProvider,{deleteProperty:()=>!0});this.ethereum=proxiedInpageProvider;const communicationMux=(0,openloginJrpc_esm.V2)(communicationStream);this.communicationMux=communicationMux;communicationMux.getStream("window").on("data",(chunk=>{"create_window"===chunk.name&&this._createPopupBlockAlert(chunk.data.preopenInstanceId,chunk.data.url)}));communicationMux.getStream("widget").on("data",(chunk=>{const{data}=chunk;this._displayIframe(data)}));communicationMux.getStream("status").on("data",(status=>{status.loggedIn?(this.isLoggedIn=status.loggedIn,this.currentVerifier=status.verifier):this._displayIframe(),this.isLoginCallback&&(this.isLoginCallback(),delete this.isLoginCallback)})),this.provider=proxiedInpageProvider,this.provider.shouldSendMetadata&&sendSiteMetadata(this.provider._rpcEngine),inpageProvider._initializeState(),torus_esm_log.debug("Torus - injected provider")}_showLoginPopup(calledFromEmbed,resolve,reject){const loginHandler=data=>{const{err,selectedAddress}=data;err?(torus_esm_log.error(err),reject&&reject(err)):resolve&&resolve([selectedAddress]),this.isIframeFullScreen&&this._displayIframe()},oauthStream=this.communicationMux.getStream("oauth");if(this.requestedVerifier){handleStream(oauthStream,"data",loginHandler);const preopenInstanceId=getPreopenInstanceId();this._handleWindow(preopenInstanceId),oauthStream.write({name:"oauth",data:{calledFromEmbed,verifier:this.requestedVerifier,preopenInstanceId,login_hint:this.loginHint}})}else this._displayIframe(!0),handleStream(oauthStream,"data",loginHandler),oauthStream.write({name:"oauth_modal",data:{calledFromEmbed}})}_createPopupBlockAlert(preopenInstanceId,url){const logoUrl=this._getLogoUrl(),torusAlert=htmlToElement('<div id="torusAlert" class="torus-alert--v2">'+'<div id="torusAlert__logo"><img src="'.concat(logoUrl,'" /></div>')+"<div>"+'<h1 id="torusAlert__title">'.concat(this.embedTranslations.actionRequired,"</h1>")+'<p id="torusAlert__desc">'.concat(this.embedTranslations.pendingAction,"</p>")+"</div></div>"),successAlert=htmlToElement('<div><a id="torusAlert__btn">'.concat(this.embedTranslations.continue,"</a></div>")),btnContainer=htmlToElement('<div id="torusAlert__btn-container"></div>');btnContainer.appendChild(successAlert),torusAlert.appendChild(btnContainer);this._setEmbedWhiteLabel(torusAlert);runOnLoad((()=>{this.torusAlertContainer.style.display="block",this.torusAlertContainer.appendChild(torusAlert)})),runOnLoad((()=>{successAlert.addEventListener("click",(()=>{this._handleWindow(preopenInstanceId,{url,target:"_blank",features:FEATURES_CONFIRM_WINDOW}),torusAlert.remove(),0===this.torusAlertContainer.children.length&&(this.torusAlertContainer.style.display="none")}))}))}}var base_esm=__webpack_require__("./node_modules/.pnpm/@web3auth+base@1.1.1_@babel+runtime@7.18.3/node_modules/@web3auth/base/dist/base.esm.js");function torusEvmAdapter_esm_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function torusEvmAdapter_esm_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?torusEvmAdapter_esm_ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):torusEvmAdapter_esm_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}class TorusWalletAdapter extends base_esm.J5{constructor(){let params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),(0,defineProperty.Z)(this,"name",base_esm.rW.TORUS_EVM),(0,defineProperty.Z)(this,"adapterNamespace",base_esm.yk.EIP155),(0,defineProperty.Z)(this,"currentChainNamespace",base_esm.EN.EIP155),(0,defineProperty.Z)(this,"type",base_esm.hN.EXTERNAL),(0,defineProperty.Z)(this,"status",base_esm.MP.NOT_READY),(0,defineProperty.Z)(this,"torusInstance",null),(0,defineProperty.Z)(this,"torusWalletOptions",void 0),(0,defineProperty.Z)(this,"initParams",void 0),(0,defineProperty.Z)(this,"loginSettings",{}),(0,defineProperty.Z)(this,"rehydrated",!1),this.torusWalletOptions=params.adapterSettings||{},this.initParams=params.initParams||{},this.loginSettings=params.loginSettings||{},this.chainConfig=params.chainConfig||null}get provider(){return this.status===base_esm.MP.CONNECTED&&this.torusInstance?this.torusInstance.provider:null}set provider(_){throw new Error("Not implemented")}async init(options){let network;if(super.checkInitializationRequirements(),this.chainConfig){const{chainId,blockExplorer,displayName,rpcTarget}=this.chainConfig;network={chainId:parseInt(chainId,16),host:rpcTarget,blockExplorer,networkName:displayName}}else{this.chainConfig=(0,base_esm.h2)(base_esm.EN.EIP155,1);const{blockExplorer,displayName}=this.chainConfig;network={chainId:1,host:"mainnet",blockExplorer,networkName:displayName}}this.torusInstance=new Torus(this.torusWalletOptions),base_esm.cM.debug("initializing torus evm adapter init"),await this.torusInstance.init(torusEvmAdapter_esm_objectSpread(torusEvmAdapter_esm_objectSpread({showTorusButton:!1},this.initParams),{},{network})),this.status=base_esm.MP.READY,this.emit(base_esm.n2.READY,base_esm.rW.TORUS_EVM);try{base_esm.cM.debug("initializing torus evm adapter"),options.autoConnect&&(this.rehydrated=!0,await this.connect())}catch(error){base_esm.cM.error("Failed to connect with torus evm provider",error),this.emit(base_esm.n2.ERRORED,error)}}async connect(){if(super.checkConnectionRequirements(),!this.torusInstance)throw base_esm.Ty.notReady("Torus wallet is not initialized");this.status=base_esm.MP.CONNECTING,this.emit(base_esm.n2.CONNECTING,{adapter:base_esm.rW.TORUS_EVM});try{await this.torusInstance.login(this.loginSettings);const{chainId}=this.torusInstance.provider;if(chainId&&parseInt(chainId)!==parseInt(this.chainConfig.chainId,16)){const{chainId:_chainId,blockExplorer,displayName,rpcTarget,ticker,tickerName}=this.chainConfig,network={chainId:_chainId,host:rpcTarget,blockExplorerUrl:blockExplorer,networkName:displayName,tickerName,ticker,logo:""};await this.torusInstance.setProvider(torusEvmAdapter_esm_objectSpread({},network));const updatedChainID=await this.torusInstance.ethereum.request({method:"eth_chainId"});if(updatedChainID&&parseInt(updatedChainID)!==parseInt(this.chainConfig.chainId,16))throw base_esm.Ty.fromCode(5e3,"Not connected to correct chainId. Expected: ".concat(this.chainConfig.chainId,", Current: ").concat(updatedChainID))}return this.status=base_esm.MP.CONNECTED,this.torusInstance.showTorusButton(),this.emit(base_esm.MP.CONNECTED,{adapter:base_esm.rW.TORUS_EVM,reconnected:this.rehydrated}),this.provider}catch(error){throw this.status=base_esm.MP.READY,this.rehydrated=!1,this.emit(base_esm.MP.ERRORED,error),error instanceof base_esm.up?error:base_esm.RM.connectionError("Failed to login with torus wallet")}}async disconnect(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cleanup:!1};if(this.status!==base_esm.MP.CONNECTED)throw base_esm.RM.notConnectedError("Not connected with wallet");if(!this.torusInstance)throw base_esm.Ty.notReady("Torus wallet is not initialized");await this.torusInstance.logout(),this.torusInstance.hideTorusButton(),options.cleanup?(this.status=base_esm.MP.NOT_READY,this.torusInstance=null):this.status=base_esm.MP.READY,this.rehydrated=!1,this.emit(base_esm.n2.DISCONNECTED)}async getUserInfo(){if(this.status!==base_esm.MP.CONNECTED)throw base_esm.RM.notConnectedError("Not connected with wallet");if(!this.torusInstance)throw base_esm.Ty.notReady("Torus wallet is not initialized");return await this.torusInstance.getUserInfo("")}setAdapterSettings(_){}}},"./node_modules/.pnpm/bn.js@4.11.6/node_modules/bn.js/lib/bn.js":function(module,__unused_webpack_exports,__webpack_require__){!function(module,exports){"use strict";function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")}function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}function BN(number,base,endian){if(BN.isBN(number))return number;this.negative=0,this.words=null,this.length=0,this.red=null,null!==number&&("le"!==base&&"be"!==base||(endian=base,base=10),this._init(number||0,base||10,endian||"be"))}var Buffer;"object"==typeof module?module.exports=BN:exports.BN=BN,BN.BN=BN,BN.wordSize=26;try{Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer}catch(e){}function parseHex(str,start,end){for(var r=0,len=Math.min(str.length,end),i=start;i<len;i++){var c=str.charCodeAt(i)-48;r<<=4,r|=c>=49&&c<=54?c-49+10:c>=17&&c<=22?c-17+10:15&c}return r}function parseBase(str,start,end,mul){for(var r=0,len=Math.min(str.length,end),i=start;i<len;i++){var c=str.charCodeAt(i)-48;r*=mul,r+=c>=49?c-49+10:c>=17?c-17+10:c}return r}BN.isBN=function isBN(num){return num instanceof BN||null!==num&&"object"==typeof num&&num.constructor.wordSize===BN.wordSize&&Array.isArray(num.words)},BN.max=function max(left,right){return left.cmp(right)>0?left:right},BN.min=function min(left,right){return left.cmp(right)<0?left:right},BN.prototype._init=function init(number,base,endian){if("number"==typeof number)return this._initNumber(number,base,endian);if("object"==typeof number)return this._initArray(number,base,endian);"hex"===base&&(base=16),assert(base===(0|base)&&base>=2&&base<=36);var start=0;"-"===(number=number.toString().replace(/\s+/g,""))[0]&&start++,16===base?this._parseHex(number,start):this._parseBase(number,base,start),"-"===number[0]&&(this.negative=1),this.strip(),"le"===endian&&this._initArray(this.toArray(),base,endian)},BN.prototype._initNumber=function _initNumber(number,base,endian){number<0&&(this.negative=1,number=-number),number<67108864?(this.words=[67108863&number],this.length=1):number<4503599627370496?(this.words=[67108863&number,number/67108864&67108863],this.length=2):(assert(number<9007199254740992),this.words=[67108863&number,number/67108864&67108863,1],this.length=3),"le"===endian&&this._initArray(this.toArray(),base,endian)},BN.prototype._initArray=function _initArray(number,base,endian){if(assert("number"==typeof number.length),number.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(number.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var j,w,off=0;if("be"===endian)for(i=number.length-1,j=0;i>=0;i-=3)w=number[i]|number[i-1]<<8|number[i-2]<<16,this.words[j]|=w<<off&67108863,this.words[j+1]=w>>>26-off&67108863,(off+=24)>=26&&(off-=26,j++);else if("le"===endian)for(i=0,j=0;i<number.length;i+=3)w=number[i]|number[i+1]<<8|number[i+2]<<16,this.words[j]|=w<<off&67108863,this.words[j+1]=w>>>26-off&67108863,(off+=24)>=26&&(off-=26,j++);return this.strip()},BN.prototype._parseHex=function _parseHex(number,start){this.length=Math.ceil((number.length-start)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var j,w,off=0;for(i=number.length-6,j=0;i>=start;i-=6)w=parseHex(number,i,i+6),this.words[j]|=w<<off&67108863,this.words[j+1]|=w>>>26-off&4194303,(off+=24)>=26&&(off-=26,j++);i+6!==start&&(w=parseHex(number,start,i+6),this.words[j]|=w<<off&67108863,this.words[j+1]|=w>>>26-off&4194303),this.strip()},BN.prototype._parseBase=function _parseBase(number,base,start){this.words=[0],this.length=1;for(var limbLen=0,limbPow=1;limbPow<=67108863;limbPow*=base)limbLen++;limbLen--,limbPow=limbPow/base|0;for(var total=number.length-start,mod=total%limbLen,end=Math.min(total,total-mod)+start,word=0,i=start;i<end;i+=limbLen)word=parseBase(number,i,i+limbLen,base),this.imuln(limbPow),this.words[0]+word<67108864?this.words[0]+=word:this._iaddn(word);if(0!==mod){var pow=1;for(word=parseBase(number,i,number.length,base),i=0;i<mod;i++)pow*=base;this.imuln(pow),this.words[0]+word<67108864?this.words[0]+=word:this._iaddn(word)}},BN.prototype.copy=function copy(dest){dest.words=new Array(this.length);for(var i=0;i<this.length;i++)dest.words[i]=this.words[i];dest.length=this.length,dest.negative=this.negative,dest.red=this.red},BN.prototype.clone=function clone(){var r=new BN(null);return this.copy(r),r},BN.prototype._expand=function _expand(size){for(;this.length<size;)this.words[this.length++]=0;return this},BN.prototype.strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var zeros=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],groupSizes=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],groupBases=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(self,num,out){out.negative=num.negative^self.negative;var len=self.length+num.length|0;out.length=len,len=len-1|0;var a=0|self.words[0],b=0|num.words[0],r=a*b,lo=67108863&r,carry=r/67108864|0;out.words[0]=lo;for(var k=1;k<len;k++){for(var ncarry=carry>>>26,rword=67108863&carry,maxJ=Math.min(k,num.length-1),j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j|0;ncarry+=(r=(a=0|self.words[i])*(b=0|num.words[j])+rword)/67108864|0,rword=67108863&r}out.words[k]=0|rword,carry=0|ncarry}return 0!==carry?out.words[k]=0|carry:out.length--,out.strip()}BN.prototype.toString=function toString(base,padding){var out;if(padding=0|padding||1,16===(base=base||10)||"hex"===base){out="";for(var off=0,carry=0,i=0;i<this.length;i++){var w=this.words[i],word=(16777215&(w<<off|carry)).toString(16);out=0!==(carry=w>>>24-off&16777215)||i!==this.length-1?zeros[6-word.length]+word+out:word+out,(off+=2)>=26&&(off-=26,i--)}for(0!==carry&&(out=carry.toString(16)+out);out.length%padding!=0;)out="0"+out;return 0!==this.negative&&(out="-"+out),out}if(base===(0|base)&&base>=2&&base<=36){var groupSize=groupSizes[base],groupBase=groupBases[base];out="";var c=this.clone();for(c.negative=0;!c.isZero();){var r=c.modn(groupBase).toString(base);out=(c=c.idivn(groupBase)).isZero()?r+out:zeros[groupSize-r.length]+r+out}for(this.isZero()&&(out="0"+out);out.length%padding!=0;)out="0"+out;return 0!==this.negative&&(out="-"+out),out}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var ret=this.words[0];return 2===this.length?ret+=67108864*this.words[1]:3===this.length&&1===this.words[2]?ret+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-ret:ret},BN.prototype.toJSON=function toJSON(){return this.toString(16)},BN.prototype.toBuffer=function toBuffer(endian,length){return assert(void 0!==Buffer),this.toArrayLike(Buffer,endian,length)},BN.prototype.toArray=function toArray(endian,length){return this.toArrayLike(Array,endian,length)},BN.prototype.toArrayLike=function toArrayLike(ArrayType,endian,length){var byteLength=this.byteLength(),reqLength=length||Math.max(1,byteLength);assert(byteLength<=reqLength,"byte array longer than desired length"),assert(reqLength>0,"Requested array length <= 0"),this.strip();var b,i,littleEndian="le"===endian,res=new ArrayType(reqLength),q=this.clone();if(littleEndian){for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),res[i]=b;for(;i<reqLength;i++)res[i]=0}else{for(i=0;i<reqLength-byteLength;i++)res[i]=0;for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),res[reqLength-i-1]=b}return res},Math.clz32?BN.prototype._countBits=function _countBits(w){return 32-Math.clz32(w)}:BN.prototype._countBits=function _countBits(w){var t=w,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},BN.prototype._zeroBits=function _zeroBits(w){if(0===w)return 26;var t=w,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},BN.prototype.bitLength=function bitLength(){var w=this.words[this.length-1],hi=this._countBits(w);return 26*(this.length-1)+hi},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;for(var r=0,i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);if(r+=b,26!==b)break}return r},BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(width){return 0!==this.negative?this.abs().inotn(width).iaddn(1):this.clone()},BN.prototype.fromTwos=function fromTwos(width){return this.testn(width-1)?this.notn(width).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return 0!==this.negative},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function iuor(num){for(;this.length<num.length;)this.words[this.length++]=0;for(var i=0;i<num.length;i++)this.words[i]=this.words[i]|num.words[i];return this.strip()},BN.prototype.ior=function ior(num){return assert(0==(this.negative|num.negative)),this.iuor(num)},BN.prototype.or=function or(num){return this.length>num.length?this.clone().ior(num):num.clone().ior(this)},BN.prototype.uor=function uor(num){return this.length>num.length?this.clone().iuor(num):num.clone().iuor(this)},BN.prototype.iuand=function iuand(num){var b;b=this.length>num.length?num:this;for(var i=0;i<b.length;i++)this.words[i]=this.words[i]&num.words[i];return this.length=b.length,this.strip()},BN.prototype.iand=function iand(num){return assert(0==(this.negative|num.negative)),this.iuand(num)},BN.prototype.and=function and(num){return this.length>num.length?this.clone().iand(num):num.clone().iand(this)},BN.prototype.uand=function uand(num){return this.length>num.length?this.clone().iuand(num):num.clone().iuand(this)},BN.prototype.iuxor=function iuxor(num){var a,b;this.length>num.length?(a=this,b=num):(a=num,b=this);for(var i=0;i<b.length;i++)this.words[i]=a.words[i]^b.words[i];if(this!==a)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=a.length,this.strip()},BN.prototype.ixor=function ixor(num){return assert(0==(this.negative|num.negative)),this.iuxor(num)},BN.prototype.xor=function xor(num){return this.length>num.length?this.clone().ixor(num):num.clone().ixor(this)},BN.prototype.uxor=function uxor(num){return this.length>num.length?this.clone().iuxor(num):num.clone().iuxor(this)},BN.prototype.inotn=function inotn(width){assert("number"==typeof width&&width>=0);var bytesNeeded=0|Math.ceil(width/26),bitsLeft=width%26;this._expand(bytesNeeded),bitsLeft>0&&bytesNeeded--;for(var i=0;i<bytesNeeded;i++)this.words[i]=67108863&~this.words[i];return bitsLeft>0&&(this.words[i]=~this.words[i]&67108863>>26-bitsLeft),this.strip()},BN.prototype.notn=function notn(width){return this.clone().inotn(width)},BN.prototype.setn=function setn(bit,val){assert("number"==typeof bit&&bit>=0);var off=bit/26|0,wbit=bit%26;return this._expand(off+1),this.words[off]=val?this.words[off]|1<<wbit:this.words[off]&~(1<<wbit),this.strip()},BN.prototype.iadd=function iadd(num){var r,a,b;if(0!==this.negative&&0===num.negative)return this.negative=0,r=this.isub(num),this.negative^=1,this._normSign();if(0===this.negative&&0!==num.negative)return num.negative=0,r=this.isub(num),num.negative=1,r._normSign();this.length>num.length?(a=this,b=num):(a=num,b=this);for(var carry=0,i=0;i<b.length;i++)r=(0|a.words[i])+(0|b.words[i])+carry,this.words[i]=67108863&r,carry=r>>>26;for(;0!==carry&&i<a.length;i++)r=(0|a.words[i])+carry,this.words[i]=67108863&r,carry=r>>>26;if(this.length=a.length,0!==carry)this.words[this.length]=carry,this.length++;else if(a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this},BN.prototype.add=function add(num){var res;return 0!==num.negative&&0===this.negative?(num.negative=0,res=this.sub(num),num.negative^=1,res):0===num.negative&&0!==this.negative?(this.negative=0,res=num.sub(this),this.negative=1,res):this.length>num.length?this.clone().iadd(num):num.clone().iadd(this)},BN.prototype.isub=function isub(num){if(0!==num.negative){num.negative=0;var r=this.iadd(num);return num.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(num),this.negative=1,this._normSign();var a,b,cmp=this.cmp(num);if(0===cmp)return this.negative=0,this.length=1,this.words[0]=0,this;cmp>0?(a=this,b=num):(a=num,b=this);for(var carry=0,i=0;i<b.length;i++)carry=(r=(0|a.words[i])-(0|b.words[i])+carry)>>26,this.words[i]=67108863&r;for(;0!==carry&&i<a.length;i++)carry=(r=(0|a.words[i])+carry)>>26,this.words[i]=67108863&r;if(0===carry&&i<a.length&&a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=Math.max(this.length,i),a!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function sub(num){return this.clone().isub(num)};var comb10MulTo=function comb10MulTo(self,num,out){var lo,mid,hi,a=self.words,b=num.words,o=out.words,c=0,a0=0|a[0],al0=8191&a0,ah0=a0>>>13,a1=0|a[1],al1=8191&a1,ah1=a1>>>13,a2=0|a[2],al2=8191&a2,ah2=a2>>>13,a3=0|a[3],al3=8191&a3,ah3=a3>>>13,a4=0|a[4],al4=8191&a4,ah4=a4>>>13,a5=0|a[5],al5=8191&a5,ah5=a5>>>13,a6=0|a[6],al6=8191&a6,ah6=a6>>>13,a7=0|a[7],al7=8191&a7,ah7=a7>>>13,a8=0|a[8],al8=8191&a8,ah8=a8>>>13,a9=0|a[9],al9=8191&a9,ah9=a9>>>13,b0=0|b[0],bl0=8191&b0,bh0=b0>>>13,b1=0|b[1],bl1=8191&b1,bh1=b1>>>13,b2=0|b[2],bl2=8191&b2,bh2=b2>>>13,b3=0|b[3],bl3=8191&b3,bh3=b3>>>13,b4=0|b[4],bl4=8191&b4,bh4=b4>>>13,b5=0|b[5],bl5=8191&b5,bh5=b5>>>13,b6=0|b[6],bl6=8191&b6,bh6=b6>>>13,b7=0|b[7],bl7=8191&b7,bh7=b7>>>13,b8=0|b[8],bl8=8191&b8,bh8=b8>>>13,b9=0|b[9],bl9=8191&b9,bh9=b9>>>13;out.negative=self.negative^num.negative,out.length=19;var w0=(c+(lo=Math.imul(al0,bl0))|0)+((8191&(mid=(mid=Math.imul(al0,bh0))+Math.imul(ah0,bl0)|0))<<13)|0;c=((hi=Math.imul(ah0,bh0))+(mid>>>13)|0)+(w0>>>26)|0,w0&=67108863,lo=Math.imul(al1,bl0),mid=(mid=Math.imul(al1,bh0))+Math.imul(ah1,bl0)|0,hi=Math.imul(ah1,bh0);var w1=(c+(lo=lo+Math.imul(al0,bl1)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh1)|0)+Math.imul(ah0,bl1)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh1)|0)+(mid>>>13)|0)+(w1>>>26)|0,w1&=67108863,lo=Math.imul(al2,bl0),mid=(mid=Math.imul(al2,bh0))+Math.imul(ah2,bl0)|0,hi=Math.imul(ah2,bh0),lo=lo+Math.imul(al1,bl1)|0,mid=(mid=mid+Math.imul(al1,bh1)|0)+Math.imul(ah1,bl1)|0,hi=hi+Math.imul(ah1,bh1)|0;var w2=(c+(lo=lo+Math.imul(al0,bl2)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh2)|0)+Math.imul(ah0,bl2)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh2)|0)+(mid>>>13)|0)+(w2>>>26)|0,w2&=67108863,lo=Math.imul(al3,bl0),mid=(mid=Math.imul(al3,bh0))+Math.imul(ah3,bl0)|0,hi=Math.imul(ah3,bh0),lo=lo+Math.imul(al2,bl1)|0,mid=(mid=mid+Math.imul(al2,bh1)|0)+Math.imul(ah2,bl1)|0,hi=hi+Math.imul(ah2,bh1)|0,lo=lo+Math.imul(al1,bl2)|0,mid=(mid=mid+Math.imul(al1,bh2)|0)+Math.imul(ah1,bl2)|0,hi=hi+Math.imul(ah1,bh2)|0;var w3=(c+(lo=lo+Math.imul(al0,bl3)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh3)|0)+Math.imul(ah0,bl3)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh3)|0)+(mid>>>13)|0)+(w3>>>26)|0,w3&=67108863,lo=Math.imul(al4,bl0),mid=(mid=Math.imul(al4,bh0))+Math.imul(ah4,bl0)|0,hi=Math.imul(ah4,bh0),lo=lo+Math.imul(al3,bl1)|0,mid=(mid=mid+Math.imul(al3,bh1)|0)+Math.imul(ah3,bl1)|0,hi=hi+Math.imul(ah3,bh1)|0,lo=lo+Math.imul(al2,bl2)|0,mid=(mid=mid+Math.imul(al2,bh2)|0)+Math.imul(ah2,bl2)|0,hi=hi+Math.imul(ah2,bh2)|0,lo=lo+Math.imul(al1,bl3)|0,mid=(mid=mid+Math.imul(al1,bh3)|0)+Math.imul(ah1,bl3)|0,hi=hi+Math.imul(ah1,bh3)|0;var w4=(c+(lo=lo+Math.imul(al0,bl4)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh4)|0)+Math.imul(ah0,bl4)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh4)|0)+(mid>>>13)|0)+(w4>>>26)|0,w4&=67108863,lo=Math.imul(al5,bl0),mid=(mid=Math.imul(al5,bh0))+Math.imul(ah5,bl0)|0,hi=Math.imul(ah5,bh0),lo=lo+Math.imul(al4,bl1)|0,mid=(mid=mid+Math.imul(al4,bh1)|0)+Math.imul(ah4,bl1)|0,hi=hi+Math.imul(ah4,bh1)|0,lo=lo+Math.imul(al3,bl2)|0,mid=(mid=mid+Math.imul(al3,bh2)|0)+Math.imul(ah3,bl2)|0,hi=hi+Math.imul(ah3,bh2)|0,lo=lo+Math.imul(al2,bl3)|0,mid=(mid=mid+Math.imul(al2,bh3)|0)+Math.imul(ah2,bl3)|0,hi=hi+Math.imul(ah2,bh3)|0,lo=lo+Math.imul(al1,bl4)|0,mid=(mid=mid+Math.imul(al1,bh4)|0)+Math.imul(ah1,bl4)|0,hi=hi+Math.imul(ah1,bh4)|0;var w5=(c+(lo=lo+Math.imul(al0,bl5)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh5)|0)+Math.imul(ah0,bl5)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh5)|0)+(mid>>>13)|0)+(w5>>>26)|0,w5&=67108863,lo=Math.imul(al6,bl0),mid=(mid=Math.imul(al6,bh0))+Math.imul(ah6,bl0)|0,hi=Math.imul(ah6,bh0),lo=lo+Math.imul(al5,bl1)|0,mid=(mid=mid+Math.imul(al5,bh1)|0)+Math.imul(ah5,bl1)|0,hi=hi+Math.imul(ah5,bh1)|0,lo=lo+Math.imul(al4,bl2)|0,mid=(mid=mid+Math.imul(al4,bh2)|0)+Math.imul(ah4,bl2)|0,hi=hi+Math.imul(ah4,bh2)|0,lo=lo+Math.imul(al3,bl3)|0,mid=(mid=mid+Math.imul(al3,bh3)|0)+Math.imul(ah3,bl3)|0,hi=hi+Math.imul(ah3,bh3)|0,lo=lo+Math.imul(al2,bl4)|0,mid=(mid=mid+Math.imul(al2,bh4)|0)+Math.imul(ah2,bl4)|0,hi=hi+Math.imul(ah2,bh4)|0,lo=lo+Math.imul(al1,bl5)|0,mid=(mid=mid+Math.imul(al1,bh5)|0)+Math.imul(ah1,bl5)|0,hi=hi+Math.imul(ah1,bh5)|0;var w6=(c+(lo=lo+Math.imul(al0,bl6)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh6)|0)+Math.imul(ah0,bl6)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh6)|0)+(mid>>>13)|0)+(w6>>>26)|0,w6&=67108863,lo=Math.imul(al7,bl0),mid=(mid=Math.imul(al7,bh0))+Math.imul(ah7,bl0)|0,hi=Math.imul(ah7,bh0),lo=lo+Math.imul(al6,bl1)|0,mid=(mid=mid+Math.imul(al6,bh1)|0)+Math.imul(ah6,bl1)|0,hi=hi+Math.imul(ah6,bh1)|0,lo=lo+Math.imul(al5,bl2)|0,mid=(mid=mid+Math.imul(al5,bh2)|0)+Math.imul(ah5,bl2)|0,hi=hi+Math.imul(ah5,bh2)|0,lo=lo+Math.imul(al4,bl3)|0,mid=(mid=mid+Math.imul(al4,bh3)|0)+Math.imul(ah4,bl3)|0,hi=hi+Math.imul(ah4,bh3)|0,lo=lo+Math.imul(al3,bl4)|0,mid=(mid=mid+Math.imul(al3,bh4)|0)+Math.imul(ah3,bl4)|0,hi=hi+Math.imul(ah3,bh4)|0,lo=lo+Math.imul(al2,bl5)|0,mid=(mid=mid+Math.imul(al2,bh5)|0)+Math.imul(ah2,bl5)|0,hi=hi+Math.imul(ah2,bh5)|0,lo=lo+Math.imul(al1,bl6)|0,mid=(mid=mid+Math.imul(al1,bh6)|0)+Math.imul(ah1,bl6)|0,hi=hi+Math.imul(ah1,bh6)|0;var w7=(c+(lo=lo+Math.imul(al0,bl7)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh7)|0)+Math.imul(ah0,bl7)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh7)|0)+(mid>>>13)|0)+(w7>>>26)|0,w7&=67108863,lo=Math.imul(al8,bl0),mid=(mid=Math.imul(al8,bh0))+Math.imul(ah8,bl0)|0,hi=Math.imul(ah8,bh0),lo=lo+Math.imul(al7,bl1)|0,mid=(mid=mid+Math.imul(al7,bh1)|0)+Math.imul(ah7,bl1)|0,hi=hi+Math.imul(ah7,bh1)|0,lo=lo+Math.imul(al6,bl2)|0,mid=(mid=mid+Math.imul(al6,bh2)|0)+Math.imul(ah6,bl2)|0,hi=hi+Math.imul(ah6,bh2)|0,lo=lo+Math.imul(al5,bl3)|0,mid=(mid=mid+Math.imul(al5,bh3)|0)+Math.imul(ah5,bl3)|0,hi=hi+Math.imul(ah5,bh3)|0,lo=lo+Math.imul(al4,bl4)|0,mid=(mid=mid+Math.imul(al4,bh4)|0)+Math.imul(ah4,bl4)|0,hi=hi+Math.imul(ah4,bh4)|0,lo=lo+Math.imul(al3,bl5)|0,mid=(mid=mid+Math.imul(al3,bh5)|0)+Math.imul(ah3,bl5)|0,hi=hi+Math.imul(ah3,bh5)|0,lo=lo+Math.imul(al2,bl6)|0,mid=(mid=mid+Math.imul(al2,bh6)|0)+Math.imul(ah2,bl6)|0,hi=hi+Math.imul(ah2,bh6)|0,lo=lo+Math.imul(al1,bl7)|0,mid=(mid=mid+Math.imul(al1,bh7)|0)+Math.imul(ah1,bl7)|0,hi=hi+Math.imul(ah1,bh7)|0;var w8=(c+(lo=lo+Math.imul(al0,bl8)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh8)|0)+Math.imul(ah0,bl8)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh8)|0)+(mid>>>13)|0)+(w8>>>26)|0,w8&=67108863,lo=Math.imul(al9,bl0),mid=(mid=Math.imul(al9,bh0))+Math.imul(ah9,bl0)|0,hi=Math.imul(ah9,bh0),lo=lo+Math.imul(al8,bl1)|0,mid=(mid=mid+Math.imul(al8,bh1)|0)+Math.imul(ah8,bl1)|0,hi=hi+Math.imul(ah8,bh1)|0,lo=lo+Math.imul(al7,bl2)|0,mid=(mid=mid+Math.imul(al7,bh2)|0)+Math.imul(ah7,bl2)|0,hi=hi+Math.imul(ah7,bh2)|0,lo=lo+Math.imul(al6,bl3)|0,mid=(mid=mid+Math.imul(al6,bh3)|0)+Math.imul(ah6,bl3)|0,hi=hi+Math.imul(ah6,bh3)|0,lo=lo+Math.imul(al5,bl4)|0,mid=(mid=mid+Math.imul(al5,bh4)|0)+Math.imul(ah5,bl4)|0,hi=hi+Math.imul(ah5,bh4)|0,lo=lo+Math.imul(al4,bl5)|0,mid=(mid=mid+Math.imul(al4,bh5)|0)+Math.imul(ah4,bl5)|0,hi=hi+Math.imul(ah4,bh5)|0,lo=lo+Math.imul(al3,bl6)|0,mid=(mid=mid+Math.imul(al3,bh6)|0)+Math.imul(ah3,bl6)|0,hi=hi+Math.imul(ah3,bh6)|0,lo=lo+Math.imul(al2,bl7)|0,mid=(mid=mid+Math.imul(al2,bh7)|0)+Math.imul(ah2,bl7)|0,hi=hi+Math.imul(ah2,bh7)|0,lo=lo+Math.imul(al1,bl8)|0,mid=(mid=mid+Math.imul(al1,bh8)|0)+Math.imul(ah1,bl8)|0,hi=hi+Math.imul(ah1,bh8)|0;var w9=(c+(lo=lo+Math.imul(al0,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh9)|0)+Math.imul(ah0,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh9)|0)+(mid>>>13)|0)+(w9>>>26)|0,w9&=67108863,lo=Math.imul(al9,bl1),mid=(mid=Math.imul(al9,bh1))+Math.imul(ah9,bl1)|0,hi=Math.imul(ah9,bh1),lo=lo+Math.imul(al8,bl2)|0,mid=(mid=mid+Math.imul(al8,bh2)|0)+Math.imul(ah8,bl2)|0,hi=hi+Math.imul(ah8,bh2)|0,lo=lo+Math.imul(al7,bl3)|0,mid=(mid=mid+Math.imul(al7,bh3)|0)+Math.imul(ah7,bl3)|0,hi=hi+Math.imul(ah7,bh3)|0,lo=lo+Math.imul(al6,bl4)|0,mid=(mid=mid+Math.imul(al6,bh4)|0)+Math.imul(ah6,bl4)|0,hi=hi+Math.imul(ah6,bh4)|0,lo=lo+Math.imul(al5,bl5)|0,mid=(mid=mid+Math.imul(al5,bh5)|0)+Math.imul(ah5,bl5)|0,hi=hi+Math.imul(ah5,bh5)|0,lo=lo+Math.imul(al4,bl6)|0,mid=(mid=mid+Math.imul(al4,bh6)|0)+Math.imul(ah4,bl6)|0,hi=hi+Math.imul(ah4,bh6)|0,lo=lo+Math.imul(al3,bl7)|0,mid=(mid=mid+Math.imul(al3,bh7)|0)+Math.imul(ah3,bl7)|0,hi=hi+Math.imul(ah3,bh7)|0,lo=lo+Math.imul(al2,bl8)|0,mid=(mid=mid+Math.imul(al2,bh8)|0)+Math.imul(ah2,bl8)|0,hi=hi+Math.imul(ah2,bh8)|0;var w10=(c+(lo=lo+Math.imul(al1,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al1,bh9)|0)+Math.imul(ah1,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah1,bh9)|0)+(mid>>>13)|0)+(w10>>>26)|0,w10&=67108863,lo=Math.imul(al9,bl2),mid=(mid=Math.imul(al9,bh2))+Math.imul(ah9,bl2)|0,hi=Math.imul(ah9,bh2),lo=lo+Math.imul(al8,bl3)|0,mid=(mid=mid+Math.imul(al8,bh3)|0)+Math.imul(ah8,bl3)|0,hi=hi+Math.imul(ah8,bh3)|0,lo=lo+Math.imul(al7,bl4)|0,mid=(mid=mid+Math.imul(al7,bh4)|0)+Math.imul(ah7,bl4)|0,hi=hi+Math.imul(ah7,bh4)|0,lo=lo+Math.imul(al6,bl5)|0,mid=(mid=mid+Math.imul(al6,bh5)|0)+Math.imul(ah6,bl5)|0,hi=hi+Math.imul(ah6,bh5)|0,lo=lo+Math.imul(al5,bl6)|0,mid=(mid=mid+Math.imul(al5,bh6)|0)+Math.imul(ah5,bl6)|0,hi=hi+Math.imul(ah5,bh6)|0,lo=lo+Math.imul(al4,bl7)|0,mid=(mid=mid+Math.imul(al4,bh7)|0)+Math.imul(ah4,bl7)|0,hi=hi+Math.imul(ah4,bh7)|0,lo=lo+Math.imul(al3,bl8)|0,mid=(mid=mid+Math.imul(al3,bh8)|0)+Math.imul(ah3,bl8)|0,hi=hi+Math.imul(ah3,bh8)|0;var w11=(c+(lo=lo+Math.imul(al2,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al2,bh9)|0)+Math.imul(ah2,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah2,bh9)|0)+(mid>>>13)|0)+(w11>>>26)|0,w11&=67108863,lo=Math.imul(al9,bl3),mid=(mid=Math.imul(al9,bh3))+Math.imul(ah9,bl3)|0,hi=Math.imul(ah9,bh3),lo=lo+Math.imul(al8,bl4)|0,mid=(mid=mid+Math.imul(al8,bh4)|0)+Math.imul(ah8,bl4)|0,hi=hi+Math.imul(ah8,bh4)|0,lo=lo+Math.imul(al7,bl5)|0,mid=(mid=mid+Math.imul(al7,bh5)|0)+Math.imul(ah7,bl5)|0,hi=hi+Math.imul(ah7,bh5)|0,lo=lo+Math.imul(al6,bl6)|0,mid=(mid=mid+Math.imul(al6,bh6)|0)+Math.imul(ah6,bl6)|0,hi=hi+Math.imul(ah6,bh6)|0,lo=lo+Math.imul(al5,bl7)|0,mid=(mid=mid+Math.imul(al5,bh7)|0)+Math.imul(ah5,bl7)|0,hi=hi+Math.imul(ah5,bh7)|0,lo=lo+Math.imul(al4,bl8)|0,mid=(mid=mid+Math.imul(al4,bh8)|0)+Math.imul(ah4,bl8)|0,hi=hi+Math.imul(ah4,bh8)|0;var w12=(c+(lo=lo+Math.imul(al3,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al3,bh9)|0)+Math.imul(ah3,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah3,bh9)|0)+(mid>>>13)|0)+(w12>>>26)|0,w12&=67108863,lo=Math.imul(al9,bl4),mid=(mid=Math.imul(al9,bh4))+Math.imul(ah9,bl4)|0,hi=Math.imul(ah9,bh4),lo=lo+Math.imul(al8,bl5)|0,mid=(mid=mid+Math.imul(al8,bh5)|0)+Math.imul(ah8,bl5)|0,hi=hi+Math.imul(ah8,bh5)|0,lo=lo+Math.imul(al7,bl6)|0,mid=(mid=mid+Math.imul(al7,bh6)|0)+Math.imul(ah7,bl6)|0,hi=hi+Math.imul(ah7,bh6)|0,lo=lo+Math.imul(al6,bl7)|0,mid=(mid=mid+Math.imul(al6,bh7)|0)+Math.imul(ah6,bl7)|0,hi=hi+Math.imul(ah6,bh7)|0,lo=lo+Math.imul(al5,bl8)|0,mid=(mid=mid+Math.imul(al5,bh8)|0)+Math.imul(ah5,bl8)|0,hi=hi+Math.imul(ah5,bh8)|0;var w13=(c+(lo=lo+Math.imul(al4,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al4,bh9)|0)+Math.imul(ah4,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah4,bh9)|0)+(mid>>>13)|0)+(w13>>>26)|0,w13&=67108863,lo=Math.imul(al9,bl5),mid=(mid=Math.imul(al9,bh5))+Math.imul(ah9,bl5)|0,hi=Math.imul(ah9,bh5),lo=lo+Math.imul(al8,bl6)|0,mid=(mid=mid+Math.imul(al8,bh6)|0)+Math.imul(ah8,bl6)|0,hi=hi+Math.imul(ah8,bh6)|0,lo=lo+Math.imul(al7,bl7)|0,mid=(mid=mid+Math.imul(al7,bh7)|0)+Math.imul(ah7,bl7)|0,hi=hi+Math.imul(ah7,bh7)|0,lo=lo+Math.imul(al6,bl8)|0,mid=(mid=mid+Math.imul(al6,bh8)|0)+Math.imul(ah6,bl8)|0,hi=hi+Math.imul(ah6,bh8)|0;var w14=(c+(lo=lo+Math.imul(al5,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al5,bh9)|0)+Math.imul(ah5,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah5,bh9)|0)+(mid>>>13)|0)+(w14>>>26)|0,w14&=67108863,lo=Math.imul(al9,bl6),mid=(mid=Math.imul(al9,bh6))+Math.imul(ah9,bl6)|0,hi=Math.imul(ah9,bh6),lo=lo+Math.imul(al8,bl7)|0,mid=(mid=mid+Math.imul(al8,bh7)|0)+Math.imul(ah8,bl7)|0,hi=hi+Math.imul(ah8,bh7)|0,lo=lo+Math.imul(al7,bl8)|0,mid=(mid=mid+Math.imul(al7,bh8)|0)+Math.imul(ah7,bl8)|0,hi=hi+Math.imul(ah7,bh8)|0;var w15=(c+(lo=lo+Math.imul(al6,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al6,bh9)|0)+Math.imul(ah6,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah6,bh9)|0)+(mid>>>13)|0)+(w15>>>26)|0,w15&=67108863,lo=Math.imul(al9,bl7),mid=(mid=Math.imul(al9,bh7))+Math.imul(ah9,bl7)|0,hi=Math.imul(ah9,bh7),lo=lo+Math.imul(al8,bl8)|0,mid=(mid=mid+Math.imul(al8,bh8)|0)+Math.imul(ah8,bl8)|0,hi=hi+Math.imul(ah8,bh8)|0;var w16=(c+(lo=lo+Math.imul(al7,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al7,bh9)|0)+Math.imul(ah7,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah7,bh9)|0)+(mid>>>13)|0)+(w16>>>26)|0,w16&=67108863,lo=Math.imul(al9,bl8),mid=(mid=Math.imul(al9,bh8))+Math.imul(ah9,bl8)|0,hi=Math.imul(ah9,bh8);var w17=(c+(lo=lo+Math.imul(al8,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al8,bh9)|0)+Math.imul(ah8,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah8,bh9)|0)+(mid>>>13)|0)+(w17>>>26)|0,w17&=67108863;var w18=(c+(lo=Math.imul(al9,bl9))|0)+((8191&(mid=(mid=Math.imul(al9,bh9))+Math.imul(ah9,bl9)|0))<<13)|0;return c=((hi=Math.imul(ah9,bh9))+(mid>>>13)|0)+(w18>>>26)|0,w18&=67108863,o[0]=w0,o[1]=w1,o[2]=w2,o[3]=w3,o[4]=w4,o[5]=w5,o[6]=w6,o[7]=w7,o[8]=w8,o[9]=w9,o[10]=w10,o[11]=w11,o[12]=w12,o[13]=w13,o[14]=w14,o[15]=w15,o[16]=w16,o[17]=w17,o[18]=w18,0!==c&&(o[19]=c,out.length++),out};function jumboMulTo(self,num,out){return(new FFTM).mulp(self,num,out)}function FFTM(x,y){this.x=x,this.y=y}Math.imul||(comb10MulTo=smallMulTo),BN.prototype.mulTo=function mulTo(num,out){var res,len=this.length+num.length;return res=10===this.length&&10===num.length?comb10MulTo(this,num,out):len<63?smallMulTo(this,num,out):len<1024?function bigMulTo(self,num,out){out.negative=num.negative^self.negative,out.length=self.length+num.length;for(var carry=0,hncarry=0,k=0;k<out.length-1;k++){var ncarry=hncarry;hncarry=0;for(var rword=67108863&carry,maxJ=Math.min(k,num.length-1),j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j,r=(0|self.words[i])*(0|num.words[j]),lo=67108863&r;rword=67108863&(lo=lo+rword|0),hncarry+=(ncarry=(ncarry=ncarry+(r/67108864|0)|0)+(lo>>>26)|0)>>>26,ncarry&=67108863}out.words[k]=rword,carry=ncarry,ncarry=hncarry}return 0!==carry?out.words[k]=carry:out.length--,out.strip()}(this,num,out):jumboMulTo(this,num,out),res},FFTM.prototype.makeRBT=function makeRBT(N){for(var t=new Array(N),l=BN.prototype._countBits(N)-1,i=0;i<N;i++)t[i]=this.revBin(i,l,N);return t},FFTM.prototype.revBin=function revBin(x,l,N){if(0===x||x===N-1)return x;for(var rb=0,i=0;i<l;i++)rb|=(1&x)<<l-i-1,x>>=1;return rb},FFTM.prototype.permute=function permute(rbt,rws,iws,rtws,itws,N){for(var i=0;i<N;i++)rtws[i]=rws[rbt[i]],itws[i]=iws[rbt[i]]},FFTM.prototype.transform=function transform(rws,iws,rtws,itws,N,rbt){this.permute(rbt,rws,iws,rtws,itws,N);for(var s=1;s<N;s<<=1)for(var l=s<<1,rtwdf=Math.cos(2*Math.PI/l),itwdf=Math.sin(2*Math.PI/l),p=0;p<N;p+=l)for(var rtwdf_=rtwdf,itwdf_=itwdf,j=0;j<s;j++){var re=rtws[p+j],ie=itws[p+j],ro=rtws[p+j+s],io=itws[p+j+s],rx=rtwdf_*ro-itwdf_*io;io=rtwdf_*io+itwdf_*ro,ro=rx,rtws[p+j]=re+ro,itws[p+j]=ie+io,rtws[p+j+s]=re-ro,itws[p+j+s]=ie-io,j!==l&&(rx=rtwdf*rtwdf_-itwdf*itwdf_,itwdf_=rtwdf*itwdf_+itwdf*rtwdf_,rtwdf_=rx)}},FFTM.prototype.guessLen13b=function guessLen13b(n,m){var N=1|Math.max(m,n),odd=1&N,i=0;for(N=N/2|0;N;N>>>=1)i++;return 1<<i+1+odd},FFTM.prototype.conjugate=function conjugate(rws,iws,N){if(!(N<=1))for(var i=0;i<N/2;i++){var t=rws[i];rws[i]=rws[N-i-1],rws[N-i-1]=t,t=iws[i],iws[i]=-iws[N-i-1],iws[N-i-1]=-t}},FFTM.prototype.normalize13b=function normalize13b(ws,N){for(var carry=0,i=0;i<N/2;i++){var w=8192*Math.round(ws[2*i+1]/N)+Math.round(ws[2*i]/N)+carry;ws[i]=67108863&w,carry=w<67108864?0:w/67108864|0}return ws},FFTM.prototype.convert13b=function convert13b(ws,len,rws,N){for(var carry=0,i=0;i<len;i++)carry+=0|ws[i],rws[2*i]=8191&carry,carry>>>=13,rws[2*i+1]=8191&carry,carry>>>=13;for(i=2*len;i<N;++i)rws[i]=0;assert(0===carry),assert(0==(-8192&carry))},FFTM.prototype.stub=function stub(N){for(var ph=new Array(N),i=0;i<N;i++)ph[i]=0;return ph},FFTM.prototype.mulp=function mulp(x,y,out){var N=2*this.guessLen13b(x.length,y.length),rbt=this.makeRBT(N),_=this.stub(N),rws=new Array(N),rwst=new Array(N),iwst=new Array(N),nrws=new Array(N),nrwst=new Array(N),niwst=new Array(N),rmws=out.words;rmws.length=N,this.convert13b(x.words,x.length,rws,N),this.convert13b(y.words,y.length,nrws,N),this.transform(rws,_,rwst,iwst,N,rbt),this.transform(nrws,_,nrwst,niwst,N,rbt);for(var i=0;i<N;i++){var rx=rwst[i]*nrwst[i]-iwst[i]*niwst[i];iwst[i]=rwst[i]*niwst[i]+iwst[i]*nrwst[i],rwst[i]=rx}return this.conjugate(rwst,iwst,N),this.transform(rwst,iwst,rmws,_,N,rbt),this.conjugate(rmws,_,N),this.normalize13b(rmws,N),out.negative=x.negative^y.negative,out.length=x.length+y.length,out.strip()},BN.prototype.mul=function mul(num){var out=new BN(null);return out.words=new Array(this.length+num.length),this.mulTo(num,out)},BN.prototype.mulf=function mulf(num){var out=new BN(null);return out.words=new Array(this.length+num.length),jumboMulTo(this,num,out)},BN.prototype.imul=function imul(num){return this.clone().mulTo(num,this)},BN.prototype.imuln=function imuln(num){assert("number"==typeof num),assert(num<67108864);for(var carry=0,i=0;i<this.length;i++){var w=(0|this.words[i])*num,lo=(67108863&w)+(67108863&carry);carry>>=26,carry+=w/67108864|0,carry+=lo>>>26,this.words[i]=67108863&lo}return 0!==carry&&(this.words[i]=carry,this.length++),this},BN.prototype.muln=function muln(num){return this.clone().imuln(num)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(num){var w=function toBitArray(num){for(var w=new Array(num.bitLength()),bit=0;bit<w.length;bit++){var off=bit/26|0,wbit=bit%26;w[bit]=(num.words[off]&1<<wbit)>>>wbit}return w}(num);if(0===w.length)return new BN(1);for(var res=this,i=0;i<w.length&&0===w[i];i++,res=res.sqr());if(++i<w.length)for(var q=res.sqr();i<w.length;i++,q=q.sqr())0!==w[i]&&(res=res.mul(q));return res},BN.prototype.iushln=function iushln(bits){assert("number"==typeof bits&&bits>=0);var i,r=bits%26,s=(bits-r)/26,carryMask=67108863>>>26-r<<26-r;if(0!==r){var carry=0;for(i=0;i<this.length;i++){var newCarry=this.words[i]&carryMask,c=(0|this.words[i])-newCarry<<r;this.words[i]=c|carry,carry=newCarry>>>26-r}carry&&(this.words[i]=carry,this.length++)}if(0!==s){for(i=this.length-1;i>=0;i--)this.words[i+s]=this.words[i];for(i=0;i<s;i++)this.words[i]=0;this.length+=s}return this.strip()},BN.prototype.ishln=function ishln(bits){return assert(0===this.negative),this.iushln(bits)},BN.prototype.iushrn=function iushrn(bits,hint,extended){var h;assert("number"==typeof bits&&bits>=0),h=hint?(hint-hint%26)/26:0;var r=bits%26,s=Math.min((bits-r)/26,this.length),mask=67108863^67108863>>>r<<r,maskedWords=extended;if(h-=s,h=Math.max(0,h),maskedWords){for(var i=0;i<s;i++)maskedWords.words[i]=this.words[i];maskedWords.length=s}if(0===s);else if(this.length>s)for(this.length-=s,i=0;i<this.length;i++)this.words[i]=this.words[i+s];else this.words[0]=0,this.length=1;var carry=0;for(i=this.length-1;i>=0&&(0!==carry||i>=h);i--){var word=0|this.words[i];this.words[i]=carry<<26-r|word>>>r,carry=word&mask}return maskedWords&&0!==carry&&(maskedWords.words[maskedWords.length++]=carry),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function ishrn(bits,hint,extended){return assert(0===this.negative),this.iushrn(bits,hint,extended)},BN.prototype.shln=function shln(bits){return this.clone().ishln(bits)},BN.prototype.ushln=function ushln(bits){return this.clone().iushln(bits)},BN.prototype.shrn=function shrn(bits){return this.clone().ishrn(bits)},BN.prototype.ushrn=function ushrn(bits){return this.clone().iushrn(bits)},BN.prototype.testn=function testn(bit){assert("number"==typeof bit&&bit>=0);var r=bit%26,s=(bit-r)/26,q=1<<r;return!(this.length<=s)&&!!(this.words[s]&q)},BN.prototype.imaskn=function imaskn(bits){assert("number"==typeof bits&&bits>=0);var r=bits%26,s=(bits-r)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=s)return this;if(0!==r&&s++,this.length=Math.min(s,this.length),0!==r){var mask=67108863^67108863>>>r<<r;this.words[this.length-1]&=mask}return this.strip()},BN.prototype.maskn=function maskn(bits){return this.clone().imaskn(bits)},BN.prototype.iaddn=function iaddn(num){return assert("number"==typeof num),assert(num<67108864),num<0?this.isubn(-num):0!==this.negative?1===this.length&&(0|this.words[0])<num?(this.words[0]=num-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(num),this.negative=1,this):this._iaddn(num)},BN.prototype._iaddn=function _iaddn(num){this.words[0]+=num;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},BN.prototype.isubn=function isubn(num){if(assert("number"==typeof num),assert(num<67108864),num<0)return this.iaddn(-num);if(0!==this.negative)return this.negative=0,this.iaddn(num),this.negative=1,this;if(this.words[0]-=num,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.strip()},BN.prototype.addn=function addn(num){return this.clone().iaddn(num)},BN.prototype.subn=function subn(num){return this.clone().isubn(num)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(num,mul,shift){var i,w,len=num.length+shift;this._expand(len);var carry=0;for(i=0;i<num.length;i++){w=(0|this.words[i+shift])+carry;var right=(0|num.words[i])*mul;carry=((w-=67108863&right)>>26)-(right/67108864|0),this.words[i+shift]=67108863&w}for(;i<this.length-shift;i++)carry=(w=(0|this.words[i+shift])+carry)>>26,this.words[i+shift]=67108863&w;if(0===carry)return this.strip();for(assert(-1===carry),carry=0,i=0;i<this.length;i++)carry=(w=-(0|this.words[i])+carry)>>26,this.words[i]=67108863&w;return this.negative=1,this.strip()},BN.prototype._wordDiv=function _wordDiv(num,mode){var shift=(this.length,num.length),a=this.clone(),b=num,bhi=0|b.words[b.length-1];0!==(shift=26-this._countBits(bhi))&&(b=b.ushln(shift),a.iushln(shift),bhi=0|b.words[b.length-1]);var q,m=a.length-b.length;if("mod"!==mode){(q=new BN(null)).length=m+1,q.words=new Array(q.length);for(var i=0;i<q.length;i++)q.words[i]=0}var diff=a.clone()._ishlnsubmul(b,1,m);0===diff.negative&&(a=diff,q&&(q.words[m]=1));for(var j=m-1;j>=0;j--){var qj=67108864*(0|a.words[b.length+j])+(0|a.words[b.length+j-1]);for(qj=Math.min(qj/bhi|0,67108863),a._ishlnsubmul(b,qj,j);0!==a.negative;)qj--,a.negative=0,a._ishlnsubmul(b,1,j),a.isZero()||(a.negative^=1);q&&(q.words[j]=qj)}return q&&q.strip(),a.strip(),"div"!==mode&&0!==shift&&a.iushrn(shift),{div:q||null,mod:a}},BN.prototype.divmod=function divmod(num,mode,positive){return assert(!num.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===num.negative?(res=this.neg().divmod(num,mode),"mod"!==mode&&(div=res.div.neg()),"div"!==mode&&(mod=res.mod.neg(),positive&&0!==mod.negative&&mod.iadd(num)),{div,mod}):0===this.negative&&0!==num.negative?(res=this.divmod(num.neg(),mode),"mod"!==mode&&(div=res.div.neg()),{div,mod:res.mod}):0!=(this.negative&num.negative)?(res=this.neg().divmod(num.neg(),mode),"div"!==mode&&(mod=res.mod.neg(),positive&&0!==mod.negative&&mod.isub(num)),{div:res.div,mod}):num.length>this.length||this.cmp(num)<0?{div:new BN(0),mod:this}:1===num.length?"div"===mode?{div:this.divn(num.words[0]),mod:null}:"mod"===mode?{div:null,mod:new BN(this.modn(num.words[0]))}:{div:this.divn(num.words[0]),mod:new BN(this.modn(num.words[0]))}:this._wordDiv(num,mode);var div,mod,res},BN.prototype.div=function div(num){return this.divmod(num,"div",!1).div},BN.prototype.mod=function mod(num){return this.divmod(num,"mod",!1).mod},BN.prototype.umod=function umod(num){return this.divmod(num,"mod",!0).mod},BN.prototype.divRound=function divRound(num){var dm=this.divmod(num);if(dm.mod.isZero())return dm.div;var mod=0!==dm.div.negative?dm.mod.isub(num):dm.mod,half=num.ushrn(1),r2=num.andln(1),cmp=mod.cmp(half);return cmp<0||1===r2&&0===cmp?dm.div:0!==dm.div.negative?dm.div.isubn(1):dm.div.iaddn(1)},BN.prototype.modn=function modn(num){assert(num<=67108863);for(var p=(1<<26)%num,acc=0,i=this.length-1;i>=0;i--)acc=(p*acc+(0|this.words[i]))%num;return acc},BN.prototype.idivn=function idivn(num){assert(num<=67108863);for(var carry=0,i=this.length-1;i>=0;i--){var w=(0|this.words[i])+67108864*carry;this.words[i]=w/num|0,carry=w%num}return this.strip()},BN.prototype.divn=function divn(num){return this.clone().idivn(num)},BN.prototype.egcd=function egcd(p){assert(0===p.negative),assert(!p.isZero());var x=this,y=p.clone();x=0!==x.negative?x.umod(p):x.clone();for(var A=new BN(1),B=new BN(0),C=new BN(0),D=new BN(1),g=0;x.isEven()&&y.isEven();)x.iushrn(1),y.iushrn(1),++g;for(var yp=y.clone(),xp=x.clone();!x.isZero();){for(var i=0,im=1;0==(x.words[0]&im)&&i<26;++i,im<<=1);if(i>0)for(x.iushrn(i);i-- >0;)(A.isOdd()||B.isOdd())&&(A.iadd(yp),B.isub(xp)),A.iushrn(1),B.iushrn(1);for(var j=0,jm=1;0==(y.words[0]&jm)&&j<26;++j,jm<<=1);if(j>0)for(y.iushrn(j);j-- >0;)(C.isOdd()||D.isOdd())&&(C.iadd(yp),D.isub(xp)),C.iushrn(1),D.iushrn(1);x.cmp(y)>=0?(x.isub(y),A.isub(C),B.isub(D)):(y.isub(x),C.isub(A),D.isub(B))}return{a:C,b:D,gcd:y.iushln(g)}},BN.prototype._invmp=function _invmp(p){assert(0===p.negative),assert(!p.isZero());var a=this,b=p.clone();a=0!==a.negative?a.umod(p):a.clone();for(var res,x1=new BN(1),x2=new BN(0),delta=b.clone();a.cmpn(1)>0&&b.cmpn(1)>0;){for(var i=0,im=1;0==(a.words[0]&im)&&i<26;++i,im<<=1);if(i>0)for(a.iushrn(i);i-- >0;)x1.isOdd()&&x1.iadd(delta),x1.iushrn(1);for(var j=0,jm=1;0==(b.words[0]&jm)&&j<26;++j,jm<<=1);if(j>0)for(b.iushrn(j);j-- >0;)x2.isOdd()&&x2.iadd(delta),x2.iushrn(1);a.cmp(b)>=0?(a.isub(b),x1.isub(x2)):(b.isub(a),x2.isub(x1))}return(res=0===a.cmpn(1)?x1:x2).cmpn(0)<0&&res.iadd(p),res},BN.prototype.gcd=function gcd(num){if(this.isZero())return num.abs();if(num.isZero())return this.abs();var a=this.clone(),b=num.clone();a.negative=0,b.negative=0;for(var shift=0;a.isEven()&&b.isEven();shift++)a.iushrn(1),b.iushrn(1);for(;;){for(;a.isEven();)a.iushrn(1);for(;b.isEven();)b.iushrn(1);var r=a.cmp(b);if(r<0){var t=a;a=b,b=t}else if(0===r||0===b.cmpn(1))break;a.isub(b)}return b.iushln(shift)},BN.prototype.invm=function invm(num){return this.egcd(num).a.umod(num)},BN.prototype.isEven=function isEven(){return 0==(1&this.words[0])},BN.prototype.isOdd=function isOdd(){return 1==(1&this.words[0])},BN.prototype.andln=function andln(num){return this.words[0]&num},BN.prototype.bincn=function bincn(bit){assert("number"==typeof bit);var r=bit%26,s=(bit-r)/26,q=1<<r;if(this.length<=s)return this._expand(s+1),this.words[s]|=q,this;for(var carry=q,i=s;0!==carry&&i<this.length;i++){var w=0|this.words[i];carry=(w+=carry)>>>26,w&=67108863,this.words[i]=w}return 0!==carry&&(this.words[i]=carry,this.length++),this},BN.prototype.isZero=function isZero(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function cmpn(num){var res,negative=num<0;if(0!==this.negative&&!negative)return-1;if(0===this.negative&&negative)return 1;if(this.strip(),this.length>1)res=1;else{negative&&(num=-num),assert(num<=67108863,"Number is too big");var w=0|this.words[0];res=w===num?0:w<num?-1:1}return 0!==this.negative?0|-res:res},BN.prototype.cmp=function cmp(num){if(0!==this.negative&&0===num.negative)return-1;if(0===this.negative&&0!==num.negative)return 1;var res=this.ucmp(num);return 0!==this.negative?0|-res:res},BN.prototype.ucmp=function ucmp(num){if(this.length>num.length)return 1;if(this.length<num.length)return-1;for(var res=0,i=this.length-1;i>=0;i--){var a=0|this.words[i],b=0|num.words[i];if(a!==b){a<b?res=-1:a>b&&(res=1);break}}return res},BN.prototype.gtn=function gtn(num){return 1===this.cmpn(num)},BN.prototype.gt=function gt(num){return 1===this.cmp(num)},BN.prototype.gten=function gten(num){return this.cmpn(num)>=0},BN.prototype.gte=function gte(num){return this.cmp(num)>=0},BN.prototype.ltn=function ltn(num){return-1===this.cmpn(num)},BN.prototype.lt=function lt(num){return-1===this.cmp(num)},BN.prototype.lten=function lten(num){return this.cmpn(num)<=0},BN.prototype.lte=function lte(num){return this.cmp(num)<=0},BN.prototype.eqn=function eqn(num){return 0===this.cmpn(num)},BN.prototype.eq=function eq(num){return 0===this.cmp(num)},BN.red=function red(num){return new Red(num)},BN.prototype.toRed=function toRed(ctx){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),ctx.convertTo(this)._forceRed(ctx)},BN.prototype.fromRed=function fromRed(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(ctx){return this.red=ctx,this},BN.prototype.forceRed=function forceRed(ctx){return assert(!this.red,"Already a number in reduction context"),this._forceRed(ctx)},BN.prototype.redAdd=function redAdd(num){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,num)},BN.prototype.redIAdd=function redIAdd(num){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,num)},BN.prototype.redSub=function redSub(num){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,num)},BN.prototype.redISub=function redISub(num){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,num)},BN.prototype.redShl=function redShl(num){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,num)},BN.prototype.redMul=function redMul(num){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,num),this.red.mul(this,num)},BN.prototype.redIMul=function redIMul(num){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,num),this.red.imul(this,num)},BN.prototype.redSqr=function redSqr(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(num){return assert(this.red&&!num.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,num)};var primes={k256:null,p224:null,p192:null,p25519:null};function MPrime(name,p){this.name=name,this.p=new BN(p,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(m){if("string"==typeof m){var prime=BN._prime(m);this.m=prime.p,this.prime=prime}else assert(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}function Mont(m){Red.call(this,m),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function _tmp(){var tmp=new BN(null);return tmp.words=new Array(Math.ceil(this.n/13)),tmp},MPrime.prototype.ireduce=function ireduce(num){var rlen,r=num;do{this.split(r,this.tmp),rlen=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(rlen>this.n);var cmp=rlen<this.n?-1:r.ucmp(this.p);return 0===cmp?(r.words[0]=0,r.length=1):cmp>0?r.isub(this.p):r.strip(),r},MPrime.prototype.split=function split(input,out){input.iushrn(this.n,0,out)},MPrime.prototype.imulK=function imulK(num){return num.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(input,output){for(var outLen=Math.min(input.length,9),i=0;i<outLen;i++)output.words[i]=input.words[i];if(output.length=outLen,input.length<=9)return input.words[0]=0,void(input.length=1);var prev=input.words[9];for(output.words[output.length++]=4194303&prev,i=10;i<input.length;i++){var next=0|input.words[i];input.words[i-10]=(4194303&next)<<4|prev>>>22,prev=next}prev>>>=22,input.words[i-10]=prev,0===prev&&input.length>10?input.length-=10:input.length-=9},K256.prototype.imulK=function imulK(num){num.words[num.length]=0,num.words[num.length+1]=0,num.length+=2;for(var lo=0,i=0;i<num.length;i++){var w=0|num.words[i];lo+=977*w,num.words[i]=67108863&lo,lo=64*w+(lo/67108864|0)}return 0===num.words[num.length-1]&&(num.length--,0===num.words[num.length-1]&&num.length--),num},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(num){for(var carry=0,i=0;i<num.length;i++){var hi=19*(0|num.words[i])+carry,lo=67108863&hi;hi>>>=26,num.words[i]=lo,carry=hi}return 0!==carry&&(num.words[num.length++]=carry),num},BN._prime=function prime(name){if(primes[name])return primes[name];var prime;if("k256"===name)prime=new K256;else if("p224"===name)prime=new P224;else if("p192"===name)prime=new P192;else{if("p25519"!==name)throw new Error("Unknown prime "+name);prime=new P25519}return primes[name]=prime,prime},Red.prototype._verify1=function _verify1(a){assert(0===a.negative,"red works only with positives"),assert(a.red,"red works only with red numbers")},Red.prototype._verify2=function _verify2(a,b){assert(0==(a.negative|b.negative),"red works only with positives"),assert(a.red&&a.red===b.red,"red works only with red numbers")},Red.prototype.imod=function imod(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},Red.prototype.neg=function neg(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},Red.prototype.add=function add(a,b){this._verify2(a,b);var res=a.add(b);return res.cmp(this.m)>=0&&res.isub(this.m),res._forceRed(this)},Red.prototype.iadd=function iadd(a,b){this._verify2(a,b);var res=a.iadd(b);return res.cmp(this.m)>=0&&res.isub(this.m),res},Red.prototype.sub=function sub(a,b){this._verify2(a,b);var res=a.sub(b);return res.cmpn(0)<0&&res.iadd(this.m),res._forceRed(this)},Red.prototype.isub=function isub(a,b){this._verify2(a,b);var res=a.isub(b);return res.cmpn(0)<0&&res.iadd(this.m),res},Red.prototype.shl=function shl(a,num){return this._verify1(a),this.imod(a.ushln(num))},Red.prototype.imul=function imul(a,b){return this._verify2(a,b),this.imod(a.imul(b))},Red.prototype.mul=function mul(a,b){return this._verify2(a,b),this.imod(a.mul(b))},Red.prototype.isqr=function isqr(a){return this.imul(a,a.clone())},Red.prototype.sqr=function sqr(a){return this.mul(a,a)},Red.prototype.sqrt=function sqrt(a){if(a.isZero())return a.clone();var mod3=this.m.andln(3);if(assert(mod3%2==1),3===mod3){var pow=this.m.add(new BN(1)).iushrn(2);return this.pow(a,pow)}for(var q=this.m.subn(1),s=0;!q.isZero()&&0===q.andln(1);)s++,q.iushrn(1);assert(!q.isZero());var one=new BN(1).toRed(this),nOne=one.redNeg(),lpow=this.m.subn(1).iushrn(1),z=this.m.bitLength();for(z=new BN(2*z*z).toRed(this);0!==this.pow(z,lpow).cmp(nOne);)z.redIAdd(nOne);for(var c=this.pow(z,q),r=this.pow(a,q.addn(1).iushrn(1)),t=this.pow(a,q),m=s;0!==t.cmp(one);){for(var tmp=t,i=0;0!==tmp.cmp(one);i++)tmp=tmp.redSqr();assert(i<m);var b=this.pow(c,new BN(1).iushln(m-i-1));r=r.redMul(b),c=b.redSqr(),t=t.redMul(c),m=i}return r},Red.prototype.invm=function invm(a){var inv=a._invmp(this.m);return 0!==inv.negative?(inv.negative=0,this.imod(inv).redNeg()):this.imod(inv)},Red.prototype.pow=function pow(a,num){if(num.isZero())return new BN(1);if(0===num.cmpn(1))return a.clone();var wnd=new Array(16);wnd[0]=new BN(1).toRed(this),wnd[1]=a;for(var i=2;i<wnd.length;i++)wnd[i]=this.mul(wnd[i-1],a);var res=wnd[0],current=0,currentLen=0,start=num.bitLength()%26;for(0===start&&(start=26),i=num.length-1;i>=0;i--){for(var word=num.words[i],j=start-1;j>=0;j--){var bit=word>>j&1;res!==wnd[0]&&(res=this.sqr(res)),0!==bit||0!==current?(current<<=1,current|=bit,(4===++currentLen||0===i&&0===j)&&(res=this.mul(res,wnd[current]),currentLen=0,current=0)):currentLen=0}start=26}return res},Red.prototype.convertTo=function convertTo(num){var r=num.umod(this.m);return r===num?r.clone():r},Red.prototype.convertFrom=function convertFrom(num){var res=num.clone();return res.red=null,res},BN.mont=function mont(num){return new Mont(num)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(num){return this.imod(num.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(num){var r=this.imod(num.mul(this.rinv));return r.red=null,r},Mont.prototype.imul=function imul(a,b){if(a.isZero()||b.isZero())return a.words[0]=0,a.length=1,a;var t=a.imul(b),c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(c).iushrn(this.shift),res=u;return u.cmp(this.m)>=0?res=u.isub(this.m):u.cmpn(0)<0&&(res=u.iadd(this.m)),res._forceRed(this)},Mont.prototype.mul=function mul(a,b){if(a.isZero()||b.isZero())return new BN(0)._forceRed(this);var t=a.mul(b),c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(c).iushrn(this.shift),res=u;return u.cmp(this.m)>=0?res=u.isub(this.m):u.cmpn(0)<0&&(res=u.iadd(this.m)),res._forceRed(this)},Mont.prototype.invm=function invm(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(module=__webpack_require__.nmd(module),this)},"./node_modules/.pnpm/core-util-is@1.0.3/node_modules/core-util-is/lib/util.js":(__unused_webpack_module,exports,__webpack_require__)=>{function objectToString(o){return Object.prototype.toString.call(o)}exports.isArray=function isArray(arg){return Array.isArray?Array.isArray(arg):"[object Array]"===objectToString(arg)},exports.isBoolean=function isBoolean(arg){return"boolean"==typeof arg},exports.isNull=function isNull(arg){return null===arg},exports.isNullOrUndefined=function isNullOrUndefined(arg){return null==arg},exports.isNumber=function isNumber(arg){return"number"==typeof arg},exports.isString=function isString(arg){return"string"==typeof arg},exports.isSymbol=function isSymbol(arg){return"symbol"==typeof arg},exports.isUndefined=function isUndefined(arg){return void 0===arg},exports.isRegExp=function isRegExp(re){return"[object RegExp]"===objectToString(re)},exports.isObject=function isObject(arg){return"object"==typeof arg&&null!==arg},exports.isDate=function isDate(d){return"[object Date]"===objectToString(d)},exports.isError=function isError(e){return"[object Error]"===objectToString(e)||e instanceof Error},exports.isFunction=function isFunction(arg){return"function"==typeof arg},exports.isPrimitive=function isPrimitive(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||void 0===arg},exports.isBuffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer.isBuffer},"./node_modules/.pnpm/es5-ext@0.10.61/node_modules/es5-ext/global.js":module=>{var naiveFallback=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};module.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(error){return naiveFallback()}try{return __global__||naiveFallback()}finally{delete Object.prototype.__global__}}()},"./node_modules/.pnpm/ethereum-bloom-filters@1.0.10/node_modules/ethereum-bloom-filters/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const utils_1=__webpack_require__("./node_modules/.pnpm/ethereum-bloom-filters@1.0.10/node_modules/ethereum-bloom-filters/dist/utils.js");function isBloom(bloom){return"string"==typeof bloom&&(!!/^(0x)?[0-9a-f]{512}$/i.test(bloom)&&!(!/^(0x)?[0-9a-f]{512}$/.test(bloom)&&!/^(0x)?[0-9A-F]{512}$/.test(bloom)))}function isInBloom(bloom,value){"object"==typeof value&&value.constructor===Uint8Array&&(value=utils_1.bytesToHex(value));const hash=utils_1.keccak256(value).replace("0x","");for(let i=0;i<12;i+=4){const bitpos=(parseInt(hash.substr(i,2),16)<<8)+parseInt(hash.substr(i+2,2),16)&2047,offset=1<<bitpos%4;if((codePointToInt(bloom.charCodeAt(bloom.length-1-Math.floor(bitpos/4)))&offset)!==offset)return!1}return!0}function codePointToInt(codePoint){if(codePoint>=48&&codePoint<=57)return codePoint-48;if(codePoint>=65&&codePoint<=70)return codePoint-55;if(codePoint>=97&&codePoint<=102)return codePoint-87;throw new Error("invalid bloom")}function isTopic(topic){return"string"==typeof topic&&(!!/^(0x)?[0-9a-f]{64}$/i.test(topic)&&!(!/^(0x)?[0-9a-f]{64}$/.test(topic)&&!/^(0x)?[0-9A-F]{64}$/.test(topic)))}function isAddress(address){return"string"==typeof address&&(!!address.match(/^(0x)?[0-9a-fA-F]{40}$/)||!!address.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/))}exports.isBloom=isBloom,exports.isInBloom=isInBloom,exports.isUserEthereumAddressInBloom=function isUserEthereumAddressInBloom(bloom,ethereumAddress){if(!isBloom(bloom))throw new Error("Invalid bloom given");if(!isAddress(ethereumAddress))throw new Error(`Invalid ethereum address given: "${ethereumAddress}"`);return isInBloom(bloom,utils_1.padLeft(ethereumAddress,64))},exports.isContractAddressInBloom=function isContractAddressInBloom(bloom,contractAddress){if(!isBloom(bloom))throw new Error("Invalid bloom given");if(!isAddress(contractAddress))throw new Error(`Invalid contract address given: "${contractAddress}"`);return isInBloom(bloom,contractAddress)},exports.isTopicInBloom=function isTopicInBloom(bloom,topic){if(!isBloom(bloom))throw new Error("Invalid bloom given");if(!isTopic(topic))throw new Error("Invalid topic");return isInBloom(bloom,topic)},exports.isTopic=isTopic,exports.isAddress=isAddress},"./node_modules/.pnpm/ethereum-bloom-filters@1.0.10/node_modules/ethereum-bloom-filters/dist/utils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const sha3=__webpack_require__("./node_modules/.pnpm/js-sha3@0.8.0/node_modules/js-sha3/src/sha3.js");function toByteArray(value){if(null==value)throw new Error("cannot convert null value to array");if("string"==typeof value){const match=value.match(/^(0x)?[0-9a-fA-F]*$/);if(!match)throw new Error("invalid hexidecimal string");if("0x"!==match[1])throw new Error("hex string must have 0x prefix");(value=value.substring(2)).length%2&&(value="0"+value);const result=[];for(let i=0;i<value.length;i+=2)result.push(parseInt(value.substr(i,2),16));return addSlice(new Uint8Array(result))}if(function isByteArray(value){if(!value||parseInt(String(value.length))!=value.length||"string"==typeof value)return!1;for(let i=0;i<value.length;i++){const v=value[i];if(v<0||v>=256||parseInt(String(v))!=v)return!1}return!0}(value))return addSlice(new Uint8Array(value));throw new Error("invalid arrayify value")}function addSlice(array){return void 0!==array.slice||(array.slice=()=>{const args=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(array,args)))}),array}exports.keccak256=function keccak256(data){return"0x"+sha3.keccak_256(toByteArray(data))},exports.padLeft=(value,chars)=>{const hasPrefix=/^0x/i.test(value)||"number"==typeof value,padding=chars-(value=value.toString().replace(/^0x/i,"")).length+1>=0?chars-value.length+1:0;return(hasPrefix?"0x":"")+new Array(padding).join("0")+value},exports.bytesToHex=function bytesToHex(bytes){const hex=[];for(let i=0;i<bytes.length;i++)hex.push((bytes[i]>>>4).toString(16)),hex.push((15&bytes[i]).toString(16));return`0x${hex.join("").replace(/^0+/,"")}`},exports.toByteArray=toByteArray},"./node_modules/.pnpm/ethjs-unit@0.1.6/node_modules/ethjs-unit/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var BN=__webpack_require__("./node_modules/.pnpm/bn.js@4.11.6/node_modules/bn.js/lib/bn.js"),numberToBN=__webpack_require__("./node_modules/.pnpm/number-to-bn@1.7.0/node_modules/number-to-bn/src/index.js"),zero=new BN(0),negative1=new BN(-1),unitMap={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function getValueOfUnit(unitInput){var unit=unitInput?unitInput.toLowerCase():"ether",unitValue=unitMap[unit];if("string"!=typeof unitValue)throw new Error("[ethjs-unit] the unit provided "+unitInput+" doesn't exists, please use the one of the following units "+JSON.stringify(unitMap,null,2));return new BN(unitValue,10)}function numberToString(arg){if("string"==typeof arg){if(!arg.match(/^-?[0-9.]+$/))throw new Error("while converting number to string, invalid number value '"+arg+"', should be a number matching (^-?[0-9.]+).");return arg}if("number"==typeof arg)return String(arg);if("object"==typeof arg&&arg.toString&&(arg.toTwos||arg.dividedToIntegerBy))return arg.toPrecision?String(arg.toPrecision()):arg.toString(10);throw new Error("while converting number to string, invalid number value '"+arg+"' type "+typeof arg+".")}module.exports={unitMap,numberToString,getValueOfUnit,fromWei:function fromWei(weiInput,unit,optionsInput){var wei=numberToBN(weiInput),negative=wei.lt(zero),base=getValueOfUnit(unit),baseLength=unitMap[unit].length-1||1,options=optionsInput||{};negative&&(wei=wei.mul(negative1));for(var fraction=wei.mod(base).toString(10);fraction.length<baseLength;)fraction="0"+fraction;options.pad||(fraction=fraction.match(/^([0-9]*[1-9]|0)(0*)/)[1]);var whole=wei.div(base).toString(10);options.commify&&(whole=whole.replace(/\B(?=(\d{3})+(?!\d))/g,","));var value=whole+("0"==fraction?"":"."+fraction);return negative&&(value="-"+value),value},toWei:function toWei(etherInput,unit){var ether=numberToString(etherInput),base=getValueOfUnit(unit),baseLength=unitMap[unit].length-1||1,negative="-"===ether.substring(0,1);if(negative&&(ether=ether.substring(1)),"."===ether)throw new Error("[ethjs-unit] while converting number "+etherInput+" to wei, invalid value");var comps=ether.split(".");if(comps.length>2)throw new Error("[ethjs-unit] while converting number "+etherInput+" to wei,  too many decimal points");var whole=comps[0],fraction=comps[1];if(whole||(whole="0"),fraction||(fraction="0"),fraction.length>baseLength)throw new Error("[ethjs-unit] while converting number "+etherInput+" to wei, too many decimal places");for(;fraction.length<baseLength;)fraction+="0";whole=new BN(whole),fraction=new BN(fraction);var wei=whole.mul(base).add(fraction);return negative&&(wei=wei.mul(negative1)),new BN(wei.toString(10),10)}}},"./node_modules/.pnpm/eventemitter3@4.0.4/node_modules/eventemitter3/index.js":module=>{"use strict";var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}function EE(fn,context,once){this.fn=fn,this.context=context,this.once=once||!1}function addListener(emitter,event,fn,context,once){if("function"!=typeof fn)throw new TypeError("The listener must be a function");var listener=new EE(fn,context||emitter,once),evt=prefix?prefix+event:event;return emitter._events[evt]?emitter._events[evt].fn?emitter._events[evt]=[emitter._events[evt],listener]:emitter._events[evt].push(listener):(emitter._events[evt]=listener,emitter._eventsCount++),emitter}function clearEvent(emitter,evt){0==--emitter._eventsCount?emitter._events=new Events:delete emitter._events[evt]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function eventNames(){var events,name,names=[];if(0===this._eventsCount)return names;for(name in events=this._events)has.call(events,name)&&names.push(prefix?name.slice(1):name);return Object.getOwnPropertySymbols?names.concat(Object.getOwnPropertySymbols(events)):names},EventEmitter.prototype.listeners=function listeners(event){var evt=prefix?prefix+event:event,handlers=this._events[evt];if(!handlers)return[];if(handlers.fn)return[handlers.fn];for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++)ee[i]=handlers[i].fn;return ee},EventEmitter.prototype.listenerCount=function listenerCount(event){var evt=prefix?prefix+event:event,listeners=this._events[evt];return listeners?listeners.fn?1:listeners.length:0},EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return!1;var args,i,listeners=this._events[evt],len=arguments.length;if(listeners.fn){switch(listeners.once&&this.removeListener(event,listeners.fn,void 0,!0),len){case 1:return listeners.fn.call(listeners.context),!0;case 2:return listeners.fn.call(listeners.context,a1),!0;case 3:return listeners.fn.call(listeners.context,a1,a2),!0;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),!0;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),!0;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),!0}for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];listeners.fn.apply(listeners.context,args)}else{var j,length=listeners.length;for(i=0;i<length;i++)switch(listeners[i].once&&this.removeListener(event,listeners[i].fn,void 0,!0),len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++)args[j-1]=arguments[j];listeners[i].fn.apply(listeners[i].context,args)}}return!0},EventEmitter.prototype.on=function on(event,fn,context){return addListener(this,event,fn,context,!1)},EventEmitter.prototype.once=function once(event,fn,context){return addListener(this,event,fn,context,!0)},EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn)return clearEvent(this,evt),this;var listeners=this._events[evt];if(listeners.fn)listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context||clearEvent(this,evt);else{for(var i=0,events=[],length=listeners.length;i<length;i++)(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context)&&events.push(listeners[i]);events.length?this._events[evt]=1===events.length?events[0]:events:clearEvent(this,evt)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){var evt;return event?(evt=prefix?prefix+event:event,this._events[evt]&&clearEvent(this,evt)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,module.exports=EventEmitter},"./node_modules/.pnpm/is-stream@2.0.1/node_modules/is-stream/index.js":module=>{"use strict";const isStream=stream=>null!==stream&&"object"==typeof stream&&"function"==typeof stream.pipe;isStream.writable=stream=>isStream(stream)&&!1!==stream.writable&&"function"==typeof stream._write&&"object"==typeof stream._writableState,isStream.readable=stream=>isStream(stream)&&!1!==stream.readable&&"function"==typeof stream._read&&"object"==typeof stream._readableState,isStream.duplex=stream=>isStream.writable(stream)&&isStream.readable(stream),isStream.transform=stream=>isStream.duplex(stream)&&"function"==typeof stream._transform,module.exports=isStream},"./node_modules/.pnpm/isarray@1.0.0/node_modules/isarray/index.js":module=>{var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},"./node_modules/.pnpm/number-to-bn@1.7.0/node_modules/number-to-bn/src/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var BN=__webpack_require__("./node_modules/.pnpm/bn.js@4.11.6/node_modules/bn.js/lib/bn.js"),stripHexPrefix=__webpack_require__("./node_modules/.pnpm/strip-hex-prefix@1.0.0/node_modules/strip-hex-prefix/src/index.js");module.exports=function numberToBN(arg){if("string"==typeof arg||"number"==typeof arg){var multiplier=new BN(1),formattedString=String(arg).toLowerCase().trim(),isHexPrefixed="0x"===formattedString.substr(0,2)||"-0x"===formattedString.substr(0,3),stringArg=stripHexPrefix(formattedString);if("-"===stringArg.substr(0,1)&&(stringArg=stripHexPrefix(stringArg.slice(1)),multiplier=new BN(-1,10)),!(stringArg=""===stringArg?"0":stringArg).match(/^-?[0-9]+$/)&&stringArg.match(/^[0-9A-Fa-f]+$/)||stringArg.match(/^[a-fA-F]+$/)||!0===isHexPrefixed&&stringArg.match(/^[0-9A-Fa-f]+$/))return new BN(stringArg,16).mul(multiplier);if((stringArg.match(/^-?[0-9]+$/)||""===stringArg)&&!1===isHexPrefixed)return new BN(stringArg,10).mul(multiplier)}else if("object"==typeof arg&&arg.toString&&!arg.pop&&!arg.push&&arg.toString(10).match(/^-?[0-9]+$/)&&(arg.mul||arg.dividedToIntegerBy))return new BN(arg.toString(10),10);throw new Error("[number-to-bn] while converting number "+JSON.stringify(arg)+" to BN.js instance, error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance. Note, decimals are not supported.")}},"./node_modules/.pnpm/oboe@2.1.5/node_modules/oboe/dist/oboe-browser.js":function(module){!function webpackUniversalModuleDefinition(root,factory){module.exports=factory()}("undefined"!=typeof self&&self,(function(){return function(modules){var installedModules={};function __nested_webpack_require_611__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__nested_webpack_require_611__),module.l=!0,module.exports}return __nested_webpack_require_611__.m=modules,__nested_webpack_require_611__.c=installedModules,__nested_webpack_require_611__.d=function(exports,name,getter){__nested_webpack_require_611__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__nested_webpack_require_611__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __nested_webpack_require_611__.d(getter,"a",getter),getter},__nested_webpack_require_611__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__nested_webpack_require_611__.p="",__nested_webpack_require_611__(__nested_webpack_require_611__.s=7)}([function(module,__webpack_exports__,__nested_webpack_require_2900__){"use strict";__nested_webpack_require_2900__.d(__webpack_exports__,"j",(function(){return partialComplete})),__nested_webpack_require_2900__.d(__webpack_exports__,"d",(function(){return compose2})),__nested_webpack_require_2900__.d(__webpack_exports__,"c",(function(){return attr})),__nested_webpack_require_2900__.d(__webpack_exports__,"h",(function(){return lazyUnion})),__nested_webpack_require_2900__.d(__webpack_exports__,"b",(function(){return apply})),__nested_webpack_require_2900__.d(__webpack_exports__,"k",(function(){return varArgs})),__nested_webpack_require_2900__.d(__webpack_exports__,"e",(function(){return flip})),__nested_webpack_require_2900__.d(__webpack_exports__,"g",(function(){return lazyIntersection})),__nested_webpack_require_2900__.d(__webpack_exports__,"i",(function(){return noop})),__nested_webpack_require_2900__.d(__webpack_exports__,"a",(function(){return always})),__nested_webpack_require_2900__.d(__webpack_exports__,"f",(function(){return functor}));var __WEBPACK_IMPORTED_MODULE_0__lists__=__nested_webpack_require_2900__(1),partialComplete=varArgs((function(fn,args){var numBoundArgs=args.length;return varArgs((function(callArgs){for(var i=0;i<callArgs.length;i++)args[numBoundArgs+i]=callArgs[i];return args.length=numBoundArgs+callArgs.length,fn.apply(this,args)}))}));varArgs((function(fns){var fnsList=Object(__WEBPACK_IMPORTED_MODULE_0__lists__.c)(fns);function next(params,curFn){return[apply(params,curFn)]}return varArgs((function(startParams){return Object(__WEBPACK_IMPORTED_MODULE_0__lists__.f)(next,startParams,fnsList)[0]}))}));function compose2(f1,f2){return function(){return f1.call(this,f2.apply(this,arguments))}}function attr(key){return function(o){return o[key]}}var lazyUnion=varArgs((function(fns){return varArgs((function(params){for(var maybeValue,i=0;i<attr("length")(fns);i++)if(maybeValue=apply(params,fns[i]))return maybeValue}))}));function apply(args,fn){return fn.apply(void 0,args)}function varArgs(fn){var numberOfFixedArguments=fn.length-1,slice=Array.prototype.slice;if(0===numberOfFixedArguments)return function(){return fn.call(this,slice.call(arguments))};if(1===numberOfFixedArguments)return function(){return fn.call(this,arguments[0],slice.call(arguments,1))};var argsHolder=Array(fn.length);return function(){for(var i=0;i<numberOfFixedArguments;i++)argsHolder[i]=arguments[i];return argsHolder[numberOfFixedArguments]=slice.call(arguments,numberOfFixedArguments),fn.apply(this,argsHolder)}}function flip(fn){return function(a,b){return fn(b,a)}}function lazyIntersection(fn1,fn2){return function(param){return fn1(param)&&fn2(param)}}function noop(){}function always(){return!0}function functor(val){return function(){return val}}},function(module,__webpack_exports__,__nested_webpack_require_10022__){"use strict";__nested_webpack_require_10022__.d(__webpack_exports__,"d",(function(){return cons})),__nested_webpack_require_10022__.d(__webpack_exports__,"g",(function(){return head})),__nested_webpack_require_10022__.d(__webpack_exports__,"l",(function(){return tail})),__nested_webpack_require_10022__.d(__webpack_exports__,"c",(function(){return arrayAsList})),__nested_webpack_require_10022__.d(__webpack_exports__,"h",(function(){return list})),__nested_webpack_require_10022__.d(__webpack_exports__,"i",(function(){return listAsArray})),__nested_webpack_require_10022__.d(__webpack_exports__,"j",(function(){return map})),__nested_webpack_require_10022__.d(__webpack_exports__,"f",(function(){return foldR})),__nested_webpack_require_10022__.d(__webpack_exports__,"m",(function(){return without})),__nested_webpack_require_10022__.d(__webpack_exports__,"a",(function(){return all})),__nested_webpack_require_10022__.d(__webpack_exports__,"b",(function(){return applyEach})),__nested_webpack_require_10022__.d(__webpack_exports__,"k",(function(){return reverseList})),__nested_webpack_require_10022__.d(__webpack_exports__,"e",(function(){return first}));var __WEBPACK_IMPORTED_MODULE_0__functional__=__nested_webpack_require_10022__(0);function cons(x,xs){return[x,xs]}var head=Object(__WEBPACK_IMPORTED_MODULE_0__functional__.c)(0),tail=Object(__WEBPACK_IMPORTED_MODULE_0__functional__.c)(1);function arrayAsList(inputArray){return reverseList(inputArray.reduce(Object(__WEBPACK_IMPORTED_MODULE_0__functional__.e)(cons),null))}var list=Object(__WEBPACK_IMPORTED_MODULE_0__functional__.k)(arrayAsList);function listAsArray(list){return foldR((function(arraySoFar,listItem){return arraySoFar.unshift(listItem),arraySoFar}),[],list)}function map(fn,list){return list?cons(fn(head(list)),map(fn,tail(list))):null}function foldR(fn,startValue,list){return list?fn(foldR(fn,startValue,tail(list)),head(list)):startValue}function without(list,test,removedFn){return function withoutInner(subList,removedFn){return subList?test(head(subList))?(removedFn(head(subList)),tail(subList)):cons(head(subList),withoutInner(tail(subList),removedFn)):null}(list,removedFn||__WEBPACK_IMPORTED_MODULE_0__functional__.i)}function all(fn,list){return!list||fn(head(list))&&all(fn,tail(list))}function applyEach(fnList,args){fnList&&(head(fnList).apply(null,args),applyEach(tail(fnList),args))}function reverseList(list){return function reverseInner(list,reversedAlready){return list?reverseInner(tail(list),cons(head(list),reversedAlready)):reversedAlready}(list,null)}function first(test,list){return list&&(test(head(list))?head(list):first(test,tail(list)))}},function(module,__webpack_exports__,__nested_webpack_require_15680__){"use strict";__nested_webpack_require_15680__.d(__webpack_exports__,"c",(function(){return isOfType})),__nested_webpack_require_15680__.d(__webpack_exports__,"e",(function(){return len})),__nested_webpack_require_15680__.d(__webpack_exports__,"d",(function(){return isString})),__nested_webpack_require_15680__.d(__webpack_exports__,"a",(function(){return defined})),__nested_webpack_require_15680__.d(__webpack_exports__,"b",(function(){return hasAllProperties}));var __WEBPACK_IMPORTED_MODULE_0__lists__=__nested_webpack_require_15680__(1),__WEBPACK_IMPORTED_MODULE_1__functional__=__nested_webpack_require_15680__(0);function isOfType(T,maybeSomething){return maybeSomething&&maybeSomething.constructor===T}var len=Object(__WEBPACK_IMPORTED_MODULE_1__functional__.c)("length"),isString=Object(__WEBPACK_IMPORTED_MODULE_1__functional__.j)(isOfType,String);function defined(value){return void 0!==value}function hasAllProperties(fieldList,o){return o instanceof Object&&Object(__WEBPACK_IMPORTED_MODULE_0__lists__.a)((function(field){return field in o}),fieldList)}},function(module,__webpack_exports__,__nested_webpack_require_17586__){"use strict";__nested_webpack_require_17586__.d(__webpack_exports__,"f",(function(){return NODE_OPENED})),__nested_webpack_require_17586__.d(__webpack_exports__,"d",(function(){return NODE_CLOSED})),__nested_webpack_require_17586__.d(__webpack_exports__,"g",(function(){return NODE_SWAP})),__nested_webpack_require_17586__.d(__webpack_exports__,"e",(function(){return NODE_DROP})),__nested_webpack_require_17586__.d(__webpack_exports__,"b",(function(){return FAIL_EVENT})),__nested_webpack_require_17586__.d(__webpack_exports__,"h",(function(){return ROOT_NODE_FOUND})),__nested_webpack_require_17586__.d(__webpack_exports__,"i",(function(){return ROOT_PATH_FOUND})),__nested_webpack_require_17586__.d(__webpack_exports__,"c",(function(){return HTTP_START})),__nested_webpack_require_17586__.d(__webpack_exports__,"m",(function(){return STREAM_DATA})),__nested_webpack_require_17586__.d(__webpack_exports__,"n",(function(){return STREAM_END})),__nested_webpack_require_17586__.d(__webpack_exports__,"a",(function(){return ABORTING})),__nested_webpack_require_17586__.d(__webpack_exports__,"j",(function(){return SAX_KEY})),__nested_webpack_require_17586__.d(__webpack_exports__,"l",(function(){return SAX_VALUE_OPEN})),__nested_webpack_require_17586__.d(__webpack_exports__,"k",(function(){return SAX_VALUE_CLOSE})),__nested_webpack_require_17586__.d(__webpack_exports__,"o",(function(){return errorReport}));var _S=1,NODE_OPENED=_S++,NODE_CLOSED=_S++,NODE_SWAP=_S++,NODE_DROP=_S++,FAIL_EVENT="fail",ROOT_NODE_FOUND=_S++,ROOT_PATH_FOUND=_S++,HTTP_START="start",STREAM_DATA="data",STREAM_END="end",ABORTING=_S++,SAX_KEY=_S++,SAX_VALUE_OPEN=_S++,SAX_VALUE_CLOSE=_S++;function errorReport(statusCode,body,error){try{var jsonBody=JSON.parse(body)}catch(e){}return{statusCode,body,jsonBody,thrown:error}}},function(module,__webpack_exports__,__nested_webpack_require_20374__){"use strict";__nested_webpack_require_20374__.d(__webpack_exports__,"b",(function(){return namedNode})),__nested_webpack_require_20374__.d(__webpack_exports__,"a",(function(){return keyOf})),__nested_webpack_require_20374__.d(__webpack_exports__,"c",(function(){return nodeOf}));var __WEBPACK_IMPORTED_MODULE_0__functional__=__nested_webpack_require_20374__(0);function namedNode(key,node){return{key,node}}var keyOf=Object(__WEBPACK_IMPORTED_MODULE_0__functional__.c)("key"),nodeOf=Object(__WEBPACK_IMPORTED_MODULE_0__functional__.c)("node")},function(module,__webpack_exports__,__nested_webpack_require_21368__){"use strict";__nested_webpack_require_21368__.d(__webpack_exports__,"a",(function(){return oboe}));var __WEBPACK_IMPORTED_MODULE_0__lists__=__nested_webpack_require_21368__(1),__WEBPACK_IMPORTED_MODULE_1__functional__=__nested_webpack_require_21368__(0),__WEBPACK_IMPORTED_MODULE_2__util__=__nested_webpack_require_21368__(2),__WEBPACK_IMPORTED_MODULE_3__defaults__=__nested_webpack_require_21368__(8),__WEBPACK_IMPORTED_MODULE_4__wire__=__nested_webpack_require_21368__(9);function oboe(arg1){var nodeStreamMethodNames=Object(__WEBPACK_IMPORTED_MODULE_0__lists__.h)("resume","pause","pipe"),isStream=Object(__WEBPACK_IMPORTED_MODULE_1__functional__.j)(__WEBPACK_IMPORTED_MODULE_2__util__.b,nodeStreamMethodNames);return arg1?isStream(arg1)||Object(__WEBPACK_IMPORTED_MODULE_2__util__.d)(arg1)?Object(__WEBPACK_IMPORTED_MODULE_3__defaults__.a)(__WEBPACK_IMPORTED_MODULE_4__wire__.a,arg1):Object(__WEBPACK_IMPORTED_MODULE_3__defaults__.a)(__WEBPACK_IMPORTED_MODULE_4__wire__.a,arg1.url,arg1.method,arg1.body,arg1.headers,arg1.withCredentials,arg1.cached):Object(__WEBPACK_IMPORTED_MODULE_4__wire__.a)()}oboe.drop=function(){return oboe.drop}},function(module,__webpack_exports__,__nested_webpack_require_23862__){"use strict";__nested_webpack_require_23862__.d(__webpack_exports__,"b",(function(){return incrementalContentBuilder})),__nested_webpack_require_23862__.d(__webpack_exports__,"a",(function(){return ROOT_PATH}));var __WEBPACK_IMPORTED_MODULE_0__events__=__nested_webpack_require_23862__(3),__WEBPACK_IMPORTED_MODULE_1__ascent__=__nested_webpack_require_23862__(4),__WEBPACK_IMPORTED_MODULE_2__util__=__nested_webpack_require_23862__(2),__WEBPACK_IMPORTED_MODULE_3__lists__=__nested_webpack_require_23862__(1),ROOT_PATH={};function incrementalContentBuilder(oboeBus){var emitNodeOpened=oboeBus(__WEBPACK_IMPORTED_MODULE_0__events__.f).emit,emitNodeClosed=oboeBus(__WEBPACK_IMPORTED_MODULE_0__events__.d).emit,emitRootOpened=oboeBus(__WEBPACK_IMPORTED_MODULE_0__events__.i).emit,emitRootClosed=oboeBus(__WEBPACK_IMPORTED_MODULE_0__events__.h).emit;function appendBuiltContent(ancestorBranches,key,node){Object(__WEBPACK_IMPORTED_MODULE_1__ascent__.c)(Object(__WEBPACK_IMPORTED_MODULE_3__lists__.g)(ancestorBranches))[key]=node}function keyFound(ascent,newDeepestName,maybeNewDeepestNode){ascent&&appendBuiltContent(ascent,newDeepestName,maybeNewDeepestNode);var ascentWithNewPath=Object(__WEBPACK_IMPORTED_MODULE_3__lists__.d)(Object(__WEBPACK_IMPORTED_MODULE_1__ascent__.b)(newDeepestName,maybeNewDeepestNode),ascent);return emitNodeOpened(ascentWithNewPath),ascentWithNewPath}var contentBuilderHandlers={};return contentBuilderHandlers[__WEBPACK_IMPORTED_MODULE_0__events__.l]=function nodeOpened(ascent,newDeepestNode){if(!ascent)return emitRootOpened(newDeepestNode),keyFound(ascent,ROOT_PATH,newDeepestNode);var arrayConsistentAscent=function arrayIndicesAreKeys(possiblyInconsistentAscent,newDeepestNode){var parentNode=Object(__WEBPACK_IMPORTED_MODULE_1__ascent__.c)(Object(__WEBPACK_IMPORTED_MODULE_3__lists__.g)(possiblyInconsistentAscent));return Object(__WEBPACK_IMPORTED_MODULE_2__util__.c)(Array,parentNode)?keyFound(possiblyInconsistentAscent,Object(__WEBPACK_IMPORTED_MODULE_2__util__.e)(parentNode),newDeepestNode):possiblyInconsistentAscent}(ascent,newDeepestNode),ancestorBranches=Object(__WEBPACK_IMPORTED_MODULE_3__lists__.l)(arrayConsistentAscent),previouslyUnmappedName=Object(__WEBPACK_IMPORTED_MODULE_1__ascent__.a)(Object(__WEBPACK_IMPORTED_MODULE_3__lists__.g)(arrayConsistentAscent));return appendBuiltContent(ancestorBranches,previouslyUnmappedName,newDeepestNode),Object(__WEBPACK_IMPORTED_MODULE_3__lists__.d)(Object(__WEBPACK_IMPORTED_MODULE_1__ascent__.b)(previouslyUnmappedName,newDeepestNode),ancestorBranches)},contentBuilderHandlers[__WEBPACK_IMPORTED_MODULE_0__events__.k]=function nodeClosed(ascent){return emitNodeClosed(ascent),Object(__WEBPACK_IMPORTED_MODULE_3__lists__.l)(ascent)||emitRootClosed(Object(__WEBPACK_IMPORTED_MODULE_1__ascent__.c)(Object(__WEBPACK_IMPORTED_MODULE_3__lists__.g)(ascent)))},contentBuilderHandlers[__WEBPACK_IMPORTED_MODULE_0__events__.j]=keyFound,contentBuilderHandlers}},function(module,__webpack_exports__,__nested_webpack_require_30342__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__publicApi__=__nested_webpack_require_30342__(5);__webpack_exports__.default=__WEBPACK_IMPORTED_MODULE_0__publicApi__.a},function(module,__webpack_exports__,__nested_webpack_require_30736__){"use strict";__nested_webpack_require_30736__.d(__webpack_exports__,"a",(function(){return applyDefaults}));var __WEBPACK_IMPORTED_MODULE_0__util__=__nested_webpack_require_30736__(2);function applyDefaults(passthrough,url,httpMethodName,body,headers,withCredentials,cached){return headers=headers?JSON.parse(JSON.stringify(headers)):{},body?(Object(__WEBPACK_IMPORTED_MODULE_0__util__.d)(body)||(body=JSON.stringify(body),headers["Content-Type"]=headers["Content-Type"]||"application/json"),headers["Content-Length"]=headers["Content-Length"]||body.length):body=null,passthrough(httpMethodName||"GET",function modifiedUrl(baseUrl,cached){return!1===cached&&(-1===baseUrl.indexOf("?")?baseUrl+="?":baseUrl+="&",baseUrl+="_="+(new Date).getTime()),baseUrl}(url,cached),body,headers,withCredentials||!1)}},function(module,__webpack_exports__,__nested_webpack_require_32331__){"use strict";__nested_webpack_require_32331__.d(__webpack_exports__,"a",(function(){return wire}));var __WEBPACK_IMPORTED_MODULE_0__pubSub__=__nested_webpack_require_32331__(10),__WEBPACK_IMPORTED_MODULE_1__ascentManager__=__nested_webpack_require_32331__(12),__WEBPACK_IMPORTED_MODULE_2__incrementalContentBuilder__=__nested_webpack_require_32331__(6),__WEBPACK_IMPORTED_MODULE_3__patternAdapter__=__nested_webpack_require_32331__(13),__WEBPACK_IMPORTED_MODULE_4__jsonPath__=__nested_webpack_require_32331__(14),__WEBPACK_IMPORTED_MODULE_5__instanceApi__=__nested_webpack_require_32331__(16),__WEBPACK_IMPORTED_MODULE_6__libs_clarinet__=__nested_webpack_require_32331__(17),__WEBPACK_IMPORTED_MODULE_7__streamingHttp_node__=__nested_webpack_require_32331__(18);function wire(httpMethodName,contentSource,body,headers,withCredentials){var oboeBus=Object(__WEBPACK_IMPORTED_MODULE_0__pubSub__.a)();return contentSource&&Object(__WEBPACK_IMPORTED_MODULE_7__streamingHttp_node__.b)(oboeBus,Object(__WEBPACK_IMPORTED_MODULE_7__streamingHttp_node__.a)(),httpMethodName,contentSource,body,headers,withCredentials),Object(__WEBPACK_IMPORTED_MODULE_6__libs_clarinet__.a)(oboeBus),Object(__WEBPACK_IMPORTED_MODULE_1__ascentManager__.a)(oboeBus,Object(__WEBPACK_IMPORTED_MODULE_2__incrementalContentBuilder__.b)(oboeBus)),Object(__WEBPACK_IMPORTED_MODULE_3__patternAdapter__.a)(oboeBus,__WEBPACK_IMPORTED_MODULE_4__jsonPath__.a),Object(__WEBPACK_IMPORTED_MODULE_5__instanceApi__.a)(oboeBus,contentSource)}},function(module,__webpack_exports__,__nested_webpack_require_34741__){"use strict";__nested_webpack_require_34741__.d(__webpack_exports__,"a",(function(){return pubSub}));var __WEBPACK_IMPORTED_MODULE_0__singleEventPubSub__=__nested_webpack_require_34741__(11),__WEBPACK_IMPORTED_MODULE_1__functional__=__nested_webpack_require_34741__(0);function pubSub(){var singles={},newListener=newSingle("newListener"),removeListener=newSingle("removeListener");function newSingle(eventName){return singles[eventName]=Object(__WEBPACK_IMPORTED_MODULE_0__singleEventPubSub__.a)(eventName,newListener,removeListener),singles[eventName]}function pubSubInstance(eventName){return singles[eventName]||newSingle(eventName)}return["emit","on","un"].forEach((function(methodName){pubSubInstance[methodName]=Object(__WEBPACK_IMPORTED_MODULE_1__functional__.k)((function(eventName,parameters){Object(__WEBPACK_IMPORTED_MODULE_1__functional__.b)(parameters,pubSubInstance(eventName)[methodName])}))})),pubSubInstance}},function(module,__webpack_exports__,__nested_webpack_require_36824__){"use strict";__nested_webpack_require_36824__.d(__webpack_exports__,"a",(function(){return singleEventPubSub}));var __WEBPACK_IMPORTED_MODULE_0__lists__=__nested_webpack_require_36824__(1),__WEBPACK_IMPORTED_MODULE_1__util__=__nested_webpack_require_36824__(2),__WEBPACK_IMPORTED_MODULE_2__functional__=__nested_webpack_require_36824__(0);function singleEventPubSub(eventType,newListener,removeListener){var listenerTupleList,listenerList;function hasId(id){return function(tuple){return tuple.id===id}}return{on:function(listener,listenerId){var tuple={listener,id:listenerId||listener};return newListener&&newListener.emit(eventType,listener,tuple.id),listenerTupleList=Object(__WEBPACK_IMPORTED_MODULE_0__lists__.d)(tuple,listenerTupleList),listenerList=Object(__WEBPACK_IMPORTED_MODULE_0__lists__.d)(listener,listenerList),this},emit:function(){Object(__WEBPACK_IMPORTED_MODULE_0__lists__.b)(listenerList,arguments)},un:function(listenerId){var removed;listenerTupleList=Object(__WEBPACK_IMPORTED_MODULE_0__lists__.m)(listenerTupleList,hasId(listenerId),(function(tuple){removed=tuple})),removed&&(listenerList=Object(__WEBPACK_IMPORTED_MODULE_0__lists__.m)(listenerList,(function(listener){return listener===removed.listener})),removeListener&&removeListener.emit(eventType,removed.listener,removed.id))},listeners:function(){return listenerList},hasListener:function(listenerId){var test=listenerId?hasId(listenerId):__WEBPACK_IMPORTED_MODULE_2__functional__.a;return Object(__WEBPACK_IMPORTED_MODULE_1__util__.a)(Object(__WEBPACK_IMPORTED_MODULE_0__lists__.e)(test,listenerTupleList))}}}},function(module,__webpack_exports__,__nested_webpack_require_40160__){"use strict";__nested_webpack_require_40160__.d(__webpack_exports__,"a",(function(){return ascentManager}));var __WEBPACK_IMPORTED_MODULE_0__ascent__=__nested_webpack_require_40160__(4),__WEBPACK_IMPORTED_MODULE_1__events__=__nested_webpack_require_40160__(3),__WEBPACK_IMPORTED_MODULE_2__lists__=__nested_webpack_require_40160__(1);function ascentManager(oboeBus,handlers){var ascent,listenerId={};function stateAfter(handler){return function(param){ascent=handler(ascent,param)}}for(var eventName in handlers)oboeBus(eventName).on(stateAfter(handlers[eventName]),listenerId);oboeBus(__WEBPACK_IMPORTED_MODULE_1__events__.g).on((function(newNode){var oldHead=Object(__WEBPACK_IMPORTED_MODULE_2__lists__.g)(ascent),key=Object(__WEBPACK_IMPORTED_MODULE_0__ascent__.a)(oldHead),ancestors=Object(__WEBPACK_IMPORTED_MODULE_2__lists__.l)(ascent);ancestors&&(Object(__WEBPACK_IMPORTED_MODULE_0__ascent__.c)(Object(__WEBPACK_IMPORTED_MODULE_2__lists__.g)(ancestors))[key]=newNode)})),oboeBus(__WEBPACK_IMPORTED_MODULE_1__events__.e).on((function(){var oldHead=Object(__WEBPACK_IMPORTED_MODULE_2__lists__.g)(ascent),key=Object(__WEBPACK_IMPORTED_MODULE_0__ascent__.a)(oldHead),ancestors=Object(__WEBPACK_IMPORTED_MODULE_2__lists__.l)(ascent);ancestors&&delete Object(__WEBPACK_IMPORTED_MODULE_0__ascent__.c)(Object(__WEBPACK_IMPORTED_MODULE_2__lists__.g)(ancestors))[key]})),oboeBus(__WEBPACK_IMPORTED_MODULE_1__events__.a).on((function(){for(var eventName in handlers)oboeBus(eventName).un(listenerId)}))}},function(module,__webpack_exports__,__nested_webpack_require_42649__){"use strict";__nested_webpack_require_42649__.d(__webpack_exports__,"a",(function(){return patternAdapter}));var __WEBPACK_IMPORTED_MODULE_0__events__=__nested_webpack_require_42649__(3),__WEBPACK_IMPORTED_MODULE_1__lists__=__nested_webpack_require_42649__(1),__WEBPACK_IMPORTED_MODULE_2__ascent__=__nested_webpack_require_42649__(4);function patternAdapter(oboeBus,jsonPathCompiler){var predicateEventMap={node:oboeBus(__WEBPACK_IMPORTED_MODULE_0__events__.d),path:oboeBus(__WEBPACK_IMPORTED_MODULE_0__events__.f)};function addUnderlyingListener(fullEventName,predicateEvent,compiledJsonPath){var emitMatch=oboeBus(fullEventName).emit;predicateEvent.on((function(ascent){var maybeMatchingMapping=compiledJsonPath(ascent);!1!==maybeMatchingMapping&&function emitMatchingNode(emitMatch,node,ascent){var descent=Object(__WEBPACK_IMPORTED_MODULE_1__lists__.k)(ascent);emitMatch(node,Object(__WEBPACK_IMPORTED_MODULE_1__lists__.i)(Object(__WEBPACK_IMPORTED_MODULE_1__lists__.l)(Object(__WEBPACK_IMPORTED_MODULE_1__lists__.j)(__WEBPACK_IMPORTED_MODULE_2__ascent__.a,descent))),Object(__WEBPACK_IMPORTED_MODULE_1__lists__.i)(Object(__WEBPACK_IMPORTED_MODULE_1__lists__.j)(__WEBPACK_IMPORTED_MODULE_2__ascent__.c,descent)))}(emitMatch,Object(__WEBPACK_IMPORTED_MODULE_2__ascent__.c)(maybeMatchingMapping),ascent)}),fullEventName),oboeBus("removeListener").on((function(removedEventName){removedEventName===fullEventName&&(oboeBus(removedEventName).listeners()||predicateEvent.un(fullEventName))}))}oboeBus("newListener").on((function(fullEventName){var match=/(node|path):(.*)/.exec(fullEventName);if(match){var predicateEvent=predicateEventMap[match[1]];predicateEvent.hasListener(fullEventName)||addUnderlyingListener(fullEventName,predicateEvent,jsonPathCompiler(match[2]))}}))}},function(module,__webpack_exports__,__nested_webpack_require_46869__){"use strict";__nested_webpack_require_46869__.d(__webpack_exports__,"a",(function(){return jsonPathCompiler}));var __WEBPACK_IMPORTED_MODULE_0__functional__=__nested_webpack_require_46869__(0),__WEBPACK_IMPORTED_MODULE_1__lists__=__nested_webpack_require_46869__(1),__WEBPACK_IMPORTED_MODULE_2__ascent__=__nested_webpack_require_46869__(4),__WEBPACK_IMPORTED_MODULE_3__util__=__nested_webpack_require_46869__(2),__WEBPACK_IMPORTED_MODULE_4__incrementalContentBuilder__=__nested_webpack_require_46869__(6),__WEBPACK_IMPORTED_MODULE_5__jsonPathSyntax__=__nested_webpack_require_46869__(15),jsonPathCompiler=Object(__WEBPACK_IMPORTED_MODULE_5__jsonPathSyntax__.a)((function(pathNodeSyntax,doubleDotSyntax,dotSyntax,bangSyntax,emptySyntax){var headKey=Object(__WEBPACK_IMPORTED_MODULE_0__functional__.d)(__WEBPACK_IMPORTED_MODULE_2__ascent__.a,__WEBPACK_IMPORTED_MODULE_1__lists__.g),headNode=Object(__WEBPACK_IMPORTED_MODULE_0__functional__.d)(__WEBPACK_IMPORTED_MODULE_2__ascent__.c,__WEBPACK_IMPORTED_MODULE_1__lists__.g);function capture(previousExpr,detection){return!!detection[1]?Object(__WEBPACK_IMPORTED_MODULE_0__functional__.g)(previousExpr,__WEBPACK_IMPORTED_MODULE_1__lists__.g):previousExpr}function skip1(previousExpr){if(previousExpr===__WEBPACK_IMPORTED_MODULE_0__functional__.a)return __WEBPACK_IMPORTED_MODULE_0__functional__.a;return Object(__WEBPACK_IMPORTED_MODULE_0__functional__.g)((function notAtRoot(ascent){return headKey(ascent)!==__WEBPACK_IMPORTED_MODULE_4__incrementalContentBuilder__.a}),Object(__WEBPACK_IMPORTED_MODULE_0__functional__.d)(previousExpr,__WEBPACK_IMPORTED_MODULE_1__lists__.l))}function rootExpr(){return function(ascent){return headKey(ascent)===__WEBPACK_IMPORTED_MODULE_4__incrementalContentBuilder__.a}}function generateClauseReaderIfTokenFound(tokenDetector,clauseEvaluatorGenerators,jsonPath,parserGeneratedSoFar,onSuccess){var detected=tokenDetector(jsonPath);if(detected){var compiledParser=function expressionsReader(exprs,parserGeneratedSoFar,detection){return Object(__WEBPACK_IMPORTED_MODULE_1__lists__.f)((function(parserGeneratedSoFar,expr){return expr(parserGeneratedSoFar,detection)}),parserGeneratedSoFar,exprs)}(clauseEvaluatorGenerators,parserGeneratedSoFar,detected);return onSuccess(jsonPath.substr(Object(__WEBPACK_IMPORTED_MODULE_3__util__.e)(detected[0])),compiledParser)}}function clauseMatcher(tokenDetector,exprs){return Object(__WEBPACK_IMPORTED_MODULE_0__functional__.j)(generateClauseReaderIfTokenFound,tokenDetector,exprs)}var clauseForJsonPath=Object(__WEBPACK_IMPORTED_MODULE_0__functional__.h)(clauseMatcher(pathNodeSyntax,Object(__WEBPACK_IMPORTED_MODULE_1__lists__.h)(capture,(function duckTypeClause(previousExpr,detection){var fieldListStr=detection[3];if(!fieldListStr)return previousExpr;var hasAllrequiredFields=Object(__WEBPACK_IMPORTED_MODULE_0__functional__.j)(__WEBPACK_IMPORTED_MODULE_3__util__.b,Object(__WEBPACK_IMPORTED_MODULE_1__lists__.c)(fieldListStr.split(/\W+/))),isMatch=Object(__WEBPACK_IMPORTED_MODULE_0__functional__.d)(hasAllrequiredFields,headNode);return Object(__WEBPACK_IMPORTED_MODULE_0__functional__.g)(isMatch,previousExpr)}),(function nameClause(previousExpr,detection){var name=detection[2],matchesName=name&&"*"!==name?function(ascent){return String(headKey(ascent))===name}:__WEBPACK_IMPORTED_MODULE_0__functional__.a;return Object(__WEBPACK_IMPORTED_MODULE_0__functional__.g)(matchesName,previousExpr)}),skip1)),clauseMatcher(doubleDotSyntax,Object(__WEBPACK_IMPORTED_MODULE_1__lists__.h)((function skipMany(previousExpr){if(previousExpr===__WEBPACK_IMPORTED_MODULE_0__functional__.a)return __WEBPACK_IMPORTED_MODULE_0__functional__.a;var terminalCaseWhenArrivingAtRoot=rootExpr(),terminalCaseWhenPreviousExpressionIsSatisfied=previousExpr,recursiveCase=skip1((function(ascent){return cases(ascent)})),cases=Object(__WEBPACK_IMPORTED_MODULE_0__functional__.h)(terminalCaseWhenArrivingAtRoot,terminalCaseWhenPreviousExpressionIsSatisfied,recursiveCase);return cases}))),clauseMatcher(dotSyntax,Object(__WEBPACK_IMPORTED_MODULE_1__lists__.h)()),clauseMatcher(bangSyntax,Object(__WEBPACK_IMPORTED_MODULE_1__lists__.h)(capture,rootExpr)),clauseMatcher(emptySyntax,Object(__WEBPACK_IMPORTED_MODULE_1__lists__.h)((function statementExpr(lastClause){return function(ascent){var exprMatch=lastClause(ascent);return!0===exprMatch?Object(__WEBPACK_IMPORTED_MODULE_1__lists__.g)(ascent):exprMatch}}))),(function(jsonPath){throw Error('"'+jsonPath+'" could not be tokenised')}));function returnFoundParser(_remainingJsonPath,compiledParser){return compiledParser}function compileJsonPathToFunction(uncompiledJsonPath,parserGeneratedSoFar){return clauseForJsonPath(uncompiledJsonPath,parserGeneratedSoFar,uncompiledJsonPath?compileJsonPathToFunction:returnFoundParser)}return function(jsonPath){try{return compileJsonPathToFunction(jsonPath,__WEBPACK_IMPORTED_MODULE_0__functional__.a)}catch(e){throw Error('Could not compile "'+jsonPath+'" because '+e.message)}}}))},function(module,__webpack_exports__,__nested_webpack_require_60590__){"use strict";__nested_webpack_require_60590__.d(__webpack_exports__,"a",(function(){return jsonPathSyntax}));var jsonPathClause,possiblyCapturing,optionalFieldList,jsonPathNamedNodeInObjectNotation,jsonPathNamedNodeInArrayNotation,jsonPathNumberedNodeInArrayNotation,jsonPathPureDuckTyping,jsonPathDoubleDot,jsonPathDot,jsonPathBang,emptyString,__WEBPACK_IMPORTED_MODULE_0__functional__=__nested_webpack_require_60590__(0),jsonPathSyntax=(jsonPathClause=Object(__WEBPACK_IMPORTED_MODULE_0__functional__.k)((function(componentRegexes){return componentRegexes.unshift(/^/),function regexDescriptor(regex){return regex.exec.bind(regex)}(RegExp(componentRegexes.map(Object(__WEBPACK_IMPORTED_MODULE_0__functional__.c)("source")).join("")))})),jsonPathNamedNodeInObjectNotation=jsonPathClause(possiblyCapturing=/(\$?)/,/([\w-_]+|\*)/,optionalFieldList=/(?:{([\w ]*?)})?/),jsonPathNamedNodeInArrayNotation=jsonPathClause(possiblyCapturing,/\["([^"]+)"\]/,optionalFieldList),jsonPathNumberedNodeInArrayNotation=jsonPathClause(possiblyCapturing,/\[(\d+|\*)\]/,optionalFieldList),jsonPathPureDuckTyping=jsonPathClause(possiblyCapturing,/()/,/{([\w ]*?)}/),jsonPathDoubleDot=jsonPathClause(/\.\./),jsonPathDot=jsonPathClause(/\./),jsonPathBang=jsonPathClause(possiblyCapturing,/!/),emptyString=jsonPathClause(/$/),function(fn){return fn(Object(__WEBPACK_IMPORTED_MODULE_0__functional__.h)(jsonPathNamedNodeInObjectNotation,jsonPathNamedNodeInArrayNotation,jsonPathNumberedNodeInArrayNotation,jsonPathPureDuckTyping),jsonPathDoubleDot,jsonPathDot,jsonPathBang,emptyString)})},function(module,__webpack_exports__,__nested_webpack_require_63900__){"use strict";__nested_webpack_require_63900__.d(__webpack_exports__,"a",(function(){return instanceApi}));var __WEBPACK_IMPORTED_MODULE_0__events__=__nested_webpack_require_63900__(3),__WEBPACK_IMPORTED_MODULE_1__functional__=__nested_webpack_require_63900__(0),__WEBPACK_IMPORTED_MODULE_2__util__=__nested_webpack_require_63900__(2),__WEBPACK_IMPORTED_MODULE_3__publicApi__=__nested_webpack_require_63900__(5);function instanceApi(oboeBus,contentSource){var oboeApi,fullyQualifiedNamePattern=/^(node|path):./,rootNodeFinishedEvent=oboeBus(__WEBPACK_IMPORTED_MODULE_0__events__.h),emitNodeDrop=oboeBus(__WEBPACK_IMPORTED_MODULE_0__events__.e).emit,emitNodeSwap=oboeBus(__WEBPACK_IMPORTED_MODULE_0__events__.g).emit,addListener=Object(__WEBPACK_IMPORTED_MODULE_1__functional__.k)((function(eventId,parameters){if(oboeApi[eventId])Object(__WEBPACK_IMPORTED_MODULE_1__functional__.b)(parameters,oboeApi[eventId]);else{var event=oboeBus(eventId),listener=parameters[0];fullyQualifiedNamePattern.test(eventId)?addForgettableCallback(event,wrapCallbackToSwapNodeIfSomethingReturned(listener)):event.on(listener)}return oboeApi}));function addForgettableCallback(event,callback,listenerId){listenerId=listenerId||callback;var safeCallback=protectedCallback(callback);return event.on((function(){var discard=!1;oboeApi.forget=function(){discard=!0},Object(__WEBPACK_IMPORTED_MODULE_1__functional__.b)(arguments,safeCallback),delete oboeApi.forget,discard&&event.un(listenerId)}),listenerId),oboeApi}function protectedCallback(callback){return function(){try{return callback.apply(oboeApi,arguments)}catch(e){setTimeout((function(){throw new Error(e.message)}))}}}function wrapCallbackToSwapNodeIfSomethingReturned(callback){return function(){var returnValueFromCallback=callback.apply(this,arguments);Object(__WEBPACK_IMPORTED_MODULE_2__util__.a)(returnValueFromCallback)&&(returnValueFromCallback===__WEBPACK_IMPORTED_MODULE_3__publicApi__.a.drop?emitNodeDrop():emitNodeSwap(returnValueFromCallback))}}function addSingleNodeOrPathListener(eventId,pattern,callback){var effectiveCallback;effectiveCallback="node"===eventId?wrapCallbackToSwapNodeIfSomethingReturned(callback):callback,addForgettableCallback(function fullyQualifiedPatternMatchEvent(type,pattern){return oboeBus(type+":"+pattern)}(eventId,pattern),effectiveCallback,callback)}function addNodeOrPathListenerApi(eventId,jsonPathOrListenerMap,callback){return Object(__WEBPACK_IMPORTED_MODULE_2__util__.d)(jsonPathOrListenerMap)?addSingleNodeOrPathListener(eventId,jsonPathOrListenerMap,callback):function addMultipleNodeOrPathListeners(eventId,listenerMap){for(var pattern in listenerMap)addSingleNodeOrPathListener(eventId,pattern,listenerMap[pattern])}(eventId,jsonPathOrListenerMap),oboeApi}return oboeBus(__WEBPACK_IMPORTED_MODULE_0__events__.i).on((function(rootNode){oboeApi.root=Object(__WEBPACK_IMPORTED_MODULE_1__functional__.f)(rootNode)})),oboeBus(__WEBPACK_IMPORTED_MODULE_0__events__.c).on((function(_statusCode,headers){oboeApi.header=function(name){return name?headers[name]:headers}})),oboeApi={on:addListener,addListener,removeListener:function(eventId,p2,p3){if("done"===eventId)rootNodeFinishedEvent.un(p2);else if("node"===eventId||"path"===eventId)oboeBus.un(eventId+":"+p2,p3);else{var listener=p2;oboeBus(eventId).un(listener)}return oboeApi},emit:oboeBus.emit,node:Object(__WEBPACK_IMPORTED_MODULE_1__functional__.j)(addNodeOrPathListenerApi,"node"),path:Object(__WEBPACK_IMPORTED_MODULE_1__functional__.j)(addNodeOrPathListenerApi,"path"),done:Object(__WEBPACK_IMPORTED_MODULE_1__functional__.j)(addForgettableCallback,rootNodeFinishedEvent),start:Object(__WEBPACK_IMPORTED_MODULE_1__functional__.j)((function addProtectedCallback(eventName,callback){return oboeBus(eventName).on(protectedCallback(callback),callback),oboeApi}),__WEBPACK_IMPORTED_MODULE_0__events__.c),fail:oboeBus(__WEBPACK_IMPORTED_MODULE_0__events__.b).on,abort:oboeBus(__WEBPACK_IMPORTED_MODULE_0__events__.a).emit,header:__WEBPACK_IMPORTED_MODULE_1__functional__.i,root:__WEBPACK_IMPORTED_MODULE_1__functional__.i,source:contentSource}}},function(module,__webpack_exports__,__nested_webpack_require_72263__){"use strict";__nested_webpack_require_72263__.d(__webpack_exports__,"a",(function(){return clarinet}));var __WEBPACK_IMPORTED_MODULE_0__events__=__nested_webpack_require_72263__(3);function clarinet(eventBus){var latestError,c,p,textNode,emitSaxKey=eventBus(__WEBPACK_IMPORTED_MODULE_0__events__.j).emit,emitValueOpen=eventBus(__WEBPACK_IMPORTED_MODULE_0__events__.l).emit,emitValueClose=eventBus(__WEBPACK_IMPORTED_MODULE_0__events__.k).emit,emitFail=eventBus(__WEBPACK_IMPORTED_MODULE_0__events__.b).emit,stringTokenPattern=/[\\"\n]/g,_n=0,BEGIN=_n++,VALUE=_n++,OPEN_OBJECT=_n++,CLOSE_OBJECT=_n++,OPEN_ARRAY=_n++,CLOSE_ARRAY=_n++,STRING=_n++,OPEN_KEY=_n++,CLOSE_KEY=_n++,TRUE=_n++,TRUE2=_n++,TRUE3=_n++,FALSE=_n++,FALSE2=_n++,FALSE3=_n++,FALSE4=_n++,NULL=_n++,NULL2=_n++,NULL3=_n++,NUMBER_DECIMAL_POINT=_n++,bufferCheckPosition=65536,numberNode="",slashed=!1,closed=!1,state=BEGIN,stack=[],unicodeS=null,unicodeI=0,depth=0,position=0,column=0,line=1;function emitError(errorString){void 0!==textNode&&(emitValueOpen(textNode),emitValueClose(),textNode=void 0),latestError=Error(errorString+"\nLn: "+line+"\nCol: "+column+"\nChr: "+c),emitFail(Object(__WEBPACK_IMPORTED_MODULE_0__events__.o)(void 0,void 0,latestError))}function whitespace(c){return"\r"===c||"\n"===c||" "===c||"\t"===c}eventBus(__WEBPACK_IMPORTED_MODULE_0__events__.m).on((function handleData(chunk){if(latestError)return;if(closed)return emitError("Cannot write after close");var i=0;c=chunk[0];for(;c&&(i>0&&(p=c),c=chunk[i++]);)switch(position++,"\n"===c?(line++,column=0):column++,state){case BEGIN:if("{"===c)state=OPEN_OBJECT;else if("["===c)state=OPEN_ARRAY;else if(!whitespace(c))return emitError("Non-whitespace before {[.");continue;case OPEN_KEY:case OPEN_OBJECT:if(whitespace(c))continue;if(state===OPEN_KEY)stack.push(CLOSE_KEY);else{if("}"===c){emitValueOpen({}),emitValueClose(),state=stack.pop()||VALUE;continue}stack.push(CLOSE_OBJECT)}if('"'!==c)return emitError('Malformed object key should start with " ');state=STRING;continue;case CLOSE_KEY:case CLOSE_OBJECT:if(whitespace(c))continue;if(":"===c)state===CLOSE_OBJECT?(stack.push(CLOSE_OBJECT),void 0!==textNode&&(emitValueOpen({}),emitSaxKey(textNode),textNode=void 0),depth++):void 0!==textNode&&(emitSaxKey(textNode),textNode=void 0),state=VALUE;else if("}"===c)void 0!==textNode&&(emitValueOpen(textNode),emitValueClose(),textNode=void 0),emitValueClose(),depth--,state=stack.pop()||VALUE;else{if(","!==c)return emitError("Bad object");state===CLOSE_OBJECT&&stack.push(CLOSE_OBJECT),void 0!==textNode&&(emitValueOpen(textNode),emitValueClose(),textNode=void 0),state=OPEN_KEY}continue;case OPEN_ARRAY:case VALUE:if(whitespace(c))continue;if(state===OPEN_ARRAY){if(emitValueOpen([]),depth++,state=VALUE,"]"===c){emitValueClose(),depth--,state=stack.pop()||VALUE;continue}stack.push(CLOSE_ARRAY)}if('"'===c)state=STRING;else if("{"===c)state=OPEN_OBJECT;else if("["===c)state=OPEN_ARRAY;else if("t"===c)state=TRUE;else if("f"===c)state=FALSE;else if("n"===c)state=NULL;else if("-"===c)numberNode+=c;else if("0"===c)numberNode+=c,state=20;else{if(-1==="123456789".indexOf(c))return emitError("Bad value");numberNode+=c,state=20}continue;case CLOSE_ARRAY:if(","===c)stack.push(CLOSE_ARRAY),void 0!==textNode&&(emitValueOpen(textNode),emitValueClose(),textNode=void 0),state=VALUE;else{if("]"!==c){if(whitespace(c))continue;return emitError("Bad array")}void 0!==textNode&&(emitValueOpen(textNode),emitValueClose(),textNode=void 0),emitValueClose(),depth--,state=stack.pop()||VALUE}continue;case STRING:void 0===textNode&&(textNode="");var starti=i-1;STRING_BIGLOOP:for(;;){for(;unicodeI>0;)if(unicodeS+=c,c=chunk.charAt(i++),4===unicodeI?(textNode+=String.fromCharCode(parseInt(unicodeS,16)),unicodeI=0,starti=i-1):unicodeI++,!c)break STRING_BIGLOOP;if('"'===c&&!slashed){state=stack.pop()||VALUE,textNode+=chunk.substring(starti,i-1);break}if(!("\\"!==c||slashed||(slashed=!0,textNode+=chunk.substring(starti,i-1),c=chunk.charAt(i++))))break;if(slashed){if(slashed=!1,"n"===c?textNode+="\n":"r"===c?textNode+="\r":"t"===c?textNode+="\t":"f"===c?textNode+="\f":"b"===c?textNode+="\b":"u"===c?(unicodeI=1,unicodeS=""):textNode+=c,c=chunk.charAt(i++),starti=i-1,c)continue;break}stringTokenPattern.lastIndex=i;var reResult=stringTokenPattern.exec(chunk);if(!reResult){i=chunk.length+1,textNode+=chunk.substring(starti,i-1);break}if(i=reResult.index+1,!(c=chunk.charAt(reResult.index))){textNode+=chunk.substring(starti,i-1);break}}continue;case TRUE:if(!c)continue;if("r"!==c)return emitError("Invalid true started with t"+c);state=TRUE2;continue;case TRUE2:if(!c)continue;if("u"!==c)return emitError("Invalid true started with tr"+c);state=TRUE3;continue;case TRUE3:if(!c)continue;if("e"!==c)return emitError("Invalid true started with tru"+c);emitValueOpen(!0),emitValueClose(),state=stack.pop()||VALUE;continue;case FALSE:if(!c)continue;if("a"!==c)return emitError("Invalid false started with f"+c);state=FALSE2;continue;case FALSE2:if(!c)continue;if("l"!==c)return emitError("Invalid false started with fa"+c);state=FALSE3;continue;case FALSE3:if(!c)continue;if("s"!==c)return emitError("Invalid false started with fal"+c);state=FALSE4;continue;case FALSE4:if(!c)continue;if("e"!==c)return emitError("Invalid false started with fals"+c);emitValueOpen(!1),emitValueClose(),state=stack.pop()||VALUE;continue;case NULL:if(!c)continue;if("u"!==c)return emitError("Invalid null started with n"+c);state=NULL2;continue;case NULL2:if(!c)continue;if("l"!==c)return emitError("Invalid null started with nu"+c);state=NULL3;continue;case NULL3:if(!c)continue;if("l"!==c)return emitError("Invalid null started with nul"+c);emitValueOpen(null),emitValueClose(),state=stack.pop()||VALUE;continue;case NUMBER_DECIMAL_POINT:if("."!==c)return emitError("Leading zero not followed by .");numberNode+=c,state=20;continue;case 20:if(-1!=="0123456789".indexOf(c))numberNode+=c;else if("."===c){if(-1!==numberNode.indexOf("."))return emitError("Invalid number has two dots");numberNode+=c}else if("e"===c||"E"===c){if(-1!==numberNode.indexOf("e")||-1!==numberNode.indexOf("E"))return emitError("Invalid number has two exponential");numberNode+=c}else if("+"===c||"-"===c){if("e"!==p&&"E"!==p)return emitError("Invalid symbol in number");numberNode+=c}else numberNode&&(emitValueOpen(parseFloat(numberNode)),emitValueClose(),numberNode=""),i--,state=stack.pop()||VALUE;continue;default:return emitError("Unknown state: "+state)}position>=bufferCheckPosition&&function checkBufferLength(){var maxActual=0;void 0!==textNode&&textNode.length>65536&&(emitError("Max buffer length exceeded: textNode"),maxActual=Math.max(maxActual,textNode.length)),numberNode.length>65536&&(emitError("Max buffer length exceeded: numberNode"),maxActual=Math.max(maxActual,numberNode.length)),bufferCheckPosition=65536-maxActual+position}()})),eventBus(__WEBPACK_IMPORTED_MODULE_0__events__.n).on((function handleStreamEnd(){if(state===BEGIN)return emitValueOpen({}),emitValueClose(),void(closed=!0);state===VALUE&&0===depth||emitError("Unexpected end");void 0!==textNode&&(emitValueOpen(textNode),emitValueClose(),textNode=void 0);closed=!0}))}},function(module,__webpack_exports__,__nested_webpack_require_87219__){"use strict";__nested_webpack_require_87219__.d(__webpack_exports__,"a",(function(){return httpTransport})),__nested_webpack_require_87219__.d(__webpack_exports__,"b",(function(){return streamingHttp}));var __WEBPACK_IMPORTED_MODULE_0__detectCrossOrigin_browser__=__nested_webpack_require_87219__(19),__WEBPACK_IMPORTED_MODULE_1__events__=__nested_webpack_require_87219__(3),__WEBPACK_IMPORTED_MODULE_2__util__=__nested_webpack_require_87219__(2),__WEBPACK_IMPORTED_MODULE_3__parseResponseHeaders_browser__=__nested_webpack_require_87219__(20),__WEBPACK_IMPORTED_MODULE_4__functional__=__nested_webpack_require_87219__(0);function httpTransport(){return new XMLHttpRequest}function streamingHttp(oboeBus,xhr,method,url,data,headers,withCredentials){var emitStreamData=oboeBus(__WEBPACK_IMPORTED_MODULE_1__events__.m).emit,emitFail=oboeBus(__WEBPACK_IMPORTED_MODULE_1__events__.b).emit,numberOfCharsAlreadyGivenToCallback=0,stillToSendStartEvent=!0;function handleProgress(){if("2"===String(xhr.status)[0]){var textSoFar=xhr.responseText,newText=(" "+textSoFar.substr(numberOfCharsAlreadyGivenToCallback)).substr(1);newText&&emitStreamData(newText),numberOfCharsAlreadyGivenToCallback=Object(__WEBPACK_IMPORTED_MODULE_2__util__.e)(textSoFar)}}function sendStartIfNotAlready(xhr){try{stillToSendStartEvent&&oboeBus(__WEBPACK_IMPORTED_MODULE_1__events__.c).emit(xhr.status,Object(__WEBPACK_IMPORTED_MODULE_3__parseResponseHeaders_browser__.a)(xhr.getAllResponseHeaders())),stillToSendStartEvent=!1}catch(e){}}oboeBus(__WEBPACK_IMPORTED_MODULE_1__events__.a).on((function(){xhr.onreadystatechange=null,xhr.abort()})),"onprogress"in xhr&&(xhr.onprogress=handleProgress),xhr.onreadystatechange=function(){switch(xhr.readyState){case 2:case 3:return sendStartIfNotAlready(xhr);case 4:sendStartIfNotAlready(xhr),"2"===String(xhr.status)[0]?(handleProgress(),oboeBus(__WEBPACK_IMPORTED_MODULE_1__events__.n).emit()):emitFail(Object(__WEBPACK_IMPORTED_MODULE_1__events__.o)(xhr.status,xhr.responseText))}};try{for(var headerName in xhr.open(method,url,!0),headers)xhr.setRequestHeader(headerName,headers[headerName]);Object(__WEBPACK_IMPORTED_MODULE_0__detectCrossOrigin_browser__.a)(window.location,Object(__WEBPACK_IMPORTED_MODULE_0__detectCrossOrigin_browser__.b)(url))||xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.withCredentials=withCredentials,xhr.send(data)}catch(e){window.setTimeout(Object(__WEBPACK_IMPORTED_MODULE_4__functional__.j)(emitFail,Object(__WEBPACK_IMPORTED_MODULE_1__events__.o)(void 0,void 0,e)),0)}}},function(module,__webpack_exports__,__nested_webpack_require_93686__){"use strict";function isCrossOrigin(pageLocation,ajaxHost){function portOf(location){return String(location.port||function defaultPort(protocol){return{"http:":80,"https:":443}[protocol]}(location.protocol||pageLocation.protocol))}return!!(ajaxHost.protocol&&ajaxHost.protocol!==pageLocation.protocol||ajaxHost.host&&ajaxHost.host!==pageLocation.host||ajaxHost.host&&portOf(ajaxHost)!==portOf(pageLocation))}function parseUrlOrigin(url){var urlHostMatch=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(url)||[];return{protocol:urlHostMatch[1]||"",host:urlHostMatch[2]||"",port:urlHostMatch[3]||""}}__nested_webpack_require_93686__.d(__webpack_exports__,"a",(function(){return isCrossOrigin})),__nested_webpack_require_93686__.d(__webpack_exports__,"b",(function(){return parseUrlOrigin}))},function(module,__webpack_exports__,__nested_webpack_require_96030__){"use strict";function parseResponseHeaders(headerStr){var headers={};return headerStr&&headerStr.split("\r\n").forEach((function(headerPair){var index=headerPair.indexOf(": ");headers[headerPair.substring(0,index)]=headerPair.substring(index+2)})),headers}__nested_webpack_require_96030__.d(__webpack_exports__,"a",(function(){return parseResponseHeaders}))}]).default}))},"./node_modules/.pnpm/process-nextick-args@2.0.1/node_modules/process-nextick-args/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");void 0===process||!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?module.exports={nextTick:function nextTick(fn,arg1,arg2,arg3){if("function"!=typeof fn)throw new TypeError('"callback" argument must be a function');var args,i,len=arguments.length;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick((function afterTickOne(){fn.call(null,arg1)}));case 3:return process.nextTick((function afterTickTwo(){fn.call(null,arg1,arg2)}));case 4:return process.nextTick((function afterTickThree(){fn.call(null,arg1,arg2,arg3)}));default:for(args=new Array(len-1),i=0;i<args.length;)args[i++]=arguments[i];return process.nextTick((function afterTick(){fn.apply(null,args)}))}}}:module.exports=process},"./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_duplex.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var pna=__webpack_require__("./node_modules/.pnpm/process-nextick-args@2.0.1/node_modules/process-nextick-args/index.js"),objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var util=Object.create(__webpack_require__("./node_modules/.pnpm/core-util-is@1.0.3/node_modules/core-util-is/lib/util.js"));util.inherits=__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js");var Readable=__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_readable.js"),Writable=__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_writable.js");util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),options&&!1===options.readable&&(this.readable=!1),options&&!1===options.writable&&(this.writable=!1),this.allowHalfOpen=!0,options&&!1===options.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||pna.nextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(value){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=value,this._writableState.destroyed=value)}}),Duplex.prototype._destroy=function(err,cb){this.push(null),this.end(),pna.nextTick(cb,err)}},"./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_passthrough.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=PassThrough;var Transform=__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_transform.js"),util=Object.create(__webpack_require__("./node_modules/.pnpm/core-util-is@1.0.3/node_modules/core-util-is/lib/util.js"));function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}util.inherits=__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js"),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},"./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_readable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js"),pna=__webpack_require__("./node_modules/.pnpm/process-nextick-args@2.0.1/node_modules/process-nextick-args/index.js");module.exports=Readable;var Duplex,isArray=__webpack_require__("./node_modules/.pnpm/isarray@1.0.0/node_modules/isarray/index.js");Readable.ReadableState=ReadableState;__webpack_require__("./node_modules/.pnpm/events@3.3.0/node_modules/events/events.js").EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length},Stream=__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/internal/streams/stream-browser.js"),Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.1.2/node_modules/safe-buffer/index.js").Buffer,OurUint8Array=__webpack_require__.g.Uint8Array||function(){};var util=Object.create(__webpack_require__("./node_modules/.pnpm/core-util-is@1.0.3/node_modules/core-util-is/lib/util.js"));util.inherits=__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js");var debugUtil=__webpack_require__("?61a6"),debug=void 0;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var StringDecoder,BufferList=__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/internal/streams/BufferList.js"),destroyImpl=__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/internal/streams/destroy.js");util.inherits(Readable,Stream);var kProxyEvents=["error","close","destroy","pause","resume"];function ReadableState(options,stream){options=options||{};var isDuplex=stream instanceof(Duplex=Duplex||__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_duplex.js"));this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode);var hwm=options.highWaterMark,readableHwm=options.readableHighWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:isDuplex&&(readableHwm||0===readableHwm)?readableHwm:defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__("./node_modules/.pnpm/string_decoder@1.1.1/node_modules/string_decoder/lib/string_decoder.js").s),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this),this.readable=!0,options&&("function"==typeof options.read&&(this._read=options.read),"function"==typeof options.destroy&&(this._destroy=options.destroy)),Stream.call(this)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var er,state=stream._readableState;null===chunk?(state.reading=!1,function onEofChunk(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,emitReadable(stream)}(stream,state)):(skipChunkCheck||(er=function chunkInvalid(state,chunk){var er;(function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array})(chunk)||"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk"));return er}(state,chunk)),er?stream.emit("error",er):state.objectMode||chunk&&chunk.length>0?("string"==typeof chunk||state.objectMode||Object.getPrototypeOf(chunk)===Buffer.prototype||(chunk=function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}(chunk)),addToFront?state.endEmitted?stream.emit("error",new Error("stream.unshift() after end event")):addChunk(stream,state,chunk,!0):state.ended?stream.emit("error",new Error("stream.push() after EOF")):(state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||0!==chunk.length?addChunk(stream,state,chunk,!1):maybeReadMore(stream,state)):addChunk(stream,state,chunk,!1))):addToFront||(state.reading=!1));return function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||0===state.length)}(state)}function addChunk(stream,state,chunk,addToFront){state.flowing&&0===state.length&&!state.sync?(stream.emit("data",chunk),stream.read(0)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}Object.defineProperty(Readable.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(value){this._readableState&&(this._readableState.destroyed=value)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(err,cb){this.push(null),cb(err)},Readable.prototype.push=function(chunk,encoding){var skipChunkCheck,state=this._readableState;return state.objectMode?skipChunkCheck=!0:"string"==typeof chunk&&((encoding=encoding||state.defaultEncoding)!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=""),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(enc){return StringDecoder||(StringDecoder=__webpack_require__("./node_modules/.pnpm/string_decoder@1.1.1/node_modules/string_decoder/lib/string_decoder.js").s),this._readableState.decoder=new StringDecoder(enc),this._readableState.encoding=enc,this};function howMuchToRead(n,state){return n<=0||0===state.length&&state.ended?0:state.objectMode?1:n!=n?state.flowing&&state.length?state.buffer.head.data.length:state.length:(n>state.highWaterMark&&(state.highWaterMark=function computeNewHighWaterMark(n){return n>=8388608?n=8388608:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}(n)),n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0))}function emitReadable(stream){var state=stream._readableState;state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,state.sync?pna.nextTick(emitReadable_,stream):emitReadable_(stream))}function emitReadable_(stream){debug("emit readable"),stream.emit("readable"),flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,pna.nextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(var len=state.length;!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark&&(debug("maybeReadMore read 0"),stream.read(0),len!==state.length);)len=state.length;state.readingMore=!1}function nReadingNextTick(self){debug("readable nexttick read 0"),self.read(0)}function resume_(stream,state){state.reading||(debug("resume read 0"),stream.read(0)),state.resumeScheduled=!1,state.awaitDrain=0,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&null!==stream.read(););}function fromList(n,state){return 0===state.length?null:(state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(ret=state.decoder?state.buffer.join(""):1===state.buffer.length?state.buffer.head.data:state.buffer.concat(state.length),state.buffer.clear()):ret=function fromListPartial(n,list,hasStrings){var ret;n<list.head.data.length?(ret=list.head.data.slice(0,n),list.head.data=list.head.data.slice(n)):ret=n===list.head.data.length?list.shift():hasStrings?function copyFromBufferString(n,list){var p=list.head,c=1,ret=p.data;n-=ret.length;for(;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(nb===str.length?ret+=str:ret+=str.slice(0,n),0===(n-=nb)){nb===str.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p,p.data=str.slice(nb));break}++c}return list.length-=c,ret}(n,list):function copyFromBuffer(n,list){var ret=Buffer.allocUnsafe(n),p=list.head,c=1;p.data.copy(ret),n-=p.data.length;for(;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),0===(n-=nb)){nb===buf.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p,p.data=buf.slice(nb));break}++c}return list.length-=c,ret}(n,list);return ret}(n,state.buffer,state.decoder),ret);var ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');state.endEmitted||(state.ended=!0,pna.nextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){state.endEmitted||0!==state.length||(state.endEmitted=!0,stream.readable=!1,stream.emit("end"))}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var state=this._readableState,nOrig=n;if(0!==n&&(state.emittedReadable=!1),0===n&&state.needReadable&&(state.length>=state.highWaterMark||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(0===(n=howMuchToRead(n,state))&&state.ended)return 0===state.length&&endReadable(this),null;var ret,doRead=state.needReadable;return debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&debug("length less than watermark",doRead=!0),state.ended||state.reading?debug("reading or ended",doRead=!1):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state))),null===(ret=n>0?fromList(n,state):null)?(state.needReadable=!0,n=0):state.length-=n,0===state.length&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(n){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var endFn=(!pipeOpts||!1!==pipeOpts.end)&&dest!==process.stdout&&dest!==process.stderr?onend:unpipe;function onunpipe(readable,unpipeInfo){debug("onunpipe"),readable===src&&unpipeInfo&&!1===unpipeInfo.hasUnpiped&&(unpipeInfo.hasUnpiped=!0,function cleanup(){debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain()}())}function onend(){debug("onend"),dest.end()}state.endEmitted?pna.nextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=function pipeOnDrain(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}(src);dest.on("drain",ondrain);var cleanedUp=!1;var increasedAwaitDrain=!1;function ondata(chunk){debug("ondata"),increasedAwaitDrain=!1,!1!==dest.write(chunk)||increasedAwaitDrain||((1===state.pipesCount&&state.pipes===dest||state.pipesCount>1&&-1!==indexOf(state.pipes,dest))&&!cleanedUp&&(debug("false write response, pause",src._readableState.awaitDrain),src._readableState.awaitDrain++,increasedAwaitDrain=!0),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&dest.emit("error",er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}return src.on("data",ondata),function prependListener(emitter,event,fn){if("function"==typeof emitter.prependListener)return emitter.prependListener(event,fn);emitter._events&&emitter._events[event]?isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]:emitter.on(event,fn)}(dest,"error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes||(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this,unpipeInfo)),this;if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,unpipeInfo);return this}var index=indexOf(state.pipes,dest);return-1===index||(state.pipes.splice(index,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this,unpipeInfo)),this},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if("data"===ev)!1!==this._readableState.flowing&&this.resume();else if("readable"===ev){var state=this._readableState;state.endEmitted||state.readableListening||(state.readableListening=state.needReadable=!0,state.emittedReadable=!1,state.reading?state.length&&emitReadable(this):pna.nextTick(nReadingNextTick,this))}return res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!0,function resume(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,pna.nextTick(resume_,stream,state))}(this,state)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(stream){var _this=this,state=this._readableState,paused=!1;for(var i in stream.on("end",(function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&_this.push(chunk)}_this.push(null)})),stream.on("data",(function(chunk){(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),state.objectMode&&null==chunk)||(state.objectMode||chunk&&chunk.length)&&(_this.push(chunk)||(paused=!0,stream.pause()))})),stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));return this._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},this},Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Readable._fromList=fromList},"./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_transform.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=Transform;var Duplex=__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_duplex.js"),util=Object.create(__webpack_require__("./node_modules/.pnpm/core-util-is@1.0.3/node_modules/core-util-is/lib/util.js"));function afterTransform(er,data){var ts=this._transformState;ts.transforming=!1;var cb=ts.writecb;if(!cb)return this.emit("error",new Error("write callback called multiple times"));ts.writechunk=null,ts.writecb=null,null!=data&&this.push(data),cb(er);var rs=this._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.on("prefinish",prefinish)}function prefinish(){var _this=this;"function"==typeof this._flush?this._flush((function(er,data){done(_this,er,data)})):done(this,null,null)}function done(stream,er,data){if(er)return stream.emit("error",er);if(null!=data&&stream.push(data),stream._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(stream._transformState.transforming)throw new Error("Calling transform done when still transforming");return stream.push(null)}util.inherits=__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js"),util.inherits(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;null!==ts.writechunk&&ts.writecb&&!ts.transforming?(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)):ts.needTransform=!0},Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,err,(function(err2){cb(err2),_this2.emit("close")}))}},"./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_writable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js"),pna=__webpack_require__("./node_modules/.pnpm/process-nextick-args@2.0.1/node_modules/process-nextick-args/index.js");function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){!function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;for(;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree?state.corkedRequestsFree.next=corkReq:state.corkedRequestsFree=corkReq}(_this,state)}}module.exports=Writable;var Duplex,asyncWrite=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;Writable.WritableState=WritableState;var util=Object.create(__webpack_require__("./node_modules/.pnpm/core-util-is@1.0.3/node_modules/core-util-is/lib/util.js"));util.inherits=__webpack_require__("./node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js");var internalUtil={deprecate:__webpack_require__("./node_modules/.pnpm/util-deprecate@1.0.2/node_modules/util-deprecate/browser.js")},Stream=__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/internal/streams/stream-browser.js"),Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.1.2/node_modules/safe-buffer/index.js").Buffer,OurUint8Array=__webpack_require__.g.Uint8Array||function(){};var realHasInstance,destroyImpl=__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/internal/streams/destroy.js");function nop(){}function WritableState(options,stream){Duplex=Duplex||__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_duplex.js"),options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode);var hwm=options.highWaterMark,writableHwm=options.writableHighWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:isDuplex&&(writableHwm||0===writableHwm)?writableHwm:defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var noDecode=!1===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){!function onwrite(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if(function onwriteStateUpdate(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}(state),er)!function onwriteError(stream,state,sync,er,cb){--state.pendingcb,sync?(pna.nextTick(cb,er),pna.nextTick(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,stream.emit("error",er)):(cb(er),stream._writableState.errorEmitted=!0,stream.emit("error",er),finishMaybe(stream,state))}(stream,state,sync,er,cb);else{var finished=needFinish(state);finished||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?asyncWrite(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(options){if(Duplex=Duplex||__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_duplex.js"),!(realHasInstance.call(Writable,this)||this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev),"function"==typeof options.destroy&&(this._destroy=options.destroy),"function"==typeof options.final&&(this._final=options.final)),Stream.call(this)}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function afterWrite(stream,state,finished,cb){finished||function onwriteDrain(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=new Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)buffer[count]=entry,entry.isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state),state.bufferedRequestCount=0}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback;if(doWrite(stream,state,!1,state.objectMode?1:chunk.length,chunk,encoding,cb),entry=entry.next,state.bufferedRequestCount--,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final((function(err){state.pendingcb--,err&&stream.emit("error",err),state.prefinished=!0,stream.emit("prefinish"),finishMaybe(stream,state)}))}function finishMaybe(stream,state){var need=needFinish(state);return need&&(!function prefinish(stream,state){state.prefinished||state.finalCalled||("function"==typeof stream._final?(state.pendingcb++,state.finalCalled=!0,pna.nextTick(callFinal,stream,state)):(state.prefinished=!0,stream.emit("prefinish")))}(stream,state),0===state.pendingcb&&(state.finished=!0,stream.emit("finish"))),need}util.inherits(Writable,Stream),WritableState.prototype.getBuffer=function getBuffer(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){return!!realHasInstance.call(this,object)||this===Writable&&(object&&object._writableState instanceof WritableState)}})):realHasInstance=function(object){return object instanceof this},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState,ret=!1,isBuf=!state.objectMode&&function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}(chunk);return isBuf&&!Buffer.isBuffer(chunk)&&(chunk=function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}(chunk)),"function"==typeof encoding&&(cb=encoding,encoding=null),isBuf?encoding="buffer":encoding||(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ended?function writeAfterEnd(stream,cb){var er=new Error("write after end");stream.emit("error",er),pna.nextTick(cb,er)}(this,cb):(isBuf||function validChunk(stream,state,chunk,cb){var valid=!0,er=!1;return null===chunk?er=new TypeError("May not write null values to stream"):"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk")),er&&(stream.emit("error",er),pna.nextTick(cb,er),valid=!1),valid}(this,state,chunk,cb))&&(state.pendingcb++,ret=function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=function decodeChunk(state,chunk,encoding){state.objectMode||!1===state.decodeStrings||"string"!=typeof chunk||(chunk=Buffer.from(chunk,encoding));return chunk}(state,chunk,encoding);chunk!==newChunk&&(isBuf=!0,encoding="buffer",chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;ret||(state.needDrain=!0);if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk,encoding,isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.finished||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+encoding);return this._writableState.defaultEncoding=encoding,this},Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;"function"==typeof chunk?(cb=chunk,chunk=null,encoding=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!=chunk&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||state.finished||function endWritable(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?pna.nextTick(cb):stream.once("finish",cb));state.ended=!0,stream.writable=!1}(this,state,cb)},Object.defineProperty(Writable.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(value){this._writableState&&(this._writableState.destroyed=value)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(err,cb){this.end(),cb(err)}},"./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/internal/streams/BufferList.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.1.2/node_modules/safe-buffer/index.js").Buffer,util=__webpack_require__("?b6e4");module.exports=function(){function BufferList(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}return BufferList.prototype.push=function push(v){var entry={data:v,next:null};this.length>0?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length},BufferList.prototype.unshift=function unshift(v){var entry={data:v,next:this.head};0===this.length&&(this.tail=entry),this.head=entry,++this.length},BufferList.prototype.shift=function shift(){if(0!==this.length){var ret=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,ret}},BufferList.prototype.clear=function clear(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function join(s){if(0===this.length)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret},BufferList.prototype.concat=function concat(n){if(0===this.length)return Buffer.alloc(0);if(1===this.length)return this.head.data;for(var src,target,offset,ret=Buffer.allocUnsafe(n>>>0),p=this.head,i=0;p;)src=p.data,target=ret,offset=i,src.copy(target,offset),i+=p.data.length,p=p.next;return ret},BufferList}(),util&&util.inspect&&util.inspect.custom&&(module.exports.prototype[util.inspect.custom]=function(){var obj=util.inspect({length:this.length});return this.constructor.name+" "+obj})},"./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/internal/streams/destroy.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var pna=__webpack_require__("./node_modules/.pnpm/process-nextick-args@2.0.1/node_modules/process-nextick-args/index.js");function emitErrorNT(self,err){self.emit("error",err)}module.exports={destroy:function destroy(err,cb){var _this=this,readableDestroyed=this._readableState&&this._readableState.destroyed,writableDestroyed=this._writableState&&this._writableState.destroyed;return readableDestroyed||writableDestroyed?(cb?cb(err):!err||this._writableState&&this._writableState.errorEmitted||pna.nextTick(emitErrorNT,this,err),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,(function(err){!cb&&err?(pna.nextTick(emitErrorNT,_this,err),_this._writableState&&(_this._writableState.errorEmitted=!0)):cb&&cb(err)})),this)},undestroy:function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},"./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/internal/streams/stream-browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/.pnpm/events@3.3.0/node_modules/events/events.js").EventEmitter},"./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/readable-browser.js":(module,exports,__webpack_require__)=>{(exports=module.exports=__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_readable.js")).Stream=exports,exports.Readable=exports,exports.Writable=__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_writable.js"),exports.Duplex=__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_duplex.js"),exports.Transform=__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_transform.js"),exports.PassThrough=__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/lib/_stream_passthrough.js")},"./node_modules/.pnpm/safe-buffer@5.1.2/node_modules/safe-buffer/index.js":(module,exports,__webpack_require__)=>{var buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js"),Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if("number"==typeof arg)throw new TypeError("Argument must not be a number");return Buffer(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if("number"!=typeof size)throw new TypeError("Argument must be a number");var buf=Buffer(size);return void 0!==fill?"string"==typeof encoding?buf.fill(fill,encoding):buf.fill(fill):buf.fill(0),buf},SafeBuffer.allocUnsafe=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return Buffer(size)},SafeBuffer.allocUnsafeSlow=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(size)}},"./node_modules/.pnpm/string_decoder@1.1.1/node_modules/string_decoder/lib/string_decoder.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/.pnpm/safe-buffer@5.1.2/node_modules/safe-buffer/index.js").Buffer,isEncoding=Buffer.isEncoding||function(encoding){switch((encoding=""+encoding)&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function StringDecoder(encoding){var nb;switch(this.encoding=function normalizeEncoding(enc){var nenc=function _normalizeEncoding(enc){if(!enc)return"utf8";for(var retried;;)switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase(),retried=!0}}(enc);if("string"!=typeof nenc&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error("Unknown encoding: "+enc);return nenc||enc}(encoding),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,nb=4;break;case"utf8":this.fillLast=utf8FillLast,nb=4;break;case"base64":this.text=base64Text,this.end=base64End,nb=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(nb)}function utf8CheckByte(byte){return byte<=127?0:byte>>5==6?2:byte>>4==14?3:byte>>3==30?4:byte>>6==2?-1:-2}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed,r=function utf8CheckExtraBytes(self,buf,p){if(128!=(192&buf[0]))return self.lastNeed=0,"";if(self.lastNeed>1&&buf.length>1){if(128!=(192&buf[1]))return self.lastNeed=1,"";if(self.lastNeed>2&&buf.length>2&&128!=(192&buf[2]))return self.lastNeed=2,""}}(this,buf);return void 0!==r?r:this.lastNeed<=buf.length?(buf.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(buf.copy(this.lastChar,p,0,buf.length),void(this.lastNeed-=buf.length))}function utf16Text(buf,i){if((buf.length-i)%2==0){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=buf[buf.length-1],buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;return 0===n?buf.toString("base64",i):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=buf[buf.length-1]:(this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1]),buf.toString("base64",i,buf.length-n))}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}exports.s=StringDecoder,StringDecoder.prototype.write=function(buf){if(0===buf.length)return"";var r,i;if(this.lastNeed){if(void 0===(r=this.fillLast(buf)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<buf.length?r?r+this.text(buf,i):this.text(buf,i):r||""},StringDecoder.prototype.end=function utf8End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+"":r},StringDecoder.prototype.text=function utf8Text(buf,i){var total=function utf8CheckIncomplete(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);if(nb>=0)return nb>0&&(self.lastNeed=nb-1),nb;if(--j<i||-2===nb)return 0;if((nb=utf8CheckByte(buf[j]))>=0)return nb>0&&(self.lastNeed=nb-2),nb;if(--j<i||-2===nb)return 0;if((nb=utf8CheckByte(buf[j]))>=0)return nb>0&&(2===nb?nb=0:self.lastNeed=nb-3),nb;return 0}(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);return buf.copy(this.lastChar,0,end),buf.toString("utf8",i,end)},StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length)return buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length),this.lastNeed-=buf.length}},"./node_modules/.pnpm/through2@2.0.5/node_modules/through2/through2.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js"),Transform=__webpack_require__("./node_modules/.pnpm/readable-stream@2.3.7/node_modules/readable-stream/readable-browser.js").Transform,inherits=__webpack_require__("./node_modules/.pnpm/util@0.12.4/node_modules/util/util.js").inherits,xtend=__webpack_require__("./node_modules/.pnpm/xtend@4.0.2/node_modules/xtend/immutable.js");function DestroyableTransform(opts){Transform.call(this,opts),this._destroyed=!1}function noop(chunk,enc,callback){callback(null,chunk)}function through2(construct){return function(options,transform,flush){return"function"==typeof options&&(flush=transform,transform=options,options={}),"function"!=typeof transform&&(transform=noop),"function"!=typeof flush&&(flush=null),construct(options,transform,flush)}}inherits(DestroyableTransform,Transform),DestroyableTransform.prototype.destroy=function(err){if(!this._destroyed){this._destroyed=!0;var self=this;process.nextTick((function(){err&&self.emit("error",err),self.emit("close")}))}},module.exports=through2((function(options,transform,flush){var t2=new DestroyableTransform(options);return t2._transform=transform,flush&&(t2._flush=flush),t2})),module.exports.ctor=through2((function(options,transform,flush){function Through2(override){if(!(this instanceof Through2))return new Through2(override);this.options=xtend(options,override),DestroyableTransform.call(this,this.options)}return inherits(Through2,DestroyableTransform),Through2.prototype._transform=transform,flush&&(Through2.prototype._flush=flush),Through2})),module.exports.obj=through2((function(options,transform,flush){var t2=new DestroyableTransform(xtend({objectMode:!0,highWaterMark:16},options));return t2._transform=transform,flush&&(t2._flush=flush),t2}))},"./node_modules/.pnpm/utf8@3.0.0/node_modules/utf8/utf8.js":(__unused_webpack_module,exports)=>{!function(root){var byteArray,byteCount,byteIndex,stringFromCharCode=String.fromCharCode;function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)(value=string.charCodeAt(counter++))>=55296&&value<=56319&&counter<length?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}function checkScalarValue(codePoint){if(codePoint>=55296&&codePoint<=57343)throw Error("Lone surrogate U+"+codePoint.toString(16).toUpperCase()+" is not a scalar value")}function createByte(codePoint,shift){return stringFromCharCode(codePoint>>shift&63|128)}function encodeCodePoint(codePoint){if(0==(4294967168&codePoint))return stringFromCharCode(codePoint);var symbol="";return 0==(4294965248&codePoint)?symbol=stringFromCharCode(codePoint>>6&31|192):0==(4294901760&codePoint)?(checkScalarValue(codePoint),symbol=stringFromCharCode(codePoint>>12&15|224),symbol+=createByte(codePoint,6)):0==(4292870144&codePoint)&&(symbol=stringFromCharCode(codePoint>>18&7|240),symbol+=createByte(codePoint,12),symbol+=createByte(codePoint,6)),symbol+=stringFromCharCode(63&codePoint|128)}function readContinuationByte(){if(byteIndex>=byteCount)throw Error("Invalid byte index");var continuationByte=255&byteArray[byteIndex];if(byteIndex++,128==(192&continuationByte))return 63&continuationByte;throw Error("Invalid continuation byte")}function decodeSymbol(){var byte1,codePoint;if(byteIndex>byteCount)throw Error("Invalid byte index");if(byteIndex==byteCount)return!1;if(byte1=255&byteArray[byteIndex],byteIndex++,0==(128&byte1))return byte1;if(192==(224&byte1)){if((codePoint=(31&byte1)<<6|readContinuationByte())>=128)return codePoint;throw Error("Invalid continuation byte")}if(224==(240&byte1)){if((codePoint=(15&byte1)<<12|readContinuationByte()<<6|readContinuationByte())>=2048)return checkScalarValue(codePoint),codePoint;throw Error("Invalid continuation byte")}if(240==(248&byte1)&&(codePoint=(7&byte1)<<18|readContinuationByte()<<12|readContinuationByte()<<6|readContinuationByte())>=65536&&codePoint<=1114111)return codePoint;throw Error("Invalid UTF-8 detected")}root.version="3.0.0",root.encode=function utf8encode(string){for(var codePoints=ucs2decode(string),length=codePoints.length,index=-1,byteString="";++index<length;)byteString+=encodeCodePoint(codePoints[index]);return byteString},root.decode=function utf8decode(byteString){byteArray=ucs2decode(byteString),byteCount=byteArray.length,byteIndex=0;for(var tmp,codePoints=[];!1!==(tmp=decodeSymbol());)codePoints.push(tmp);return function ucs2encode(array){for(var value,length=array.length,index=-1,output="";++index<length;)(value=array[index])>65535&&(output+=stringFromCharCode((value-=65536)>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value);return output}(codePoints)}}(exports)},"./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/errors.js":module=>{"use strict";module.exports={ErrorResponse:function(result){var message=result&&result.error&&result.error.message?result.error.message:JSON.stringify(result),data=result.error&&result.error.data?result.error.data:null,err=new Error("Returned error: "+message);return err.data=data,err},InvalidNumberOfParams:function(got,expected,method){return new Error('Invalid number of parameters for "'+method+'". Got '+got+" expected "+expected+"!")},InvalidConnection:function(host,event){return this.ConnectionError("CONNECTION ERROR: Couldn't connect to node "+host+".",event)},InvalidProvider:function(){return new Error("Provider not set or invalid")},InvalidResponse:function(result){var message=result&&result.error&&result.error.message?result.error.message:"Invalid JSON RPC response: "+JSON.stringify(result);return new Error(message)},ConnectionTimeout:function(ms){return new Error("CONNECTION TIMEOUT: timeout of "+ms+" ms achived")},ConnectionNotOpenError:function(event){return this.ConnectionError("connection not open on send()",event)},ConnectionCloseError:function(event){return"object"==typeof event&&event.code&&event.reason?this.ConnectionError("CONNECTION ERROR: The connection got closed with the close code `"+event.code+"` and the following reason string `"+event.reason+"`",event):new Error("CONNECTION ERROR: The connection closed unexpectedly")},MaxAttemptsReachedOnReconnectingError:function(){return new Error("Maximum number of reconnect attempts reached!")},PendingRequestsOnReconnectingError:function(){return new Error("CONNECTION ERROR: Provider started to reconnect before the response got received!")},ConnectionError:function(msg,event){const error=new Error(msg);return event&&(error.code=event.code,error.reason=event.reason),error},RevertInstructionError:function(reason,signature){var error=new Error("Your request got reverted with the following reason string: "+reason);return error.reason=reason,error.signature=signature,error},TransactionRevertInstructionError:function(reason,signature,receipt){var error=new Error("Transaction has been reverted by the EVM:\n"+JSON.stringify(receipt,null,2));return error.reason=reason,error.signature=signature,error.receipt=receipt,error},TransactionError:function(message,receipt){var error=new Error(message);return error.receipt=receipt,error},NoContractAddressFoundError:function(receipt){return this.TransactionError("The transaction receipt didn't contain a contract address.",receipt)},ContractCodeNotStoredError:function(receipt){return this.TransactionError("The contract code couldn't be stored, please check your gas limit.",receipt)},TransactionRevertedWithoutReasonError:function(receipt){return this.TransactionError("Transaction has been reverted by the EVM:\n"+JSON.stringify(receipt,null,2),receipt)},TransactionOutOfGasError:function(receipt){return this.TransactionError("Transaction ran out of gas. Please provide more gas:\n"+JSON.stringify(receipt,null,2),receipt)},ResolverMethodMissingError:function(address,name){return new Error("The resolver at "+address+'does not implement requested method: "'+name+'".')},ContractMissingABIError:function(){return new Error("You must provide the json interface of the contract when instantiating a contract object.")},ContractOnceRequiresCallbackError:function(){return new Error("Once requires a callback as the second parameter.")},ContractEventDoesNotExistError:function(eventName){return new Error('Event "'+eventName+"\" doesn't exist in this contract.")},ContractReservedEventError:function(type){return new Error('The event "'+type+"\" is a reserved event name, you can't use it.")},ContractMissingDeployDataError:function(){return new Error('No "data" specified in neither the given options, nor the default options.')},ContractNoAddressDefinedError:function(){return new Error("This contract object doesn't have address set yet, please set an address first.")},ContractNoFromAddressDefinedError:function(){return new Error('No "from" address specified in neither the given options, nor the default options.')}}},"./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/formatters.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var utils=__webpack_require__("./node_modules/.pnpm/web3-utils@1.7.4/node_modules/web3-utils/lib/index.js"),Iban=__webpack_require__("./node_modules/.pnpm/web3-eth-iban@1.7.4/node_modules/web3-eth-iban/lib/index.js"),outputBigNumberFormatter=function(number){return utils.toBN(number).toString(10)},inputBlockNumberFormatter=function(blockNumber){if(void 0!==blockNumber)return function(blockNumber){return"latest"===blockNumber||"pending"===blockNumber||"earliest"===blockNumber}(blockNumber)?blockNumber:"genesis"===blockNumber?"0x0":utils.isHexStrict(blockNumber)?"string"==typeof blockNumber?blockNumber.toLowerCase():blockNumber:utils.numberToHex(blockNumber)},_txInputFormatter=function(options){if(options.to&&(options.to=inputAddressFormatter(options.to)),options.data&&options.input)throw new Error('You can\'t have "data" and "input" as properties of transactions at the same time, please use either "data" or "input" instead.');if(!options.data&&options.input&&(options.data=options.input,delete options.input),options.data&&!options.data.startsWith("0x")&&(options.data="0x"+options.data),options.data&&!utils.isHex(options.data))throw new Error("The data field must be HEX encoded data.");return(options.gas||options.gasLimit)&&(options.gas=options.gas||options.gasLimit),(options.maxPriorityFeePerGas||options.maxFeePerGas)&&delete options.gasPrice,["gasPrice","gas","value","maxPriorityFeePerGas","maxFeePerGas","nonce"].filter((function(key){return void 0!==options[key]})).forEach((function(key){options[key]=utils.numberToHex(options[key])})),options},outputTransactionFormatter=function(tx){return null!==tx.blockNumber&&(tx.blockNumber=utils.hexToNumber(tx.blockNumber)),null!==tx.transactionIndex&&(tx.transactionIndex=utils.hexToNumber(tx.transactionIndex)),tx.nonce=utils.hexToNumber(tx.nonce),tx.gas=utils.hexToNumber(tx.gas),tx.gasPrice&&(tx.gasPrice=outputBigNumberFormatter(tx.gasPrice)),tx.maxFeePerGas&&(tx.maxFeePerGas=outputBigNumberFormatter(tx.maxFeePerGas)),tx.maxPriorityFeePerGas&&(tx.maxPriorityFeePerGas=outputBigNumberFormatter(tx.maxPriorityFeePerGas)),tx.type&&(tx.type=utils.hexToNumber(tx.type)),tx.value=outputBigNumberFormatter(tx.value),tx.to&&utils.isAddress(tx.to)?tx.to=utils.toChecksumAddress(tx.to):tx.to=null,tx.from&&(tx.from=utils.toChecksumAddress(tx.from)),tx},outputLogFormatter=function(log){if("string"==typeof log.blockHash&&"string"==typeof log.transactionHash&&"string"==typeof log.logIndex){var shaId=utils.sha3(log.blockHash.replace("0x","")+log.transactionHash.replace("0x","")+log.logIndex.replace("0x",""));log.id="log_"+shaId.replace("0x","").slice(0,8)}else log.id||(log.id=null);return null!==log.blockNumber&&(log.blockNumber=utils.hexToNumber(log.blockNumber)),null!==log.transactionIndex&&(log.transactionIndex=utils.hexToNumber(log.transactionIndex)),null!==log.logIndex&&(log.logIndex=utils.hexToNumber(log.logIndex)),log.address&&(log.address=utils.toChecksumAddress(log.address)),log},inputAddressFormatter=function(address){var iban=new Iban(address);if(iban.isValid()&&iban.isDirect())return iban.toAddress().toLowerCase();if(utils.isAddress(address))return"0x"+address.toLowerCase().replace("0x","");throw new Error(`Provided address ${address} is invalid, the capitalization checksum test failed, or it's an indirect IBAN address which can't be converted.`)};module.exports={inputDefaultBlockNumberFormatter:function(blockNumber){return inputBlockNumberFormatter(this&&null==blockNumber?this.defaultBlock:blockNumber)},inputBlockNumberFormatter,inputCallFormatter:function(options){var from=(options=_txInputFormatter(options)).from||(this?this.defaultAccount:null);return from&&(options.from=inputAddressFormatter(from)),options},inputTransactionFormatter:function(options){if("number"!=typeof(options=_txInputFormatter(options)).from&&(!options.from||"object"!=typeof options.from)){if(options.from=options.from||(this?this.defaultAccount:null),!options.from&&"number"!=typeof options.from)throw new Error('The send transactions "from" field must be defined!');options.from=inputAddressFormatter(options.from)}return options},inputAddressFormatter,inputPostFormatter:function(post){return post.ttl&&(post.ttl=utils.numberToHex(post.ttl)),post.workToProve&&(post.workToProve=utils.numberToHex(post.workToProve)),post.priority&&(post.priority=utils.numberToHex(post.priority)),Array.isArray(post.topics)||(post.topics=post.topics?[post.topics]:[]),post.topics=post.topics.map((function(topic){return 0===topic.indexOf("0x")?topic:utils.fromUtf8(topic)})),post},inputLogFormatter:function(options){var toTopic=function(value){return null==value?null:0===(value=String(value)).indexOf("0x")?value:utils.fromUtf8(value)};return void 0===options&&(options={}),void 0===options.fromBlock&&(options={...options,fromBlock:"latest"}),(options.fromBlock||0===options.fromBlock)&&(options.fromBlock=inputBlockNumberFormatter(options.fromBlock)),(options.toBlock||0===options.toBlock)&&(options.toBlock=inputBlockNumberFormatter(options.toBlock)),options.topics=options.topics||[],options.topics=options.topics.map((function(topic){return Array.isArray(topic)?topic.map(toTopic):toTopic(topic)})),toTopic=null,options.address&&(options.address=Array.isArray(options.address)?options.address.map((function(addr){return inputAddressFormatter(addr)})):inputAddressFormatter(options.address)),options},inputSignFormatter:function(data){return utils.isHexStrict(data)?data:utils.utf8ToHex(data)},inputStorageKeysFormatter:function(keys){return keys.map(utils.numberToHex)},outputProofFormatter:function(proof){return proof.address=utils.toChecksumAddress(proof.address),proof.nonce=utils.hexToNumberString(proof.nonce),proof.balance=utils.hexToNumberString(proof.balance),proof},outputBigNumberFormatter,outputTransactionFormatter,outputTransactionReceiptFormatter:function(receipt){if("object"!=typeof receipt)throw new Error("Received receipt is invalid: "+receipt);return null!==receipt.blockNumber&&(receipt.blockNumber=utils.hexToNumber(receipt.blockNumber)),null!==receipt.transactionIndex&&(receipt.transactionIndex=utils.hexToNumber(receipt.transactionIndex)),receipt.cumulativeGasUsed=utils.hexToNumber(receipt.cumulativeGasUsed),receipt.gasUsed=utils.hexToNumber(receipt.gasUsed),Array.isArray(receipt.logs)&&(receipt.logs=receipt.logs.map(outputLogFormatter)),receipt.effectiveGasPrice&&(receipt.effectiveGasPrice=utils.hexToNumber(receipt.effectiveGasPrice)),receipt.contractAddress&&(receipt.contractAddress=utils.toChecksumAddress(receipt.contractAddress)),void 0!==receipt.status&&null!==receipt.status&&(receipt.status=Boolean(parseInt(receipt.status))),receipt},outputBlockFormatter:function(block){return block.gasLimit=utils.hexToNumber(block.gasLimit),block.gasUsed=utils.hexToNumber(block.gasUsed),block.size=utils.hexToNumber(block.size),block.timestamp=utils.hexToNumber(block.timestamp),null!==block.number&&(block.number=utils.hexToNumber(block.number)),block.difficulty&&(block.difficulty=outputBigNumberFormatter(block.difficulty)),block.totalDifficulty&&(block.totalDifficulty=outputBigNumberFormatter(block.totalDifficulty)),Array.isArray(block.transactions)&&block.transactions.forEach((function(item){if("string"!=typeof item)return outputTransactionFormatter(item)})),block.miner&&(block.miner=utils.toChecksumAddress(block.miner)),block.baseFeePerGas&&(block.baseFeePerGas=utils.hexToNumber(block.baseFeePerGas)),block},outputLogFormatter,outputPostFormatter:function(post){return post.expiry=utils.hexToNumber(post.expiry),post.sent=utils.hexToNumber(post.sent),post.ttl=utils.hexToNumber(post.ttl),post.workProved=utils.hexToNumber(post.workProved),post.topics||(post.topics=[]),post.topics=post.topics.map((function(topic){return utils.toUtf8(topic)})),post},outputSyncingFormatter:function(result){return result.startingBlock=utils.hexToNumber(result.startingBlock),result.currentBlock=utils.hexToNumber(result.currentBlock),result.highestBlock=utils.hexToNumber(result.highestBlock),result.knownStates&&(result.knownStates=utils.hexToNumber(result.knownStates),result.pulledStates=utils.hexToNumber(result.pulledStates)),result}}},"./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var errors=__webpack_require__("./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/errors.js"),formatters=__webpack_require__("./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/formatters.js");module.exports={errors,formatters}},"./node_modules/.pnpm/web3-core-method@1.7.4/node_modules/web3-core-method/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var errors=__webpack_require__("./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/index.js").errors,formatters=__webpack_require__("./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/index.js").formatters,utils=__webpack_require__("./node_modules/.pnpm/web3-utils@1.7.4/node_modules/web3-utils/lib/index.js"),promiEvent=__webpack_require__("./node_modules/.pnpm/web3-core-promievent@1.7.4/node_modules/web3-core-promievent/lib/index.js"),Subscriptions=__webpack_require__("./node_modules/.pnpm/web3-core-subscriptions@1.7.4/node_modules/web3-core-subscriptions/lib/index.js").subscriptions,EthersTransactionUtils=__webpack_require__("./node_modules/.pnpm/@ethersproject+transactions@5.6.2/node_modules/@ethersproject/transactions/lib.esm/index.js"),Method=function Method(options){if(!options.call||!options.name)throw new Error('When creating a method you need to provide at least the "name" and "call" property.');this.name=options.name,this.call=options.call,this.params=options.params||0,this.inputFormatter=options.inputFormatter,this.outputFormatter=options.outputFormatter,this.transformPayload=options.transformPayload,this.extraFormatters=options.extraFormatters,this.abiCoder=options.abiCoder,this.requestManager=options.requestManager,this.accounts=options.accounts,this.defaultBlock=options.defaultBlock||"latest",this.defaultAccount=options.defaultAccount||null,this.transactionBlockTimeout=options.transactionBlockTimeout||50,this.transactionConfirmationBlocks=options.transactionConfirmationBlocks||24,this.transactionPollingTimeout=options.transactionPollingTimeout||750,this.transactionPollingInterval=options.transactionPollingInterval||1e3,this.blockHeaderTimeout=options.blockHeaderTimeout||10,this.defaultCommon=options.defaultCommon,this.defaultChain=options.defaultChain,this.defaultHardfork=options.defaultHardfork,this.handleRevert=options.handleRevert};Method.prototype.setRequestManager=function(requestManager,accounts){this.requestManager=requestManager,accounts&&(this.accounts=accounts)},Method.prototype.createFunction=function(requestManager,accounts){var func=this.buildCall();return Object.defineProperty(func,"call",{configurable:!0,writable:!0,value:this.call}),this.setRequestManager(requestManager||this.requestManager,accounts||this.accounts),func},Method.prototype.attachToObject=function(obj){var func=this.buildCall();Object.defineProperty(func,"call",{configurable:!0,writable:!0,value:this.call});var name=this.name.split(".");name.length>1?(obj[name[0]]=obj[name[0]]||{},obj[name[0]][name[1]]=func):obj[name[0]]=func},Method.prototype.getCall=function(args){return"function"==typeof this.call?this.call(args):this.call},Method.prototype.extractCallback=function(args){if("function"==typeof args[args.length-1])return args.pop()},Method.prototype.validateArgs=function(args){if(args.length!==this.params)throw errors.InvalidNumberOfParams(args.length,this.params,this.name)},Method.prototype.formatInput=function(args){var _this=this;return this.inputFormatter?this.inputFormatter.map((function(formatter,index){return formatter?formatter.call(_this,args[index]):args[index]})):args},Method.prototype.formatOutput=function(result){var _this=this;return Array.isArray(result)?result.map((function(res){return _this.outputFormatter&&res?_this.outputFormatter(res):res})):this.outputFormatter&&result?this.outputFormatter(result):result},Method.prototype.toPayload=function(args){var call=this.getCall(args),callback=this.extractCallback(args),params=this.formatInput(args);this.validateArgs(params);var payload={method:call,params,callback};return this.transformPayload&&(payload=this.transformPayload(payload)),payload},Method.prototype._confirmTransaction=function(defer,result,payload){var method=this,promiseResolved=!1,canUnsubscribe=!0,timeoutCount=0,confirmationCount=0,intervalId=null,blockHeaderTimeoutId=null,lastBlock=null,gasProvided=payload.params[0]&&"object"==typeof payload.params[0]&&payload.params[0].gas?payload.params[0].gas:null,isContractDeployment=!!payload.params[0]&&"object"==typeof payload.params[0]&&payload.params[0].data&&payload.params[0].from&&!payload.params[0].to,hasBytecode=isContractDeployment&&payload.params[0].data.length>2,_ethereumCalls=[new Method({name:"getBlockByNumber",call:"eth_getBlockByNumber",params:2,inputFormatter:[formatters.inputBlockNumberFormatter,function(val){return!!val}],outputFormatter:formatters.outputBlockFormatter}),new Method({name:"getTransactionReceipt",call:"eth_getTransactionReceipt",params:1,inputFormatter:[null],outputFormatter:formatters.outputTransactionReceiptFormatter}),new Method({name:"getCode",call:"eth_getCode",params:2,inputFormatter:[formatters.inputAddressFormatter,formatters.inputDefaultBlockNumberFormatter]}),new Method({name:"getTransactionByHash",call:"eth_getTransactionByHash",params:1,inputFormatter:[null],outputFormatter:formatters.outputTransactionFormatter}),new Subscriptions({name:"subscribe",type:"eth",subscriptions:{newBlockHeaders:{subscriptionName:"newHeads",params:0,outputFormatter:formatters.outputBlockFormatter}}})],_ethereumCall={};_ethereumCalls.forEach((mthd=>{mthd.attachToObject(_ethereumCall),mthd.requestManager=method.requestManager}));var checkConfirmation=function(existingReceipt,isPolling,err,blockHeader,sub){if(!err)return sub||(sub={unsubscribe:function(){clearInterval(intervalId),clearTimeout(blockHeaderTimeoutId)}}),(existingReceipt?promiEvent.resolve(existingReceipt):_ethereumCall.getTransactionReceipt(result)).catch((function(err){sub.unsubscribe(),promiseResolved=!0,utils._fireError({message:"Failed to check for transaction receipt:",data:err},defer.eventEmitter,defer.reject)})).then((async function(receipt){if(!receipt||!receipt.blockHash)throw new Error("Receipt missing or blockHash null");if(method.extraFormatters&&method.extraFormatters.receiptFormatter&&(receipt=method.extraFormatters.receiptFormatter(receipt)),defer.eventEmitter.listeners("confirmation").length>0){var block;if(void 0===existingReceipt||0!==confirmationCount){var latestBlock=await _ethereumCall.getBlockByNumber("latest"),latestBlockHash=latestBlock?latestBlock.hash:null;isPolling?lastBlock?(block=await _ethereumCall.getBlockByNumber(lastBlock.number+1))&&(lastBlock=block,defer.eventEmitter.emit("confirmation",confirmationCount,receipt,latestBlockHash)):(block=await _ethereumCall.getBlockByNumber(receipt.blockNumber),lastBlock=block,defer.eventEmitter.emit("confirmation",confirmationCount,receipt,latestBlockHash)):defer.eventEmitter.emit("confirmation",confirmationCount,receipt,latestBlockHash)}(isPolling&&block||!isPolling)&&confirmationCount++,canUnsubscribe=!1,confirmationCount===method.transactionConfirmationBlocks+1&&(sub.unsubscribe(),defer.eventEmitter.removeAllListeners())}return receipt})).then((async function(receipt){if(isContractDeployment&&!promiseResolved){if(!receipt.contractAddress)return canUnsubscribe&&(sub.unsubscribe(),promiseResolved=!0),void utils._fireError(errors.NoContractAddressFoundError(receipt),defer.eventEmitter,defer.reject,null,receipt);var code;try{code=await _ethereumCall.getCode(receipt.contractAddress)}catch(err){}if(!code)return;!0===receipt.status&&hasBytecode||code.length>2?(defer.eventEmitter.emit("receipt",receipt),method.extraFormatters&&method.extraFormatters.contractDeployFormatter?defer.resolve(method.extraFormatters.contractDeployFormatter(receipt)):defer.resolve(receipt),canUnsubscribe&&defer.eventEmitter.removeAllListeners()):utils._fireError(errors.ContractCodeNotStoredError(receipt),defer.eventEmitter,defer.reject,null,receipt),canUnsubscribe&&sub.unsubscribe(),promiseResolved=!0}return receipt})).then((async function(receipt){if(!isContractDeployment&&!promiseResolved){if(receipt.outOfGas||gasProvided&&gasProvided===receipt.gasUsed||!0!==receipt.status&&"0x1"!==receipt.status&&void 0!==receipt.status)if(JSON.stringify(receipt,null,2),!1===receipt.status||"0x0"===receipt.status)try{var revertMessage=null;if(!method.handleRevert||"eth_sendTransaction"!==method.call&&"eth_sendRawTransaction"!==method.call)throw!1;var txReplayOptions=payload.params[0];if("eth_sendRawTransaction"===method.call){var rawTransactionHex=payload.params[0],parsedTx=EthersTransactionUtils.parse(rawTransactionHex);txReplayOptions=formatters.inputTransactionFormatter({data:parsedTx.data,to:parsedTx.to,from:parsedTx.from,gas:parsedTx.gasLimit.toHexString(),gasPrice:parsedTx.gasPrice?parsedTx.gasPrice.toHexString():void 0,value:parsedTx.value.toHexString()})}if(!(revertMessage=await method.getRevertReason(txReplayOptions,receipt.blockNumber)))throw!1;utils._fireError(errors.TransactionRevertInstructionError(revertMessage.reason,revertMessage.signature,receipt),defer.eventEmitter,defer.reject,null,receipt)}catch(error){utils._fireError(errors.TransactionRevertedWithoutReasonError(receipt),defer.eventEmitter,defer.reject,null,receipt)}else utils._fireError(errors.TransactionOutOfGasError(receipt),defer.eventEmitter,defer.reject,null,receipt);else defer.eventEmitter.emit("receipt",receipt),defer.resolve(receipt),canUnsubscribe&&defer.eventEmitter.removeAllListeners();canUnsubscribe&&sub.unsubscribe(),promiseResolved=!0}})).catch((function(){timeoutCount++,isPolling?timeoutCount-1>=method.transactionPollingTimeout&&(sub.unsubscribe(),promiseResolved=!0,utils._fireError(errors.TransactionError("Transaction was not mined within "+method.transactionPollingTimeout+" seconds, please make sure your transaction was properly sent. Be aware that it might still be mined!"),defer.eventEmitter,defer.reject)):timeoutCount-1>=method.transactionBlockTimeout&&(sub.unsubscribe(),promiseResolved=!0,utils._fireError(errors.TransactionError("Transaction was not mined within "+method.transactionBlockTimeout+" blocks, please make sure your transaction was properly sent. Be aware that it might still be mined!"),defer.eventEmitter,defer.reject))}));sub.unsubscribe(),promiseResolved=!0,utils._fireError({message:"Failed to subscribe to new newBlockHeaders to confirm the transaction receipts.",data:err},defer.eventEmitter,defer.reject)},startWatching=function(existingReceipt){let blockHeaderArrived=!1;const startInterval=()=>{intervalId=setInterval(checkConfirmation.bind(null,existingReceipt,!0),method.transactionPollingInterval)};if(!this.requestManager.provider.on)return startInterval();_ethereumCall.subscribe("newBlockHeaders",(function(err,blockHeader,sub){if(blockHeaderArrived=!0,err||!blockHeader)return startInterval();checkConfirmation(existingReceipt,!1,err,0,sub)})),blockHeaderTimeoutId=setTimeout((()=>{blockHeaderArrived||startInterval()}),1e3*this.blockHeaderTimeout)}.bind(this);_ethereumCall.getTransactionReceipt(result).then((function(receipt){receipt&&receipt.blockHash?(defer.eventEmitter.listeners("confirmation").length>0&&startWatching(receipt),checkConfirmation(receipt,!1)):promiseResolved||startWatching()})).catch((function(){promiseResolved||startWatching()}))};var getWallet=function(from,accounts){return"number"==typeof from?accounts.wallet[from]:from&&"object"==typeof from&&from.address&&from.privateKey?from:accounts.wallet[from.toLowerCase()]};function _handleTxPricing(method,tx){return new Promise(((resolve,reject)=>{try{var getBlockByNumber=new Method({name:"getBlockByNumber",call:"eth_getBlockByNumber",params:2,inputFormatter:[function(blockNumber){return blockNumber?utils.toHex(blockNumber):"latest"},function(){return!1}]}).createFunction(method.requestManager),getGasPrice=new Method({name:"getGasPrice",call:"eth_gasPrice",params:0}).createFunction(method.requestManager);Promise.all([getBlockByNumber(),getGasPrice()]).then((responses=>{const[block,gasPrice]=responses;if(("0x2"===tx.type||void 0===tx.type)&&block&&block.baseFeePerGas){let maxPriorityFeePerGas,maxFeePerGas;tx.gasPrice?(maxPriorityFeePerGas=tx.gasPrice,maxFeePerGas=tx.gasPrice,delete tx.gasPrice):(maxPriorityFeePerGas=tx.maxPriorityFeePerGas||"0x9502F900",maxFeePerGas=tx.maxFeePerGas||utils.toHex(utils.toBN(block.baseFeePerGas).mul(utils.toBN(2)).add(utils.toBN(maxPriorityFeePerGas)))),resolve({maxFeePerGas,maxPriorityFeePerGas})}else{if(tx.maxPriorityFeePerGas||tx.maxFeePerGas)throw Error("Network doesn't support eip-1559");resolve({gasPrice})}}))}catch(error){reject(error)}}))}Method.prototype.buildCall=function(){var method=this,isSendTx="eth_sendTransaction"===method.call||"eth_sendRawTransaction"===method.call,isCall="eth_call"===method.call,send=function(){var defer=promiEvent(!isSendTx),payload=method.toPayload(Array.prototype.slice.call(arguments)),sendTxCallback=function(err,result){var reasonData;if(method.handleRevert&&isCall&&method.abiCoder&&(!err&&method.isRevertReasonString(result)?reasonData=result.substring(10):err&&err.data&&(reasonData=err.data.substring(10)),reasonData)){var reason=method.abiCoder.decodeParameter("string","0x"+reasonData);return void utils._fireError(errors.RevertInstructionError(reason,"Error(String)"),defer.eventEmitter,defer.reject,payload.callback,{reason,signature:"Error(String)"})}try{result=method.formatOutput(result)}catch(e){err=e}if(result instanceof Error&&(err=result),err)return err.error&&(err=err.error),utils._fireError(err,defer.eventEmitter,defer.reject,payload.callback);payload.callback&&payload.callback(null,result),isSendTx?(defer.eventEmitter.emit("transactionHash",result),method._confirmTransaction(defer,result,payload)):err||defer.resolve(result)},sendSignedTx=function(sign){var signedPayload={...payload,method:"eth_sendRawTransaction",params:[sign.rawTransaction]};method.requestManager.send(signedPayload,sendTxCallback)},sendRequest=function(payload,method){var wallet;if(method&&method.accounts&&method.accounts.wallet&&method.accounts.wallet.length)if("eth_sendTransaction"===payload.method){var tx=payload.params[0];if((wallet=getWallet(tx&&"object"==typeof tx?tx.from:null,method.accounts))&&wallet.privateKey)return delete(tx=JSON.parse(JSON.stringify(tx))).from,method.defaultChain&&!tx.chain&&(tx.chain=method.defaultChain),method.defaultHardfork&&!tx.hardfork&&(tx.hardfork=method.defaultHardfork),method.defaultCommon&&!tx.common&&(tx.common=method.defaultCommon),void method.accounts.signTransaction(tx,wallet.privateKey).then(sendSignedTx).catch((function(err){if("function"==typeof defer.eventEmitter.listeners&&defer.eventEmitter.listeners("error").length){try{defer.eventEmitter.emit("error",err)}catch(err){}defer.eventEmitter.removeAllListeners(),defer.eventEmitter.catch((function(){}))}defer.reject(err)}))}else if("eth_sign"===payload.method){var data=payload.params[1];if((wallet=getWallet(payload.params[0],method.accounts))&&wallet.privateKey){var sign=method.accounts.sign(data,wallet.privateKey);return payload.callback&&payload.callback(null,sign.signature),void defer.resolve(sign.signature)}}return method.requestManager.send(payload,sendTxCallback)};return isSendTx&&payload.params[0]&&"object"==typeof payload.params[0]&&void 0===payload.params[0].gasPrice&&(void 0===payload.params[0].maxPriorityFeePerGas||void 0===payload.params[0].maxFeePerGas)?_handleTxPricing(method,payload.params[0]).then((txPricing=>{void 0!==txPricing.gasPrice?payload.params[0].gasPrice=txPricing.gasPrice:void 0!==txPricing.maxPriorityFeePerGas&&void 0!==txPricing.maxFeePerGas&&(payload.params[0].maxPriorityFeePerGas=txPricing.maxPriorityFeePerGas,payload.params[0].maxFeePerGas=txPricing.maxFeePerGas),isSendTx&&setTimeout((()=>{defer.eventEmitter.emit("sending",payload)}),0),sendRequest(payload,method)})):(isSendTx&&setTimeout((()=>{defer.eventEmitter.emit("sending",payload)}),0),sendRequest(payload,method)),isSendTx&&setTimeout((()=>{defer.eventEmitter.emit("sent",payload)}),0),defer.eventEmitter};return send.method=method,send.request=this.request.bind(this),send},Method.prototype.getRevertReason=function(txOptions,blockNumber){var self=this;return new Promise((function(resolve,reject){new Method({name:"call",call:"eth_call",params:2,abiCoder:self.abiCoder,handleRevert:!0}).createFunction(self.requestManager)(txOptions,utils.numberToHex(blockNumber)).then((function(){resolve(!1)})).catch((function(error){error.reason?resolve({reason:error.reason,signature:error.signature}):reject(error)}))}))},Method.prototype.isRevertReasonString=function(data){return"string"==typeof data&&(data.length-2)/2%32==4&&"0x08c379a0"===data.substring(0,10)},Method.prototype.request=function(){var payload=this.toPayload(Array.prototype.slice.call(arguments));return payload.format=this.formatOutput.bind(this),payload},module.exports=Method},"./node_modules/.pnpm/web3-core-promievent@1.7.4/node_modules/web3-core-promievent/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var EventEmitter=__webpack_require__("./node_modules/.pnpm/eventemitter3@4.0.4/node_modules/eventemitter3/index.js"),PromiEvent=function PromiEvent(justPromise){var resolve,reject,eventEmitter=new Promise((function(){resolve=arguments[0],reject=arguments[1]}));if(justPromise)return{resolve,reject,eventEmitter};var emitter=new EventEmitter;return eventEmitter._events=emitter._events,eventEmitter.emit=emitter.emit,eventEmitter.on=emitter.on,eventEmitter.once=emitter.once,eventEmitter.off=emitter.off,eventEmitter.listeners=emitter.listeners,eventEmitter.addListener=emitter.addListener,eventEmitter.removeListener=emitter.removeListener,eventEmitter.removeAllListeners=emitter.removeAllListeners,{resolve,reject,eventEmitter}};PromiEvent.resolve=function(value){var promise=PromiEvent(!0);return promise.resolve(value),promise.eventEmitter},module.exports=PromiEvent},"./node_modules/.pnpm/web3-core-requestmanager@1.7.4/node_modules/web3-core-requestmanager/lib/batch.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Jsonrpc=__webpack_require__("./node_modules/.pnpm/web3-core-requestmanager@1.7.4/node_modules/web3-core-requestmanager/lib/jsonrpc.js"),errors=__webpack_require__("./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/index.js").errors,Batch=function(requestManager){this.requestManager=requestManager,this.requests=[]};Batch.prototype.add=function(request){this.requests.push(request)},Batch.prototype.execute=function(){var requests=this.requests,sortResponses=this._sortResponses.bind(this);this.requestManager.sendBatch(requests,(function(err,results){results=sortResponses(results),requests.map((function(request,index){return results[index]||{}})).forEach((function(result,index){if(requests[index].callback){if(result&&result.error)return requests[index].callback(errors.ErrorResponse(result));if(!Jsonrpc.isValidResponse(result))return requests[index].callback(errors.InvalidResponse(result));try{requests[index].callback(null,requests[index].format?requests[index].format(result.result):result.result)}catch(err){requests[index].callback(err)}}}))}))},Batch.prototype._sortResponses=function(responses){return(responses||[]).sort(((a,b)=>a.id-b.id))},module.exports=Batch},"./node_modules/.pnpm/web3-core-requestmanager@1.7.4/node_modules/web3-core-requestmanager/lib/givenProvider.js":module=>{"use strict";var givenProvider=null,global="object"==typeof globalThis?globalThis:void 0;if(!global)try{global=Function("return this")()}catch(e){global=self}void 0!==global.ethereum?givenProvider=global.ethereum:void 0!==global.web3&&global.web3.currentProvider&&(global.web3.currentProvider.sendAsync&&(global.web3.currentProvider.send=global.web3.currentProvider.sendAsync,delete global.web3.currentProvider.sendAsync),!global.web3.currentProvider.on&&global.web3.currentProvider.connection&&"ipcProviderWrapper"===global.web3.currentProvider.connection.constructor.name&&(global.web3.currentProvider.on=function(type,callback){if("function"!=typeof callback)throw new Error("The second parameter callback must be a function.");if("data"===type)this.connection.on("data",(function(data){var result="";data=data.toString();try{result=JSON.parse(data)}catch(e){return callback(new Error("Couldn't parse response data"+data))}result.id||-1===result.method.indexOf("_subscription")||callback(null,result)}));else this.connection.on(type,callback)}),givenProvider=global.web3.currentProvider),module.exports=givenProvider},"./node_modules/.pnpm/web3-core-requestmanager@1.7.4/node_modules/web3-core-requestmanager/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const{callbackify}=__webpack_require__("./node_modules/.pnpm/util@0.12.4/node_modules/util/util.js");var errors=__webpack_require__("./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/index.js").errors,Jsonrpc=__webpack_require__("./node_modules/.pnpm/web3-core-requestmanager@1.7.4/node_modules/web3-core-requestmanager/lib/jsonrpc.js"),BatchManager=__webpack_require__("./node_modules/.pnpm/web3-core-requestmanager@1.7.4/node_modules/web3-core-requestmanager/lib/batch.js"),givenProvider=__webpack_require__("./node_modules/.pnpm/web3-core-requestmanager@1.7.4/node_modules/web3-core-requestmanager/lib/givenProvider.js"),RequestManager=function RequestManager(provider,net){this.provider=null,this.providers=RequestManager.providers,this.setProvider(provider,net),this.subscriptions=new Map};RequestManager.givenProvider=givenProvider,RequestManager.providers={WebsocketProvider:__webpack_require__("./node_modules/.pnpm/web3-providers-ws@1.7.4/node_modules/web3-providers-ws/lib/index.js"),HttpProvider:__webpack_require__("./node_modules/.pnpm/web3-providers-http@1.7.4/node_modules/web3-providers-http/lib/index.js"),IpcProvider:__webpack_require__("./node_modules/.pnpm/web3-providers-ipc@1.7.4/node_modules/web3-providers-ipc/lib/index.js")},RequestManager.prototype.setProvider=function(provider,net){var _this=this;if(provider&&"string"==typeof provider&&this.providers)if(/^http(s)?:\/\//i.test(provider))provider=new this.providers.HttpProvider(provider);else if(/^ws(s)?:\/\//i.test(provider))provider=new this.providers.WebsocketProvider(provider);else if(provider&&"object"==typeof net&&"function"==typeof net.connect)provider=new this.providers.IpcProvider(provider,net);else if(provider)throw new Error("Can't autodetect provider for \""+provider+'"');if(this.provider&&this.provider.connected&&this.clearSubscriptions(),this.provider=provider||null,this.provider&&this.provider.on){"function"==typeof provider.request?this.provider.on("message",(function(payload){if(payload&&"eth_subscription"===payload.type&&payload.data){const data=payload.data;data.subscription&&_this.subscriptions.has(data.subscription)&&_this.subscriptions.get(data.subscription).callback(null,data.result)}})):this.provider.on("data",(function data(result,deprecatedResult){(result=result||deprecatedResult).method&&result.params&&result.params.subscription&&_this.subscriptions.has(result.params.subscription)&&_this.subscriptions.get(result.params.subscription).callback(null,result.params.result)})),this.provider.on("connect",(function connect(){_this.subscriptions.forEach((function(subscription){subscription.subscription.resubscribe()}))})),this.provider.on("error",(function error(error){_this.subscriptions.forEach((function(subscription){subscription.callback(error)}))}));const disconnect=function disconnect(event){_this._isCleanCloseEvent(event)&&!_this._isIpcCloseError(event)||(_this.subscriptions.forEach((function(subscription){subscription.callback(errors.ConnectionCloseError(event)),_this.subscriptions.delete(subscription.subscription.id)})),_this.provider&&_this.provider.emit&&_this.provider.emit("error",errors.ConnectionCloseError(event))),_this.provider&&_this.provider.emit&&_this.provider.emit("end",event)};this.provider.on("disconnect",disconnect)}},RequestManager.prototype.send=function(data,callback){if(callback=callback||function(){},!this.provider)return callback(errors.InvalidProvider());const{method,params}=data,jsonrpcPayload=Jsonrpc.toPayload(method,params),jsonrpcResultCallback=this._jsonrpcResultCallback(callback,jsonrpcPayload);if(this.provider.request){callbackify(this.provider.request.bind(this.provider))({method,params},callback)}else if(this.provider.sendAsync)this.provider.sendAsync(jsonrpcPayload,jsonrpcResultCallback);else{if(!this.provider.send)throw new Error("Provider does not have a request or send method to use.");this.provider.send(jsonrpcPayload,jsonrpcResultCallback)}},RequestManager.prototype.sendBatch=function(data,callback){if(!this.provider)return callback(errors.InvalidProvider());var payload=Jsonrpc.toBatchPayload(data);this.provider[this.provider.sendAsync?"sendAsync":"send"](payload,(function(err,results){return err?callback(err):Array.isArray(results)?void callback(null,results):callback(errors.InvalidResponse(results))}))},RequestManager.prototype.addSubscription=function(subscription,callback){if(!this.provider.on)throw new Error("The provider doesn't support subscriptions: "+this.provider.constructor.name);this.subscriptions.set(subscription.id,{callback,subscription})},RequestManager.prototype.removeSubscription=function(id,callback){if(this.subscriptions.has(id)){var type=this.subscriptions.get(id).subscription.options.type;return this.subscriptions.delete(id),void this.send({method:type+"_unsubscribe",params:[id]},callback)}"function"==typeof callback&&callback(null)},RequestManager.prototype.clearSubscriptions=function(keepIsSyncing){try{var _this=this;return this.subscriptions.size>0&&this.subscriptions.forEach((function(value,id){keepIsSyncing&&"syncing"===value.name||_this.removeSubscription(id)})),this.provider.reset&&this.provider.reset(),!0}catch(e){throw new Error(`Error while clearing subscriptions: ${e}`)}},RequestManager.prototype._isCleanCloseEvent=function(event){return"object"==typeof event&&([1e3].includes(event.code)||!0===event.wasClean)},RequestManager.prototype._isIpcCloseError=function(event){return"boolean"==typeof event&&event},RequestManager.prototype._jsonrpcResultCallback=function(callback,payload){return function(err,result){return result&&result.id&&payload.id!==result.id?callback(new Error(`Wrong response id ${result.id} (expected: ${payload.id}) in ${JSON.stringify(payload)}`)):err?callback(err):result&&result.error?callback(errors.ErrorResponse(result)):Jsonrpc.isValidResponse(result)?void callback(null,result.result):callback(errors.InvalidResponse(result))}},module.exports={Manager:RequestManager,BatchManager}},"./node_modules/.pnpm/web3-core-requestmanager@1.7.4/node_modules/web3-core-requestmanager/lib/jsonrpc.js":module=>{"use strict";var Jsonrpc={messageId:0,toPayload:function(method,params){if(!method)throw new Error('JSONRPC method should be specified for params: "'+JSON.stringify(params)+'"!');return Jsonrpc.messageId++,{jsonrpc:"2.0",id:Jsonrpc.messageId,method,params:params||[]}},isValidResponse:function(response){return Array.isArray(response)?response.every(validateSingleMessage):validateSingleMessage(response);function validateSingleMessage(message){return!(!message||message.error||"2.0"!==message.jsonrpc||"number"!=typeof message.id&&"string"!=typeof message.id||void 0===message.result)}},toBatchPayload:function(messages){return messages.map((function(message){return Jsonrpc.toPayload(message.method,message.params)}))}};module.exports=Jsonrpc},"./node_modules/.pnpm/web3-core-subscriptions@1.7.4/node_modules/web3-core-subscriptions/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js"),Subscription=__webpack_require__("./node_modules/.pnpm/web3-core-subscriptions@1.7.4/node_modules/web3-core-subscriptions/lib/subscription.js"),Subscriptions=function Subscriptions(options){this.name=options.name,this.type=options.type,this.subscriptions=options.subscriptions||{},this.requestManager=null};Subscriptions.prototype.setRequestManager=function(rm){this.requestManager=rm},Subscriptions.prototype.attachToObject=function(obj){var func=this.buildCall(),name=this.name.split(".");name.length>1?(obj[name[0]]=obj[name[0]]||{},obj[name[0]][name[1]]=func):obj[name[0]]=func},Subscriptions.prototype.buildCall=function(){var _this=this;return function(){_this.subscriptions[arguments[0]]||console.warn("Subscription "+JSON.stringify(arguments[0])+" doesn't exist. Subscribing anyway.");var subscription=new Subscription({subscription:_this.subscriptions[arguments[0]]||{},requestManager:_this.requestManager,type:_this.type});return subscription.subscribe.apply(subscription,arguments)}},module.exports={subscriptions:Subscriptions,subscription:Subscription}},"./node_modules/.pnpm/web3-core-subscriptions@1.7.4/node_modules/web3-core-subscriptions/lib/subscription.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var errors=__webpack_require__("./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/index.js").errors,EventEmitter=__webpack_require__("./node_modules/.pnpm/eventemitter3@4.0.4/node_modules/eventemitter3/index.js"),formatters=__webpack_require__("./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/index.js").formatters;function identity(value){return value}function Subscription(options){EventEmitter.call(this),this.id=null,this.callback=identity,this.arguments=null,this.lastBlock=null,this.options={subscription:options.subscription,type:options.type,requestManager:options.requestManager}}Subscription.prototype=Object.create(EventEmitter.prototype),Subscription.prototype.constructor=Subscription,Subscription.prototype._extractCallback=function(args){if("function"==typeof args[args.length-1])return args.pop()},Subscription.prototype._validateArgs=function(args){var subscription=this.options.subscription;if(subscription||(subscription={}),subscription.params||(subscription.params=0),args.length!==subscription.params)throw errors.InvalidNumberOfParams(args.length,subscription.params,subscription.subscriptionName)},Subscription.prototype._formatInput=function(args){var subscription=this.options.subscription;return subscription&&subscription.inputFormatter?subscription.inputFormatter.map((function(formatter,index){return formatter?formatter(args[index]):args[index]})):args},Subscription.prototype._formatOutput=function(result){var subscription=this.options.subscription;return subscription&&subscription.outputFormatter&&result?subscription.outputFormatter(result):result},Subscription.prototype._toPayload=function(args){var params=[];if(this.callback=this._extractCallback(args)||identity,this.subscriptionMethod||(this.subscriptionMethod=args.shift(),this.options.subscription.subscriptionName&&(this.subscriptionMethod=this.options.subscription.subscriptionName)),this.arguments||(this.arguments=this._formatInput(args),this._validateArgs(this.arguments),args=[]),params.push(this.subscriptionMethod),params=params.concat(this.arguments),args.length)throw new Error("Only a callback is allowed as parameter on an already instantiated subscription.");return{method:this.options.type+"_subscribe",params}},Subscription.prototype.unsubscribe=function(callback){this.options.requestManager.removeSubscription(this.id,callback),this.id=null,this.lastBlock=null,this.removeAllListeners()},Subscription.prototype.subscribe=function(){var _this=this,args=Array.prototype.slice.call(arguments),payload=this._toPayload(args);if(!payload)return this;if(!this.options.requestManager.provider)return setTimeout((function(){var err1=new Error("No provider set.");_this.callback(err1,null,_this),_this.emit("error",err1)}),0),this;if(!this.options.requestManager.provider.on)return setTimeout((function(){var err2=new Error("The current provider doesn't support subscriptions: "+_this.options.requestManager.provider.constructor.name);_this.callback(err2,null,_this),_this.emit("error",err2)}),0),this;if(this.lastBlock&&this.options.params&&"object"==typeof this.options.params&&(payload.params[1]=this.options.params,payload.params[1].fromBlock=formatters.inputBlockNumberFormatter(this.lastBlock+1)),this.id&&this.unsubscribe(),this.options.params=payload.params[1],"logs"===payload.params[0]&&payload.params[1]&&"object"==typeof payload.params[1]&&payload.params[1].hasOwnProperty("fromBlock")&&isFinite(payload.params[1].fromBlock)){var blockParams=Object.assign({},payload.params[1]);this.options.requestManager.send({method:"eth_getLogs",params:[blockParams]},(function(err,logs){err?setTimeout((function(){_this.callback(err,null,_this),_this.emit("error",err)}),0):logs.forEach((function(log){var output=_this._formatOutput(log);_this.callback(null,output,_this),_this.emit("data",output)}))}))}return"object"==typeof payload.params[1]&&delete payload.params[1].fromBlock,this.options.requestManager.send(payload,(function(err,result){!err&&result?(_this.id=result,_this.method=payload.params[0],_this.options.requestManager.addSubscription(_this,(function(error,result){error?(_this.callback(error,!1,_this),_this.emit("error",error)):(Array.isArray(result)||(result=[result]),result.forEach((function(resultItem){var output=_this._formatOutput(resultItem);if(_this.lastBlock=output&&"object"==typeof output?output.blockNumber:null,"function"==typeof _this.options.subscription.subscriptionHandler)return _this.options.subscription.subscriptionHandler.call(_this,output);_this.emit("data",output),_this.callback(null,output,_this)})))})),_this.emit("connected",result)):setTimeout((function(){_this.callback(err,!1,_this),_this.emit("error",err)}),0)})),this},Subscription.prototype.resubscribe=function(){this.options.requestManager.removeSubscription(this.id),this.id=null,this.subscribe(this.callback)},module.exports=Subscription},"./node_modules/.pnpm/web3-core@1.7.4/node_modules/web3-core/lib/extend.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var formatters=__webpack_require__("./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/index.js").formatters,Method=__webpack_require__("./node_modules/.pnpm/web3-core-method@1.7.4/node_modules/web3-core-method/lib/index.js"),utils=__webpack_require__("./node_modules/.pnpm/web3-utils@1.7.4/node_modules/web3-utils/lib/index.js");module.exports=function(pckg){var ex=function(extension){var extendedObject;return extension.property?(pckg[extension.property]||(pckg[extension.property]={}),extendedObject=pckg[extension.property]):extendedObject=pckg,extension.methods&&extension.methods.forEach((function(method){method instanceof Method||(method=new Method(method)),method.attachToObject(extendedObject),method.setRequestManager(pckg._requestManager)})),pckg};return ex.formatters=formatters,ex.utils=utils,ex.Method=Method,ex}},"./node_modules/.pnpm/web3-core@1.7.4/node_modules/web3-core/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{const requestManager=__webpack_require__("./node_modules/.pnpm/web3-core-requestmanager@1.7.4/node_modules/web3-core-requestmanager/lib/index.js"),extend=__webpack_require__("./node_modules/.pnpm/web3-core@1.7.4/node_modules/web3-core/lib/extend.js");module.exports={packageInit:(pkg,args)=>{if(args=Array.prototype.slice.call(args),!pkg)throw new Error('You need to instantiate using the "new" keyword.');Object.defineProperty(pkg,"currentProvider",{get:()=>pkg._provider,set:value=>pkg.setProvider(value),enumerable:!0,configurable:!0}),args[0]&&args[0]._requestManager?pkg._requestManager=args[0]._requestManager:pkg._requestManager=new requestManager.Manager(args[0],args[1]),pkg.givenProvider=requestManager.Manager.givenProvider,pkg.providers=requestManager.Manager.providers,pkg._provider=pkg._requestManager.provider,pkg.setProvider||(pkg.setProvider=(provider,net)=>(pkg._requestManager.setProvider(provider,net),pkg._provider=pkg._requestManager.provider,!0)),pkg.setRequestManager=manager=>{pkg._requestManager=manager,pkg._provider=manager.provider},pkg.BatchRequest=requestManager.BatchManager.bind(null,pkg._requestManager),pkg.extend=extend(pkg)},addProviders:pkg=>{pkg.givenProvider=requestManager.Manager.givenProvider,pkg.providers=requestManager.Manager.providers}}},"./node_modules/.pnpm/web3-eth-abi@1.7.4/node_modules/web3-eth-abi/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer,utils=__webpack_require__("./node_modules/.pnpm/web3-utils@1.7.4/node_modules/web3-utils/lib/index.js"),EthersAbiCoder=__webpack_require__("./node_modules/.pnpm/@ethersproject+abi@5.6.4/node_modules/@ethersproject/abi/lib.esm/index.js").RQ,ParamType=__webpack_require__("./node_modules/.pnpm/@ethersproject+abi@5.6.4/node_modules/@ethersproject/abi/lib.esm/index.js")._R,ethersAbiCoder=new EthersAbiCoder((function(type,value){return!type.match(/^u?int/)||Array.isArray(value)||value&&"object"==typeof value&&"BN"===value.constructor.name?value:value.toString()}));function Result(){}var ABICoder=function(){};ABICoder.prototype.encodeFunctionSignature=function(functionName){return("function"==typeof functionName||"object"==typeof functionName&&functionName)&&(functionName=utils._jsonInterfaceMethodToString(functionName)),utils.sha3(functionName).slice(0,10)},ABICoder.prototype.encodeEventSignature=function(functionName){return("function"==typeof functionName||"object"==typeof functionName&&functionName)&&(functionName=utils._jsonInterfaceMethodToString(functionName)),utils.sha3(functionName)},ABICoder.prototype.encodeParameter=function(type,param){return this.encodeParameters([type],[param])},ABICoder.prototype.encodeParameters=function(types,params){var self=this;return types=self.mapTypes(types),params=params.map((function(param,index){let type=types[index];if("object"==typeof type&&type.type&&(type=type.type),param=self.formatParam(type,param),"string"==typeof type&&type.includes("tuple")){const coder=ethersAbiCoder._getCoder(ParamType.from(type)),modifyParams=(coder,param)=>{if("array"===coder.name){if(!coder.type.match(/\[(\d+)\]/))return param.map((p=>modifyParams(ethersAbiCoder._getCoder(ParamType.from(coder.type.replace("[]",""))),p)));const arrayLength=parseInt(coder.type.match(/\[(\d+)\]/)[1]);if(param.length!==arrayLength)throw new Error("Array length does not matches with the given input");return param.map((p=>modifyParams(ethersAbiCoder._getCoder(ParamType.from(coder.type.replace(/\[\d+\]/,""))),p)))}coder.coders.forEach(((c,i)=>{"tuple"===c.name?modifyParams(c,param[i]):param[i]=self.formatParam(c.name,param[i])}))};modifyParams(coder,param)}return param})),ethersAbiCoder.encode(types,params)},ABICoder.prototype.mapTypes=function(types){var self=this,mappedTypes=[];return types.forEach((function(type){if("object"==typeof type&&"function"===type.type&&(type=Object.assign({},type,{type:"bytes24"})),self.isSimplifiedStructFormat(type)){var structName=Object.keys(type)[0];mappedTypes.push(Object.assign(self.mapStructNameAndType(structName),{components:self.mapStructToCoderFormat(type[structName])}))}else mappedTypes.push(type)})),mappedTypes},ABICoder.prototype.isSimplifiedStructFormat=function(type){return"object"==typeof type&&void 0===type.components&&void 0===type.name},ABICoder.prototype.mapStructNameAndType=function(structName){var type="tuple";return structName.indexOf("[]")>-1&&(type="tuple[]",structName=structName.slice(0,-2)),{type,name:structName}},ABICoder.prototype.mapStructToCoderFormat=function(struct){var self=this,components=[];return Object.keys(struct).forEach((function(key){"object"!=typeof struct[key]?components.push({name:key,type:struct[key]}):components.push(Object.assign(self.mapStructNameAndType(key),{components:self.mapStructToCoderFormat(struct[key])}))})),components},ABICoder.prototype.formatParam=function(type,param){const paramTypeBytes=new RegExp(/^bytes([0-9]*)$/),paramTypeBytesArray=new RegExp(/^bytes([0-9]*)\[\]$/),paramTypeNumber=new RegExp(/^(u?int)([0-9]*)$/),paramTypeNumberArray=new RegExp(/^(u?int)([0-9]*)\[\]$/);if(utils.isBN(param)||utils.isBigNumber(param))return param.toString(10);if(type.match(paramTypeBytesArray)||type.match(paramTypeNumberArray))return param.map((p=>this.formatParam(type.replace("[]",""),p)));let match=type.match(paramTypeNumber);if(match){let size=parseInt(match[2]||"256");size/8<param.length&&(param=utils.leftPad(param,size))}if(match=type.match(paramTypeBytes),match){Buffer.isBuffer(param)&&(param=utils.toHex(param));let size=parseInt(match[1]);if(size){let maxSize=2*size;"0x"===param.substring(0,2)&&(maxSize+=2),param.length<maxSize&&(param=utils.rightPad(param,2*size))}param.length%2==1&&(param="0x0"+param.substring(2))}return param},ABICoder.prototype.encodeFunctionCall=function(jsonInterface,params){return this.encodeFunctionSignature(jsonInterface)+this.encodeParameters(jsonInterface.inputs,params).replace("0x","")},ABICoder.prototype.decodeParameter=function(type,bytes){return this.decodeParameters([type],bytes)[0]},ABICoder.prototype.decodeParameters=function(outputs,bytes){return this.decodeParametersWith(outputs,bytes,!1)},ABICoder.prototype.decodeParametersWith=function(outputs,bytes,loose){if(outputs.length>0&&(!bytes||"0x"===bytes||"0X"===bytes))throw new Error("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");var res=ethersAbiCoder.decode(this.mapTypes(outputs),"0x"+bytes.replace(/0x/i,""),loose),returnValue=new Result;return returnValue.__length__=0,outputs.forEach((function(output,i){var decodedValue=res[returnValue.__length__];const isStringObject="object"==typeof output&&output.type&&"string"===output.type;decodedValue="0x"!==decodedValue||isStringObject||"string"==typeof output&&"string"===output?decodedValue:null,returnValue[i]=decodedValue,("function"==typeof output||output&&"object"==typeof output)&&output.name&&(returnValue[output.name]=decodedValue),returnValue.__length__++})),returnValue},ABICoder.prototype.decodeLog=function(inputs,data,topics){var _this=this;topics=Array.isArray(topics)?topics:[topics],data=data||"";var notIndexedInputs=[],indexedParams=[],topicCount=0;inputs.forEach((function(input,i){input.indexed?(indexedParams[i]=["bool","int","uint","address","fixed","ufixed"].find((function(staticType){return-1!==input.type.indexOf(staticType)}))?_this.decodeParameter(input.type,topics[topicCount]):topics[topicCount],topicCount++):notIndexedInputs[i]=input}));var nonIndexedData=data,notIndexedParams=nonIndexedData?this.decodeParametersWith(notIndexedInputs,nonIndexedData,!0):[],returnValue=new Result;return returnValue.__length__=0,inputs.forEach((function(res,i){returnValue[i]="string"===res.type?"":null,void 0!==notIndexedParams[i]&&(returnValue[i]=notIndexedParams[i]),void 0!==indexedParams[i]&&(returnValue[i]=indexedParams[i]),res.name&&(returnValue[res.name]=returnValue[i]),returnValue.__length__++})),returnValue};var coder=new ABICoder;module.exports=coder},"./node_modules/.pnpm/web3-eth-contract@1.7.4/node_modules/web3-eth-contract/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js"),core=__webpack_require__("./node_modules/.pnpm/web3-core@1.7.4/node_modules/web3-core/lib/index.js"),Method=__webpack_require__("./node_modules/.pnpm/web3-core-method@1.7.4/node_modules/web3-core-method/lib/index.js"),utils=__webpack_require__("./node_modules/.pnpm/web3-utils@1.7.4/node_modules/web3-utils/lib/index.js"),Subscription=__webpack_require__("./node_modules/.pnpm/web3-core-subscriptions@1.7.4/node_modules/web3-core-subscriptions/lib/index.js").subscription,formatters=__webpack_require__("./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/index.js").formatters,errors=__webpack_require__("./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/index.js").errors,promiEvent=__webpack_require__("./node_modules/.pnpm/web3-core-promievent@1.7.4/node_modules/web3-core-promievent/lib/index.js"),abi=__webpack_require__("./node_modules/.pnpm/web3-eth-abi@1.7.4/node_modules/web3-eth-abi/lib/index.js"),Contract=function Contract(jsonInterface,address,options){var _this=this,args=Array.prototype.slice.call(arguments);if(!(this instanceof Contract))throw new Error('Please use the "new" keyword to instantiate a web3.eth.Contract() object!');if(this.setProvider=function(){core.packageInit(_this,arguments),_this.clearSubscriptions=_this._requestManager.clearSubscriptions},core.packageInit(this,[this.constructor]),this.clearSubscriptions=this._requestManager.clearSubscriptions,!jsonInterface||!Array.isArray(jsonInterface))throw errors.ContractMissingABIError();this.options={};var lastArg=args[args.length-1];lastArg&&"object"==typeof lastArg&&!Array.isArray(lastArg)&&(options=lastArg,this.options={...this.options,...this._getOrSetDefaultOptions(options)},address&&"object"==typeof address&&(address=null)),Object.defineProperty(this.options,"address",{set:function(value){value&&(_this._address=utils.toChecksumAddress(formatters.inputAddressFormatter(value)))},get:function(){return _this._address},enumerable:!0}),Object.defineProperty(this.options,"jsonInterface",{set:function(value){return _this.methods={},_this.events={},_this._jsonInterface=value.map((function(method){var func,funcName;if(method.constant="view"===method.stateMutability||"pure"===method.stateMutability||method.constant,method.payable="payable"===method.stateMutability||method.payable,method.name&&(funcName=utils._jsonInterfaceMethodToString(method)),"function"===method.type){if(method.signature=abi.encodeFunctionSignature(funcName),func=_this._createTxObject.bind({method,parent:_this}),_this.methods[method.name]){var cascadeFunc=_this._createTxObject.bind({method,parent:_this,nextMethod:_this.methods[method.name]});_this.methods[method.name]=cascadeFunc}else _this.methods[method.name]=func;_this.methods[method.signature]=func,_this.methods[funcName]=func}else if("event"===method.type){method.signature=abi.encodeEventSignature(funcName);var event=_this._on.bind(_this,method.signature);_this.events[method.name]&&"bound "!==_this.events[method.name].name||(_this.events[method.name]=event),_this.events[method.signature]=event,_this.events[funcName]=event}return method})),_this.events.allEvents=_this._on.bind(_this,"allevents"),_this._jsonInterface},get:function(){return _this._jsonInterface},enumerable:!0});var defaultAccount=this.constructor.defaultAccount,defaultBlock=this.constructor.defaultBlock||"latest";Object.defineProperty(this,"handleRevert",{get:function(){return!1===_this.options.handleRevert||!0===_this.options.handleRevert?_this.options.handleRevert:this.constructor.handleRevert},set:function(val){_this.options.handleRevert=val},enumerable:!0}),Object.defineProperty(this,"defaultCommon",{get:function(){return _this.options.common||this.constructor.defaultCommon},set:function(val){_this.options.common=val},enumerable:!0}),Object.defineProperty(this,"defaultHardfork",{get:function(){return _this.options.hardfork||this.constructor.defaultHardfork},set:function(val){_this.options.hardfork=val},enumerable:!0}),Object.defineProperty(this,"defaultChain",{get:function(){return _this.options.chain||this.constructor.defaultChain},set:function(val){_this.options.chain=val},enumerable:!0}),Object.defineProperty(this,"transactionPollingTimeout",{get:function(){return 0===_this.options.transactionPollingTimeout?_this.options.transactionPollingTimeout:_this.options.transactionPollingTimeout||this.constructor.transactionPollingTimeout},set:function(val){_this.options.transactionPollingTimeout=val},enumerable:!0}),Object.defineProperty(this,"transactionPollingInterval",{get:function(){return 0===_this.options.transactionPollingInterval?_this.options.transactionPollingInterval:_this.options.transactionPollingInterval||this.constructor.transactionPollingInterval},set:function(val){_this.options.transactionPollingInterval=val},enumerable:!0}),Object.defineProperty(this,"transactionConfirmationBlocks",{get:function(){return 0===_this.options.transactionConfirmationBlocks?_this.options.transactionConfirmationBlocks:_this.options.transactionConfirmationBlocks||this.constructor.transactionConfirmationBlocks},set:function(val){_this.options.transactionConfirmationBlocks=val},enumerable:!0}),Object.defineProperty(this,"transactionBlockTimeout",{get:function(){return 0===_this.options.transactionBlockTimeout?_this.options.transactionBlockTimeout:_this.options.transactionBlockTimeout||this.constructor.transactionBlockTimeout},set:function(val){_this.options.transactionBlockTimeout=val},enumerable:!0}),Object.defineProperty(this,"blockHeaderTimeout",{get:function(){return 0===_this.options.blockHeaderTimeout?_this.options.blockHeaderTimeout:_this.options.blockHeaderTimeout||this.constructor.blockHeaderTimeout},set:function(val){_this.options.blockHeaderTimeout=val},enumerable:!0}),Object.defineProperty(this,"defaultAccount",{get:function(){return defaultAccount},set:function(val){return val&&(defaultAccount=utils.toChecksumAddress(formatters.inputAddressFormatter(val))),val},enumerable:!0}),Object.defineProperty(this,"defaultBlock",{get:function(){return defaultBlock},set:function(val){return defaultBlock=val,val},enumerable:!0}),this.methods={},this.events={},this._address=null,this._jsonInterface=[],this.options.address=address,this.options.jsonInterface=jsonInterface};Contract.setProvider=function(provider,accounts){core.packageInit(this,[provider]),this._ethAccounts=accounts},Contract.prototype._getCallback=function getCallback(args){if(args&&args[args.length-1]&&"function"==typeof args[args.length-1])return args.pop()},Contract.prototype._checkListener=function(type,event){if(event===type)throw errors.ContractReservedEventError(type)},Contract.prototype._getOrSetDefaultOptions=function getOrSetDefaultOptions(options){var gasPrice=options.gasPrice?String(options.gasPrice):null,from=options.from?utils.toChecksumAddress(formatters.inputAddressFormatter(options.from)):null;return options.data=options.data||this.options.data,options.from=from||this.options.from,options.gasPrice=gasPrice||this.options.gasPrice,options.gas=options.gas||options.gasLimit||this.options.gas,delete options.gasLimit,options},Contract.prototype._encodeEventABI=function(event,options){var filter=(options=options||{}).filter||{},result={};if(["fromBlock","toBlock"].filter((function(f){return void 0!==options[f]})).forEach((function(f){result[f]=formatters.inputBlockNumberFormatter(options[f])})),Array.isArray(options.topics))result.topics=options.topics;else{if(result.topics=[],event&&!event.anonymous&&"ALLEVENTS"!==event.name&&result.topics.push(event.signature),"ALLEVENTS"!==event.name){var indexedTopics=event.inputs.filter((function(i){return!0===i.indexed})).map((function(i){var value=filter[i.name];return value?Array.isArray(value)?value.map((function(v){return abi.encodeParameter(i.type,v)})):abi.encodeParameter(i.type,value):null}));result.topics=result.topics.concat(indexedTopics)}result.topics.length||delete result.topics}return this.options.address&&(result.address=this.options.address.toLowerCase()),result},Contract.prototype._decodeEventABI=function(data){var event=this;data.data=data.data||"",data.topics=data.topics||[];var result=formatters.outputLogFormatter(data);if("ALLEVENTS"===event.name&&(event=event.jsonInterface.find((function(intf){return intf.signature===data.topics[0]}))||{anonymous:!0}),event.inputs=event.inputs||[],!event.anonymous){let indexedInputs=0;event.inputs.forEach((input=>input.indexed?indexedInputs++:null)),indexedInputs>0&&data.topics.length!==indexedInputs+1&&(event={anonymous:!0,inputs:[]})}var argTopics=event.anonymous?data.topics:data.topics.slice(1);return result.returnValues=abi.decodeLog(event.inputs,data.data,argTopics),delete result.returnValues.__length__,result.event=event.name,result.signature=event.anonymous||!data.topics[0]?null:data.topics[0],result.raw={data:result.data,topics:result.topics},delete result.data,delete result.topics,result},Contract.prototype._encodeMethodABI=function _encodeMethodABI(){var methodSignature=this._method.signature,args=this.arguments||[],signature=!1,paramsABI=this._parent.options.jsonInterface.filter((function(json){return"constructor"===methodSignature&&json.type===methodSignature||(json.signature===methodSignature||json.signature===methodSignature.replace("0x","")||json.name===methodSignature)&&"function"===json.type})).map((function(json){var inputLength=Array.isArray(json.inputs)?json.inputs.length:0;if(inputLength!==args.length)throw new Error("The number of arguments is not matching the methods required number. You need to pass "+inputLength+" arguments.");return"function"===json.type&&(signature=json.signature),Array.isArray(json.inputs)?json.inputs:[]})).map((function(inputs){return abi.encodeParameters(inputs,args).replace("0x","")}))[0]||"";if("constructor"===methodSignature){if(!this._deployData)throw new Error("The contract has no contract data option set. This is necessary to append the constructor parameters.");return this._deployData.startsWith("0x")||(this._deployData="0x"+this._deployData),this._deployData+paramsABI}var returnValue=signature?signature+paramsABI:paramsABI;if(!returnValue)throw new Error("Couldn't find a matching contract method named \""+this._method.name+'".');return returnValue},Contract.prototype._decodeMethodReturn=function(outputs,returnValues){if(!returnValues)return null;returnValues=returnValues.length>=2?returnValues.slice(2):returnValues;var result=abi.decodeParameters(outputs,returnValues);return 1===result.__length__?result[0]:(delete result.__length__,result)},Contract.prototype.deploy=function(options,callback){if((options=options||{}).arguments=options.arguments||[],!(options=this._getOrSetDefaultOptions(options)).data){if("function"==typeof callback)return callback(errors.ContractMissingDeployDataError());throw errors.ContractMissingDeployDataError()}var constructor=this.options.jsonInterface.find((method=>"constructor"===method.type))||{};return constructor.signature="constructor",this._createTxObject.apply({method:constructor,parent:this,deployData:options.data,_ethAccounts:this.constructor._ethAccounts},options.arguments)},Contract.prototype._generateEventOptions=function(){var args=Array.prototype.slice.call(arguments),callback=this._getCallback(args),options="object"===(!!args[args.length-1]&&typeof args[args.length-1])?args.pop():{},eventName="string"==typeof args[0]?args[0]:"allevents",event="allevents"===eventName.toLowerCase()?{name:"ALLEVENTS",jsonInterface:this.options.jsonInterface}:this.options.jsonInterface.find((function(json){return"event"===json.type&&(json.name===eventName||json.signature==="0x"+eventName.replace("0x",""))}));if(!event)throw errors.ContractEventDoesNotExistError(eventName);if(!utils.isAddress(this.options.address))throw errors.ContractNoAddressDefinedError();return{params:this._encodeEventABI(event,options),event,callback}},Contract.prototype.clone=function(){return new this.constructor(this.options.jsonInterface,this.options.address,this.options)},Contract.prototype.once=function(event,options,callback){var args=Array.prototype.slice.call(arguments);if(!(callback=this._getCallback(args)))throw errors.ContractOnceRequiresCallbackError();options&&delete options.fromBlock,this._on(event,options,(function(err,res,sub){sub.unsubscribe(),"function"==typeof callback&&callback(err,res,sub)}))},Contract.prototype._on=function(){var subOptions=this._generateEventOptions.apply(this,arguments);subOptions.params&&subOptions.params.toBlock&&(delete subOptions.params.toBlock,console.warn("Invalid option: toBlock. Use getPastEvents for specific range.")),this._checkListener("newListener",subOptions.event.name),this._checkListener("removeListener",subOptions.event.name);var subscription=new Subscription({subscription:{params:1,inputFormatter:[formatters.inputLogFormatter],outputFormatter:this._decodeEventABI.bind(subOptions.event),subscriptionHandler:function(output){output.removed?this.emit("changed",output):this.emit("data",output),"function"==typeof this.callback&&this.callback(null,output,this)}},type:"eth",requestManager:this._requestManager});return subscription.subscribe("logs",subOptions.params,subOptions.callback||function(){}),subscription},Contract.prototype.getPastEvents=function(){var subOptions=this._generateEventOptions.apply(this,arguments),getPastLogs=new Method({name:"getPastLogs",call:"eth_getLogs",params:1,inputFormatter:[formatters.inputLogFormatter],outputFormatter:this._decodeEventABI.bind(subOptions.event)});getPastLogs.setRequestManager(this._requestManager);var call=getPastLogs.buildCall();return getPastLogs=null,call(subOptions.params,subOptions.callback)},Contract.prototype._createTxObject=function _createTxObject(){var args=Array.prototype.slice.call(arguments),txObject={};if("function"===this.method.type&&(txObject.call=this.parent._executeMethod.bind(txObject,"call"),txObject.call.request=this.parent._executeMethod.bind(txObject,"call",!0)),txObject.send=this.parent._executeMethod.bind(txObject,"send"),txObject.send.request=this.parent._executeMethod.bind(txObject,"send",!0),txObject.encodeABI=this.parent._encodeMethodABI.bind(txObject),txObject.estimateGas=this.parent._executeMethod.bind(txObject,"estimate"),txObject.createAccessList=this.parent._executeMethod.bind(txObject,"createAccessList"),args&&this.method.inputs&&args.length!==this.method.inputs.length){if(this.nextMethod)return this.nextMethod.apply(null,args);throw errors.InvalidNumberOfParams(args.length,this.method.inputs.length,this.method.name)}return txObject.arguments=args||[],txObject._method=this.method,txObject._parent=this.parent,txObject._ethAccounts=this.parent.constructor._ethAccounts||this._ethAccounts,this.deployData&&(txObject._deployData=this.deployData),txObject},Contract.prototype._processExecuteArguments=function _processExecuteArguments(args,defer){var processedArgs={};if(processedArgs.type=args.shift(),processedArgs.callback=this._parent._getCallback(args),"call"!==processedArgs.type||!0===args[args.length-1]||"string"!=typeof args[args.length-1]&&!isFinite(args[args.length-1])||(processedArgs.defaultBlock=args.pop()),processedArgs.options="object"===(!!args[args.length-1]&&typeof args[args.length-1])?args.pop():{},processedArgs.generateRequest=!0===args[args.length-1]&&args.pop(),processedArgs.options=this._parent._getOrSetDefaultOptions(processedArgs.options),processedArgs.options.data=this.encodeABI(),!this._deployData&&!utils.isAddress(this._parent.options.address))throw errors.ContractNoAddressDefinedError();return this._deployData||(processedArgs.options.to=this._parent.options.address),processedArgs.options.data?processedArgs:utils._fireError(new Error("Couldn't find a matching contract method, or the number of parameters is wrong."),defer.eventEmitter,defer.reject,processedArgs.callback)},Contract.prototype._executeMethod=function _executeMethod(){var _this=this,args=this._parent._processExecuteArguments.call(this,Array.prototype.slice.call(arguments),defer),defer=promiEvent("send"!==args.type),ethAccounts=_this.constructor._ethAccounts||_this._ethAccounts;if(args.generateRequest){var payload={params:[formatters.inputCallFormatter.call(this._parent,args.options)],callback:args.callback};return"call"===args.type?(payload.params.push(formatters.inputDefaultBlockNumberFormatter.call(this._parent,args.defaultBlock)),payload.method="eth_call",payload.format=this._parent._decodeMethodReturn.bind(null,this._method.outputs)):payload.method="eth_sendTransaction",payload}switch(args.type){case"createAccessList":if(!utils.isAddress(args.options.from))return utils._fireError(errors.ContractNoFromAddressDefinedError(),defer.eventEmitter,defer.reject,args.callback);var createAccessList=new Method({name:"createAccessList",call:"eth_createAccessList",params:2,inputFormatter:[formatters.inputTransactionFormatter,formatters.inputDefaultBlockNumberFormatter],requestManager:_this._parent._requestManager,accounts:ethAccounts,defaultAccount:_this._parent.defaultAccount,defaultBlock:_this._parent.defaultBlock}).createFunction();return createAccessList(args.options,args.callback);case"estimate":var estimateGas=new Method({name:"estimateGas",call:"eth_estimateGas",params:1,inputFormatter:[formatters.inputCallFormatter],outputFormatter:utils.hexToNumber,requestManager:_this._parent._requestManager,accounts:ethAccounts,defaultAccount:_this._parent.defaultAccount,defaultBlock:_this._parent.defaultBlock}).createFunction();return estimateGas(args.options,args.callback);case"call":var call=new Method({name:"call",call:"eth_call",params:2,inputFormatter:[formatters.inputCallFormatter,formatters.inputDefaultBlockNumberFormatter],outputFormatter:function(result){return _this._parent._decodeMethodReturn(_this._method.outputs,result)},requestManager:_this._parent._requestManager,accounts:ethAccounts,defaultAccount:_this._parent.defaultAccount,defaultBlock:_this._parent.defaultBlock,handleRevert:_this._parent.handleRevert,abiCoder:abi}).createFunction();return call(args.options,args.defaultBlock,args.callback);case"send":if(!utils.isAddress(args.options.from))return utils._fireError(errors.ContractNoFromAddressDefinedError(),defer.eventEmitter,defer.reject,args.callback);if("boolean"==typeof this._method.payable&&!this._method.payable&&args.options.value&&args.options.value>0)return utils._fireError(new Error("Can not send value to non-payable contract method or constructor"),defer.eventEmitter,defer.reject,args.callback);var extraFormatters={receiptFormatter:function(receipt){if(Array.isArray(receipt.logs)){var events=receipt.logs.map((log=>_this._parent._decodeEventABI.call({name:"ALLEVENTS",jsonInterface:_this._parent.options.jsonInterface},log)));receipt.events={};var count=0;events.forEach((function(ev){ev.event?receipt.events[ev.event]?Array.isArray(receipt.events[ev.event])?receipt.events[ev.event].push(ev):receipt.events[ev.event]=[receipt.events[ev.event],ev]:receipt.events[ev.event]=ev:(receipt.events[count]=ev,count++)})),delete receipt.logs}return receipt},contractDeployFormatter:function(receipt){var newContract=_this._parent.clone();return newContract.options.address=receipt.contractAddress,newContract}},sendTransaction=new Method({name:"sendTransaction",call:"eth_sendTransaction",params:1,inputFormatter:[formatters.inputTransactionFormatter],requestManager:_this._parent._requestManager,accounts:_this.constructor._ethAccounts||_this._ethAccounts,defaultAccount:_this._parent.defaultAccount,defaultBlock:_this._parent.defaultBlock,transactionBlockTimeout:_this._parent.transactionBlockTimeout,transactionConfirmationBlocks:_this._parent.transactionConfirmationBlocks,transactionPollingTimeout:_this._parent.transactionPollingTimeout,transactionPollingInterval:_this._parent.transactionPollingInterval,defaultCommon:_this._parent.defaultCommon,defaultChain:_this._parent.defaultChain,defaultHardfork:_this._parent.defaultHardfork,handleRevert:_this._parent.handleRevert,extraFormatters,abiCoder:abi}).createFunction();return sendTransaction(args.options,args.callback);default:throw new Error('Method "'+args.type+'" not implemented.')}},module.exports=Contract},"./node_modules/.pnpm/web3-eth-iban@1.7.4/node_modules/web3-eth-iban/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const utils=__webpack_require__("./node_modules/.pnpm/web3-utils@1.7.4/node_modules/web3-utils/lib/index.js"),BigNumber=__webpack_require__("./node_modules/.pnpm/bn.js@5.2.1/node_modules/bn.js/lib/bn.js"),iso13616Prepare=function(iban){const A="A".charCodeAt(0),Z="Z".charCodeAt(0);return(iban=(iban=iban.toUpperCase()).slice(4)+iban.slice(0,4)).split("").map((function(n){const code=n.charCodeAt(0);return code>=A&&code<=Z?code-A+10:n})).join("")},mod9710=function(iban){let block,remainder=iban;for(;remainder.length>2;)block=remainder.slice(0,9),remainder=parseInt(block,10)%97+remainder.slice(block.length);return parseInt(remainder,10)%97};class Iban{constructor(iban){this._iban=iban}static toAddress(ib){if(!(ib=new Iban(ib)).isDirect())throw new Error("IBAN is indirect and can't be converted");return ib.toAddress()}static toIban(address){return Iban.fromAddress(address).toString()}static fromAddress(address){if(!utils.isAddress(address))throw new Error("Provided address is not a valid address: "+address);address=address.replace("0x","").replace("0X","");const padded=function(string,bytes){let result=string;for(;result.length<2*bytes;)result="0"+result;return result}(new BigNumber(address,16).toString(36),15);return Iban.fromBban(padded.toUpperCase())}static fromBban(bban){const checkDigit=("0"+(98-mod9710(iso13616Prepare("XE00"+bban)))).slice(-2);return new Iban("XE"+checkDigit+bban)}static createIndirect(options){return Iban.fromBban("ETH"+options.institution+options.identifier)}static isValid(iban){return new Iban(iban).isValid()}isValid(){return/^XE[0-9]{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(this._iban)&&1===mod9710(iso13616Prepare(this._iban))}isDirect(){return 34===this._iban.length||35===this._iban.length}isIndirect(){return 20===this._iban.length}checksum(){return this._iban.slice(2,4)}institution(){return this.isIndirect()?this._iban.slice(7,11):""}client(){return this.isIndirect()?this._iban.slice(11):""}toAddress(){if(this.isDirect()){const base36=this._iban.slice(4),asBn=new BigNumber(base36,36);return utils.toChecksumAddress(asBn.toString(16,20))}return""}toString(){return this._iban}}module.exports=Iban},"./node_modules/.pnpm/web3-providers-http@1.7.4/node_modules/web3-providers-http/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var errors=__webpack_require__("./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/index.js").errors,XHR2=__webpack_require__("./node_modules/.pnpm/xhr2-cookies@1.1.0/node_modules/xhr2-cookies/dist/index.js").XMLHttpRequest,http=__webpack_require__("./node_modules/.pnpm/stream-http@3.2.0/node_modules/stream-http/index.js"),https=__webpack_require__("./node_modules/.pnpm/https-browserify@1.0.0/node_modules/https-browserify/index.js"),HttpProvider=function HttpProvider(host,options){options=options||{},this.withCredentials=options.withCredentials||!1,this.timeout=options.timeout||0,this.headers=options.headers,this.agent=options.agent,this.connected=!1;const keepAlive=!1!==options.keepAlive;this.host=host||"http://localhost:8545",this.agent||("https"===this.host.substring(0,5)?this.httpsAgent=new https.Agent({keepAlive}):this.httpAgent=new http.Agent({keepAlive}))};HttpProvider.prototype._prepareRequest=function(){var request;if("undefined"!=typeof XMLHttpRequest)request=new XMLHttpRequest;else{request=new XHR2;var agents={httpsAgent:this.httpsAgent,httpAgent:this.httpAgent,baseUrl:this.baseUrl};this.agent&&(agents.httpsAgent=this.agent.https,agents.httpAgent=this.agent.http,agents.baseUrl=this.agent.baseUrl),request.nodejsSet(agents)}return request.open("POST",this.host,!0),request.setRequestHeader("Content-Type","application/json"),request.timeout=this.timeout,request.withCredentials=this.withCredentials,this.headers&&this.headers.forEach((function(header){request.setRequestHeader(header.name,header.value)})),request},HttpProvider.prototype.send=function(payload,callback){var _this=this,request=this._prepareRequest();request.onreadystatechange=function(){if(4===request.readyState&&1!==request.timeout){var result=request.responseText,error=null;try{result=JSON.parse(result)}catch(e){error=errors.InvalidResponse(request.responseText)}_this.connected=!0,callback(error,result)}},request.ontimeout=function(){_this.connected=!1,callback(errors.ConnectionTimeout(this.timeout))};try{request.send(JSON.stringify(payload))}catch(error){this.connected=!1,callback(errors.InvalidConnection(this.host))}},HttpProvider.prototype.disconnect=function(){},HttpProvider.prototype.supportsSubscriptions=function(){return!1},module.exports=HttpProvider},"./node_modules/.pnpm/web3-providers-ipc@1.7.4/node_modules/web3-providers-ipc/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var errors=__webpack_require__("./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/index.js").errors,oboe=__webpack_require__("./node_modules/.pnpm/oboe@2.1.5/node_modules/oboe/dist/oboe-browser.js"),IpcProvider=function IpcProvider(path,net){var _this=this;this.responseCallbacks={},this.notificationCallbacks=[],this.path=path,this.connected=!1,this.connection=net.connect({path:this.path}),this.addDefaultEvents();var callback=function(result){var id=null;Array.isArray(result)?result.forEach((function(load){_this.responseCallbacks[load.id]&&(id=load.id)})):id=result.id,id||-1===result.method.indexOf("_subscription")?_this.responseCallbacks[id]&&(_this.responseCallbacks[id](null,result),delete _this.responseCallbacks[id]):_this.notificationCallbacks.forEach((function(callback){"function"==typeof callback&&callback(result)}))};"Socket"===net.constructor.name?oboe(this.connection).done(callback):this.connection.on("data",(function(data){_this._parseResponse(data.toString()).forEach(callback)}))};IpcProvider.prototype.addDefaultEvents=function(){var _this=this;this.connection.on("connect",(function(){_this.connected=!0})),this.connection.on("close",(function(){_this.connected=!1})),this.connection.on("error",(function(){_this._timeout()})),this.connection.on("end",(function(){_this._timeout()})),this.connection.on("timeout",(function(){_this._timeout()}))},IpcProvider.prototype._parseResponse=function(data){var _this=this,returnValues=[];return data.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((function(data){_this.lastChunk&&(data=_this.lastChunk+data);var result=null;try{result=JSON.parse(data)}catch(e){return _this.lastChunk=data,clearTimeout(_this.lastChunkTimeout),void(_this.lastChunkTimeout=setTimeout((function(){throw _this._timeout(),errors.InvalidResponse(data)}),15e3))}clearTimeout(_this.lastChunkTimeout),_this.lastChunk=null,result&&returnValues.push(result)})),returnValues},IpcProvider.prototype._addResponseCallback=function(payload,callback){var id=payload.id||payload[0].id,method=payload.method||payload[0].method;this.responseCallbacks[id]=callback,this.responseCallbacks[id].method=method},IpcProvider.prototype._timeout=function(){for(var key in this.responseCallbacks)this.responseCallbacks.hasOwnProperty(key)&&(this.responseCallbacks[key](errors.InvalidConnection("on IPC")),delete this.responseCallbacks[key])},IpcProvider.prototype.reconnect=function(){this.connection.connect({path:this.path})},IpcProvider.prototype.send=function(payload,callback){this.connection.writable||this.connection.connect({path:this.path}),this.connection.write(JSON.stringify(payload)),this._addResponseCallback(payload,callback)},IpcProvider.prototype.on=function(type,callback){if("function"!=typeof callback)throw new Error("The second parameter callback must be a function.");if("data"===type)this.notificationCallbacks.push(callback);else this.connection.on(type,callback)},IpcProvider.prototype.once=function(type,callback){if("function"!=typeof callback)throw new Error("The second parameter callback must be a function.");this.connection.once(type,callback)},IpcProvider.prototype.removeListener=function(type,callback){var _this=this;if("data"===type)this.notificationCallbacks.forEach((function(cb,index){cb===callback&&_this.notificationCallbacks.splice(index,1)}));else this.connection.removeListener(type,callback)},IpcProvider.prototype.removeAllListeners=function(type){if("data"===type)this.notificationCallbacks=[];else this.connection.removeAllListeners(type)},IpcProvider.prototype.reset=function(){this._timeout(),this.notificationCallbacks=[],this.connection.removeAllListeners("error"),this.connection.removeAllListeners("end"),this.connection.removeAllListeners("timeout"),this.addDefaultEvents()},IpcProvider.prototype.supportsSubscriptions=function(){return!0},module.exports=IpcProvider},"./node_modules/.pnpm/web3-providers-ws@1.7.4/node_modules/web3-providers-ws/lib/helpers.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js"),Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer,isNode="[object process]"===Object.prototype.toString.call(void 0!==process?process:0),isRN="undefined"!=typeof navigator&&"ReactNative"===navigator.product,_btoa=null,helpers=null;if(isNode||isRN){_btoa=function(str){return Buffer.from(str).toString("base64")};var url=__webpack_require__("./node_modules/.pnpm/url@0.11.0/node_modules/url/url.js");if(url.URL){var newURL=url.URL;helpers=function(url){return new newURL(url)}}else helpers=__webpack_require__("./node_modules/.pnpm/url@0.11.0/node_modules/url/url.js").parse}else _btoa=btoa.bind("object"==typeof globalThis?globalThis:self),helpers=function(url){return new URL(url)};module.exports={parseURL:helpers,btoa:_btoa}},"./node_modules/.pnpm/web3-providers-ws@1.7.4/node_modules/web3-providers-ws/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var EventEmitter=__webpack_require__("./node_modules/.pnpm/eventemitter3@4.0.4/node_modules/eventemitter3/index.js"),helpers=__webpack_require__("./node_modules/.pnpm/web3-providers-ws@1.7.4/node_modules/web3-providers-ws/lib/helpers.js"),errors=__webpack_require__("./node_modules/.pnpm/web3-core-helpers@1.7.4/node_modules/web3-core-helpers/lib/index.js").errors,Ws=__webpack_require__("./node_modules/.pnpm/websocket@1.0.34/node_modules/websocket/lib/browser.js").w3cwebsocket,WebsocketProvider=function WebsocketProvider(url,options){EventEmitter.call(this),options=options||{},this.url=url,this._customTimeout=options.timeout||15e3,this.headers=options.headers||{},this.protocol=options.protocol||void 0,this.reconnectOptions=Object.assign({auto:!1,delay:5e3,maxAttempts:!1,onTimeout:!1},options.reconnect),this.clientConfig=options.clientConfig||void 0,this.requestOptions=options.requestOptions||void 0,this.DATA="data",this.CLOSE="close",this.ERROR="error",this.CONNECT="connect",this.RECONNECT="reconnect",this.connection=null,this.requestQueue=new Map,this.responseQueue=new Map,this.reconnectAttempts=0,this.reconnecting=!1;var parsedURL=helpers.parseURL(url);parsedURL.username&&parsedURL.password&&(this.headers.authorization="Basic "+helpers.btoa(parsedURL.username+":"+parsedURL.password)),parsedURL.auth&&(this.headers.authorization="Basic "+helpers.btoa(parsedURL.auth)),Object.defineProperty(this,"connected",{get:function(){return this.connection&&this.connection.readyState===this.connection.OPEN},enumerable:!0}),this.connect()};(WebsocketProvider.prototype=Object.create(EventEmitter.prototype)).constructor=WebsocketProvider,WebsocketProvider.prototype.connect=function(){this.connection=new Ws(this.url,this.protocol,void 0,this.headers,this.requestOptions,this.clientConfig),this._addSocketListeners()},WebsocketProvider.prototype._onMessage=function(e){var _this=this;this._parseResponse("string"==typeof e.data?e.data:"").forEach((function(result){if(result.method&&-1!==result.method.indexOf("_subscription"))_this.emit(_this.DATA,result);else{var id=result.id;Array.isArray(result)&&(id=result[0].id),_this.responseQueue.has(id)&&(void 0!==_this.responseQueue.get(id).callback&&_this.responseQueue.get(id).callback(!1,result),_this.responseQueue.delete(id))}}))},WebsocketProvider.prototype._onConnect=function(){if(this.emit(this.CONNECT),this.reconnectAttempts=0,this.reconnecting=!1,this.requestQueue.size>0){var _this=this;this.requestQueue.forEach((function(request,key){_this.send(request.payload,request.callback),_this.requestQueue.delete(key)}))}},WebsocketProvider.prototype._onClose=function(event){var _this=this;!this.reconnectOptions.auto||[1e3,1001].includes(event.code)&&!1!==event.wasClean?(this.emit(this.CLOSE,event),this.requestQueue.size>0&&this.requestQueue.forEach((function(request,key){request.callback(errors.ConnectionNotOpenError(event)),_this.requestQueue.delete(key)})),this.responseQueue.size>0&&this.responseQueue.forEach((function(request,key){request.callback(errors.InvalidConnection("on WS",event)),_this.responseQueue.delete(key)})),this._removeSocketListeners(),this.removeAllListeners()):this.reconnect()},WebsocketProvider.prototype._addSocketListeners=function(){this.connection.addEventListener("message",this._onMessage.bind(this)),this.connection.addEventListener("open",this._onConnect.bind(this)),this.connection.addEventListener("close",this._onClose.bind(this))},WebsocketProvider.prototype._removeSocketListeners=function(){this.connection.removeEventListener("message",this._onMessage),this.connection.removeEventListener("open",this._onConnect),this.connection.removeEventListener("close",this._onClose)},WebsocketProvider.prototype._parseResponse=function(data){var _this=this,returnValues=[];return data.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((function(data){_this.lastChunk&&(data=_this.lastChunk+data);var result=null;try{result=JSON.parse(data)}catch(e){return _this.lastChunk=data,clearTimeout(_this.lastChunkTimeout),void(_this.lastChunkTimeout=setTimeout((function(){_this.reconnectOptions.auto&&_this.reconnectOptions.onTimeout?_this.reconnect():(_this.emit(_this.ERROR,errors.ConnectionTimeout(_this._customTimeout)),_this.requestQueue.size>0&&_this.requestQueue.forEach((function(request,key){request.callback(errors.ConnectionTimeout(_this._customTimeout)),_this.requestQueue.delete(key)})))}),_this._customTimeout))}clearTimeout(_this.lastChunkTimeout),_this.lastChunk=null,result&&returnValues.push(result)})),returnValues},WebsocketProvider.prototype.send=function(payload,callback){var id=payload.id,request={payload,callback};if(Array.isArray(payload)&&(id=payload[0].id),this.connection.readyState===this.connection.CONNECTING||this.reconnecting)this.requestQueue.set(id,request);else{if(this.connection.readyState!==this.connection.OPEN)return this.requestQueue.delete(id),this.emit(this.ERROR,errors.ConnectionNotOpenError()),void request.callback(errors.ConnectionNotOpenError());this.responseQueue.set(id,request),this.requestQueue.delete(id);try{this.connection.send(JSON.stringify(request.payload))}catch(error){request.callback(error),this.responseQueue.delete(id)}}},WebsocketProvider.prototype.reset=function(){this.responseQueue.clear(),this.requestQueue.clear(),this.removeAllListeners(),this._removeSocketListeners(),this._addSocketListeners()},WebsocketProvider.prototype.disconnect=function(code,reason){this._removeSocketListeners(),this.connection.close(code||1e3,reason)},WebsocketProvider.prototype.supportsSubscriptions=function(){return!0},WebsocketProvider.prototype.reconnect=function(){var _this=this;this.reconnecting=!0,this.responseQueue.size>0&&this.responseQueue.forEach((function(request,key){request.callback(errors.PendingRequestsOnReconnectingError()),_this.responseQueue.delete(key)})),!this.reconnectOptions.maxAttempts||this.reconnectAttempts<this.reconnectOptions.maxAttempts?setTimeout((function(){_this.reconnectAttempts++,_this._removeSocketListeners(),_this.emit(_this.RECONNECT,_this.reconnectAttempts),_this.connect()}),this.reconnectOptions.delay):(this.emit(this.ERROR,errors.MaxAttemptsReachedOnReconnectingError()),this.reconnecting=!1,this.requestQueue.size>0&&this.requestQueue.forEach((function(request,key){request.callback(errors.MaxAttemptsReachedOnReconnectingError()),_this.requestQueue.delete(key)})))},module.exports=WebsocketProvider},"./node_modules/.pnpm/web3-utils@1.7.4/node_modules/web3-utils/lib/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var ethjsUnit=__webpack_require__("./node_modules/.pnpm/ethjs-unit@0.1.6/node_modules/ethjs-unit/lib/index.js"),utils=__webpack_require__("./node_modules/.pnpm/web3-utils@1.7.4/node_modules/web3-utils/lib/utils.js"),soliditySha3=__webpack_require__("./node_modules/.pnpm/web3-utils@1.7.4/node_modules/web3-utils/lib/soliditySha3.js"),randombytes=__webpack_require__("./node_modules/.pnpm/randombytes@2.1.0/node_modules/randombytes/browser.js"),BN=__webpack_require__("./node_modules/.pnpm/bn.js@5.2.1/node_modules/bn.js/lib/bn.js"),_flattenTypes=function(includeTuple,puts){var types=[];return puts.forEach((function(param){if("object"==typeof param.components){if("tuple"!==param.type.substring(0,5))throw new Error("components found but type is not tuple; report on GitHub");var suffix="",arrayBracket=param.type.indexOf("[");arrayBracket>=0&&(suffix=param.type.substring(arrayBracket));var result=_flattenTypes(includeTuple,param.components);Array.isArray(result)&&includeTuple?types.push("tuple("+result.join(",")+")"+suffix):includeTuple?types.push("("+result+")"):types.push("("+result.join(",")+")"+suffix)}else types.push(param.type)})),types},hexToAscii=function(hex){if(!utils.isHexStrict(hex))throw new Error("The parameter must be a valid HEX string.");var str="",i=0,l=hex.length;for("0x"===hex.substring(0,2)&&(i=2);i<l;i+=2){var code=parseInt(hex.slice(i,i+2),16);str+=String.fromCharCode(code)}return str},asciiToHex=function(str){if(!str)return"0x00";for(var hex="",i=0;i<str.length;i++){var n=str.charCodeAt(i).toString(16);hex+=n.length<2?"0"+n:n}return"0x"+hex},getUnitValue=function(unit){if(unit=unit?unit.toLowerCase():"ether",!ethjsUnit.unitMap[unit])throw new Error('This unit "'+unit+"\" doesn't exist, please use the one of the following units"+JSON.stringify(ethjsUnit.unitMap,null,2));return unit};module.exports={_fireError:function(error,emitter,reject,callback,optionalData){return!error||"object"!=typeof error||error instanceof Error||!error.data||((error.data&&"object"==typeof error.data||Array.isArray(error.data))&&(error.data=JSON.stringify(error.data,null,2)),error=error.message+"\n"+error.data),"string"==typeof error&&(error=new Error(error)),"function"==typeof callback&&callback(error,optionalData),"function"==typeof reject&&((emitter&&"function"==typeof emitter.listeners&&emitter.listeners("error").length||"function"==typeof callback)&&emitter.catch((function(){})),setTimeout((function(){reject(error)}),1)),emitter&&"function"==typeof emitter.emit&&setTimeout((function(){emitter.emit("error",error,optionalData),emitter.removeAllListeners()}),1),emitter},_jsonInterfaceMethodToString:function(json){return json&&"object"==typeof json&&json.name&&-1!==json.name.indexOf("(")?json.name:json.name+"("+_flattenTypes(!1,json.inputs).join(",")+")"},_flattenTypes,randomHex:function(size){return"0x"+randombytes(size).toString("hex")},BN:utils.BN,isBN:utils.isBN,isBigNumber:utils.isBigNumber,isHex:utils.isHex,isHexStrict:utils.isHexStrict,sha3:utils.sha3,sha3Raw:utils.sha3Raw,keccak256:utils.sha3,soliditySha3:soliditySha3.soliditySha3,soliditySha3Raw:soliditySha3.soliditySha3Raw,encodePacked:soliditySha3.encodePacked,isAddress:utils.isAddress,checkAddressChecksum:utils.checkAddressChecksum,toChecksumAddress:function(address){if(void 0===address)return"";if(!/^(0x)?[0-9a-f]{40}$/i.test(address))throw new Error('Given address "'+address+'" is not a valid Ethereum address.');address=address.toLowerCase().replace(/^0x/i,"");for(var addressHash=utils.sha3(address).replace(/^0x/i,""),checksumAddress="0x",i=0;i<address.length;i++)parseInt(addressHash[i],16)>7?checksumAddress+=address[i].toUpperCase():checksumAddress+=address[i];return checksumAddress},toHex:utils.toHex,toBN:utils.toBN,bytesToHex:utils.bytesToHex,hexToBytes:utils.hexToBytes,hexToNumberString:utils.hexToNumberString,hexToNumber:utils.hexToNumber,toDecimal:utils.hexToNumber,numberToHex:utils.numberToHex,fromDecimal:utils.numberToHex,hexToUtf8:utils.hexToUtf8,hexToString:utils.hexToUtf8,toUtf8:utils.hexToUtf8,stripHexPrefix:utils.stripHexPrefix,utf8ToHex:utils.utf8ToHex,stringToHex:utils.utf8ToHex,fromUtf8:utils.utf8ToHex,hexToAscii,toAscii:hexToAscii,asciiToHex,fromAscii:asciiToHex,unitMap:ethjsUnit.unitMap,toWei:function(number,unit){if(unit=getUnitValue(unit),!utils.isBN(number)&&"string"!=typeof number)throw new Error("Please pass numbers as strings or BN objects to avoid precision errors.");return utils.isBN(number)?ethjsUnit.toWei(number,unit):ethjsUnit.toWei(number,unit).toString(10)},fromWei:function(number,unit){if(unit=getUnitValue(unit),!utils.isBN(number)&&"string"!=typeof number)throw new Error("Please pass numbers as strings or BN objects to avoid precision errors.");return utils.isBN(number)?ethjsUnit.fromWei(number,unit):ethjsUnit.fromWei(number,unit).toString(10)},padLeft:utils.leftPad,leftPad:utils.leftPad,padRight:utils.rightPad,rightPad:utils.rightPad,toTwosComplement:utils.toTwosComplement,isBloom:utils.isBloom,isUserEthereumAddressInBloom:utils.isUserEthereumAddressInBloom,isContractAddressInBloom:utils.isContractAddressInBloom,isTopic:utils.isTopic,isTopicInBloom:utils.isTopicInBloom,isInBloom:utils.isInBloom,compareBlockNumbers:function(a,b){if(a==b)return 0;if("genesis"!=a&&"earliest"!=a&&0!=a||"genesis"!=b&&"earliest"!=b&&0!=b){if("genesis"==a||"earliest"==a)return-1;if("genesis"==b||"earliest"==b)return 1;if("latest"==a)return"pending"==b?-1:1;if("latest"===b)return"pending"==a?1:-1;if("pending"==a)return 1;if("pending"==b)return-1;{let bnA=new BN(a),bnB=new BN(b);return bnA.lt(bnB)?-1:bnA.eq(bnB)?0:1}}return 0},toNumber:utils.toNumber}},"./node_modules/.pnpm/web3-utils@1.7.4/node_modules/web3-utils/lib/soliditySha3.js":(module,__unused_webpack_exports,__webpack_require__)=>{var BN=__webpack_require__("./node_modules/.pnpm/bn.js@5.2.1/node_modules/bn.js/lib/bn.js"),utils=__webpack_require__("./node_modules/.pnpm/web3-utils@1.7.4/node_modules/web3-utils/lib/utils.js"),_parseNumber=function(arg){var type=typeof arg;if("string"===type)return utils.isHexStrict(arg)?new BN(arg.replace(/0x/i,""),16):new BN(arg,10);if("number"===type)return new BN(arg);if(utils.isBigNumber(arg))return new BN(arg.toString(10));if(utils.isBN(arg))return arg;throw new Error(arg+" is not a number")},_solidityPack=function(type,value,arraySize){var size,num,name;if("bytes"===(type=(name=type).startsWith("int[")?"int256"+name.slice(3):"int"===name?"int256":name.startsWith("uint[")?"uint256"+name.slice(4):"uint"===name?"uint256":name.startsWith("fixed[")?"fixed128x128"+name.slice(5):"fixed"===name?"fixed128x128":name.startsWith("ufixed[")?"ufixed128x128"+name.slice(6):"ufixed"===name?"ufixed128x128":name)){if(value.replace(/^0x/i,"").length%2!=0)throw new Error("Invalid bytes characters "+value.length);return value}if("string"===type)return utils.utf8ToHex(value);if("bool"===type)return value?"01":"00";if(type.startsWith("address")){if(size=arraySize?64:40,!utils.isAddress(value))throw new Error(value+" is not a valid address, or the checksum is invalid.");return utils.leftPad(value.toLowerCase(),size)}if(size=function(type){var typesize=/^\D+(\d+).*$/.exec(type);return typesize?parseInt(typesize[1],10):null}(type),type.startsWith("bytes")){if(!size)throw new Error("bytes[] not yet supported in solidity");if(arraySize&&(size=32),size<1||size>32||size<value.replace(/^0x/i,"").length/2)throw new Error("Invalid bytes"+size+" for "+value);return utils.rightPad(value,2*size)}if(type.startsWith("uint")){if(size%8||size<8||size>256)throw new Error("Invalid uint"+size+" size");if((num=_parseNumber(value)).bitLength()>size)throw new Error("Supplied uint exceeds width: "+size+" vs "+num.bitLength());if(num.lt(new BN(0)))throw new Error("Supplied uint "+num.toString()+" is negative");return size?utils.leftPad(num.toString("hex"),size/8*2):num}if(type.startsWith("int")){if(size%8||size<8||size>256)throw new Error("Invalid int"+size+" size");if((num=_parseNumber(value)).bitLength()>size)throw new Error("Supplied int exceeds width: "+size+" vs "+num.bitLength());return num.lt(new BN(0))?num.toTwos(size).toString("hex"):size?utils.leftPad(num.toString("hex"),size/8*2):num}throw new Error("Unsupported or invalid type: "+type)},_processSolidityEncodePackedArgs=function(arg){if(Array.isArray(arg))throw new Error("Autodetection of array types is not supported.");var type,arraySize,value="";if(arg&&"object"==typeof arg&&(arg.hasOwnProperty("v")||arg.hasOwnProperty("t")||arg.hasOwnProperty("value")||arg.hasOwnProperty("type"))?(type=arg.hasOwnProperty("t")?arg.t:arg.type,value=arg.hasOwnProperty("v")?arg.v:arg.value):(type=utils.toHex(arg,!0),value=utils.toHex(arg),type.startsWith("int")||type.startsWith("uint")||(type="bytes")),!type.startsWith("int")&&!type.startsWith("uint")||"string"!=typeof value||/^(-)?0x/i.test(value)||(value=new BN(value)),Array.isArray(value)){if(arraySize=function(type){var arraySize=/^\D+\d*\[(\d+)\]$/.exec(type);return arraySize?parseInt(arraySize[1],10):null}(type),arraySize&&value.length!==arraySize)throw new Error(type+" is not matching the given array "+JSON.stringify(value));arraySize=value.length}return Array.isArray(value)?value.map((function(val){return _solidityPack(type,val,arraySize).toString("hex").replace("0x","")})).join(""):_solidityPack(type,value,arraySize).toString("hex").replace("0x","")};module.exports={soliditySha3:function(){var args=Array.prototype.slice.call(arguments),hexArgs=args.map(_processSolidityEncodePackedArgs);return utils.sha3("0x"+hexArgs.join(""))},soliditySha3Raw:function(){return utils.sha3Raw("0x"+Array.prototype.slice.call(arguments).map(_processSolidityEncodePackedArgs).join(""))},encodePacked:function(){var args=Array.prototype.slice.call(arguments),hexArgs=args.map(_processSolidityEncodePackedArgs);return"0x"+hexArgs.join("").toLowerCase()}}},"./node_modules/.pnpm/web3-utils@1.7.4/node_modules/web3-utils/lib/utils.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer,BN=__webpack_require__("./node_modules/.pnpm/bn.js@5.2.1/node_modules/bn.js/lib/bn.js"),numberToBN=__webpack_require__("./node_modules/.pnpm/number-to-bn@1.7.0/node_modules/number-to-bn/src/index.js"),utf8=__webpack_require__("./node_modules/.pnpm/utf8@3.0.0/node_modules/utf8/utf8.js"),ethereumjsUtil=__webpack_require__("./node_modules/.pnpm/ethereumjs-util@7.1.5/node_modules/ethereumjs-util/dist.browser/index.js"),ethereumBloomFilters=__webpack_require__("./node_modules/.pnpm/ethereum-bloom-filters@1.0.10/node_modules/ethereum-bloom-filters/dist/index.js"),isBN=function(object){return BN.isBN(object)},isBigNumber=function(object){return object&&object.constructor&&"BigNumber"===object.constructor.name},toBN=function(number){try{return numberToBN.apply(null,arguments)}catch(e){throw new Error(e+' Given value: "'+number+'"')}},isAddress=function(address){return!!/^(0x)?[0-9a-f]{40}$/i.test(address)&&(!(!/^(0x|0X)?[0-9a-f]{40}$/.test(address)&&!/^(0x|0X)?[0-9A-F]{40}$/.test(address))||checkAddressChecksum(address))},checkAddressChecksum=function(address){address=address.replace(/^0x/i,"");for(var addressHash=sha3(address.toLowerCase()).replace(/^0x/i,""),i=0;i<40;i++)if(parseInt(addressHash[i],16)>7&&address[i].toUpperCase()!==address[i]||parseInt(addressHash[i],16)<=7&&address[i].toLowerCase()!==address[i])return!1;return!0},utf8ToHex=function(str){var hex="";str=(str=(str=(str=(str=utf8.encode(str)).replace(/^(?:\u0000)*/,"")).split("").reverse().join("")).replace(/^(?:\u0000)*/,"")).split("").reverse().join("");for(var i=0;i<str.length;i++){var n=str.charCodeAt(i).toString(16);hex+=n.length<2?"0"+n:n}return"0x"+hex},hexToNumber=function(value){if(!value)return value;if("string"==typeof value&&!isHexStrict(value))throw new Error('Given value "'+value+'" is not a valid hex string.');return toBN(value).toNumber()},numberToHex=function(value){if(null==value)return value;if(!isFinite(value)&&!isHexStrict(value))throw new Error('Given input "'+value+'" is not a number.');var number=toBN(value),result=number.toString(16);return number.lt(new BN(0))?"-0x"+result.slice(1):"0x"+result},toHex=function(value,returnType){if(isAddress(value))return returnType?"address":"0x"+value.toLowerCase().replace(/^0x/i,"");if("boolean"==typeof value)return returnType?"bool":value?"0x01":"0x00";if(Buffer.isBuffer(value))return"0x"+value.toString("hex");if("object"==typeof value&&value&&!isBigNumber(value)&&!isBN(value))return returnType?"string":utf8ToHex(JSON.stringify(value));if("string"==typeof value){if(0===value.indexOf("-0x")||0===value.indexOf("-0X"))return returnType?"int256":numberToHex(value);if(0===value.indexOf("0x")||0===value.indexOf("0X"))return returnType?"bytes":value;if(!isFinite(value))return returnType?"string":utf8ToHex(value)}return returnType?value<0?"int256":"uint256":numberToHex(value)},isHexStrict=function(hex){return("string"==typeof hex||"number"==typeof hex)&&/^(-)?0x[0-9a-f]*$/i.test(hex)},isHex=function(hex){return("string"==typeof hex||"number"==typeof hex)&&/^(-0x|0x)?[0-9a-f]*$/i.test(hex)},SHA3_NULL_S="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",sha3=function(value){isBN(value)&&(value=value.toString()),isHexStrict(value)&&/^0x/i.test(value.toString())?value=ethereumjsUtil.toBuffer(value):"string"==typeof value&&(value=Buffer.from(value,"utf-8"));var returnValue=ethereumjsUtil.bufferToHex(ethereumjsUtil.keccak256(value));return returnValue===SHA3_NULL_S?null:returnValue};sha3._Hash=ethereumjsUtil.keccak256;var BNwrapped=function(value){if("string"==typeof value&&value.includes("0x")){const[negative,hexValue]=value.toLocaleLowerCase().startsWith("-")?["-",value.slice(3)]:["",value.slice(2)];return new BN(negative+hexValue,16)}return new BN(value)};Object.setPrototypeOf(BNwrapped,BN),Object.setPrototypeOf(BNwrapped.prototype,BN.prototype),module.exports={BN:BNwrapped,isBN,isBigNumber,toBN,isAddress,isBloom:function(bloom){return ethereumBloomFilters.isBloom(bloom)},isUserEthereumAddressInBloom:function(bloom,ethereumAddress){return ethereumBloomFilters.isUserEthereumAddressInBloom(bloom,ethereumAddress)},isContractAddressInBloom:function(bloom,contractAddress){return ethereumBloomFilters.isContractAddressInBloom(bloom,contractAddress)},isTopic:function(topic){return ethereumBloomFilters.isTopic(topic)},isTopicInBloom:function(bloom,topic){return ethereumBloomFilters.isTopicInBloom(bloom,topic)},isInBloom:function(bloom,topic){return ethereumBloomFilters.isInBloom(bloom,topic)},checkAddressChecksum,utf8ToHex,hexToUtf8:function(hex){if(!isHexStrict(hex))throw new Error('The parameter "'+hex+'" must be a valid HEX string.');for(var str="",code=0,l=(hex=(hex=(hex=(hex=(hex=hex.replace(/^0x/i,"")).replace(/^(?:00)*/,"")).split("").reverse().join("")).replace(/^(?:00)*/,"")).split("").reverse().join("")).length,i=0;i<l;i+=2)code=parseInt(hex.slice(i,i+2),16),str+=String.fromCharCode(code);return utf8.decode(str)},hexToNumber,hexToNumberString:function(value){if(!value)return value;if("string"==typeof value&&!isHexStrict(value))throw new Error('Given value "'+value+'" is not a valid hex string.');return toBN(value).toString(10)},numberToHex,toHex,hexToBytes:function(hex){if(hex=hex.toString(16),!isHexStrict(hex))throw new Error('Given value "'+hex+'" is not a valid hex string.');hex=hex.replace(/^0x/i,"");for(var bytes=[],c=0;c<hex.length;c+=2)bytes.push(parseInt(hex.slice(c,c+2),16));return bytes},bytesToHex:function(bytes){for(var hex=[],i=0;i<bytes.length;i++)hex.push((bytes[i]>>>4).toString(16)),hex.push((15&bytes[i]).toString(16));return"0x"+hex.join("")},isHex,isHexStrict,stripHexPrefix:function(str){return 0!==str&&isHex(str)?str.replace(/^(-)?0x/i,"$1"):str},leftPad:function(string,chars,sign){var hasPrefix=/^0x/i.test(string)||"number"==typeof string,padding=chars-(string=string.toString(16).replace(/^0x/i,"")).length+1>=0?chars-string.length+1:0;return(hasPrefix?"0x":"")+new Array(padding).join(sign||"0")+string},rightPad:function(string,chars,sign){var hasPrefix=/^0x/i.test(string)||"number"==typeof string,padding=chars-(string=string.toString(16).replace(/^0x/i,"")).length+1>=0?chars-string.length+1:0;return(hasPrefix?"0x":"")+string+new Array(padding).join(sign||"0")},toTwosComplement:function(number){return"0x"+toBN(number).toTwos(256).toString(16,64)},sha3,sha3Raw:function(value){return null===(value=sha3(value))?SHA3_NULL_S:value},toNumber:function(value){return"number"==typeof value?value:hexToNumber(toHex(value))}}},"./node_modules/.pnpm/websocket@1.0.34/node_modules/websocket/lib/browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{var _globalThis;if("object"==typeof globalThis)_globalThis=globalThis;else try{_globalThis=__webpack_require__("./node_modules/.pnpm/es5-ext@0.10.61/node_modules/es5-ext/global.js")}catch(error){}finally{if(_globalThis||"undefined"==typeof window||(_globalThis=window),!_globalThis)throw new Error("Could not determine global this")}var NativeWebSocket=_globalThis.WebSocket||_globalThis.MozWebSocket,websocket_version=__webpack_require__("./node_modules/.pnpm/websocket@1.0.34/node_modules/websocket/lib/version.js");function W3CWebSocket(uri,protocols){return protocols?new NativeWebSocket(uri,protocols):new NativeWebSocket(uri)}NativeWebSocket&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(prop){Object.defineProperty(W3CWebSocket,prop,{get:function(){return NativeWebSocket[prop]}})})),module.exports={w3cwebsocket:NativeWebSocket?W3CWebSocket:null,version:websocket_version}},"./node_modules/.pnpm/websocket@1.0.34/node_modules/websocket/lib/version.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/.pnpm/websocket@1.0.34/node_modules/websocket/package.json").version},"./node_modules/.pnpm/@babel+runtime@7.18.3/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_require__.d(__webpack_exports__,{Z:()=>_objectWithoutProperties})},"./node_modules/.pnpm/websocket@1.0.34/node_modules/websocket/package.json":module=>{"use strict";module.exports={version:"1.0.34"}}}]);